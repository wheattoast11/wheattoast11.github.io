const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-DcwaOwB_.js","assets/framer-7IjupUgm.js","assets/react-BHlW0wE9.js"])))=>i.map(i=>d[i]);
import{j as m,m as Gr,a as Pe,u as Ji,b as zn,c as $a,L as Fa,M as La,d as Ia}from"./framer-7IjupUgm.js";import{a as Kn,r as u,R as ja,b as Na,c as J}from"./react-BHlW0wE9.js";import{G as za,B as ao,C as Xt,a as Xr,P as Ba,A as lo,b as Va,M as Bn,I as Ua,c as Oa,D as Ha,d as uo,V as Pt,O as Wa,F as Qi,S as Wt,U as hn,e as it,W as Fr,H as Lr,N as co,f as qa,g as Ya,h as es,i as Ga,R as Xa,j as Za,k as Ka,l as Ja,m as Qa,n as el,o as tl,p as ts,q as rl}from"./three-CDTd2Mza.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Jn={},rs=Kn;Jn.createRoot=rs.createRoot,Jn.hydrateRoot=rs.hydrateRoot;const nl="modulepreload",il=function(e){return"/"+e},ns={},sl=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=Promise.allSettled(r.map(l=>{if(l=il(l),l in ns)return;ns[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":nl,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Me.apply(this,arguments)}var Ne;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ne||(Ne={}));const is="popstate";function ol(e){e===void 0&&(e={});function t(n,i){let{pathname:s,search:o,hash:a}=n.location;return Ir("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:jr(i)}return ll(t,r,null,e)}function ce(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ur(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function al(){return Math.random().toString(36).substr(2,8)}function ss(e,t){return{usr:e.state,key:e.key,idx:t}}function Ir(e,t,r,n){return r===void 0&&(r=null),Me({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?It(t):t,{state:r,key:t&&t.key||n||al()})}function jr(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function It(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function ll(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=Ne.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Me({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Ne.Pop;let x=d(),C=x==null?null:x-c;c=x,l&&l({action:a,location:b.location,delta:C})}function f(x,C){a=Ne.Push;let w=Ir(b.location,x,C);c=d()+1;let M=ss(w,c),R=b.createHref(w);try{o.pushState(M,"",R)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(R)}s&&l&&l({action:a,location:b.location,delta:1})}function p(x,C){a=Ne.Replace;let w=Ir(b.location,x,C);c=d();let M=ss(w,c),R=b.createHref(w);o.replaceState(M,"",R),s&&l&&l({action:a,location:b.location,delta:0})}function y(x){let C=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof x=="string"?x:jr(x);return w=w.replace(/ $/,"%20"),ce(C,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,C)}let b={get action(){return a},get location(){return e(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(is,h),l=x,()=>{i.removeEventListener(is,h),l=null}},createHref(x){return t(i,x)},createURL:y,encodeLocation(x){let C=y(x);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:f,replace:p,go(x){return o.go(x)}};return b}var ye;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ye||(ye={}));const ul=new Set(["lazy","caseSensitive","path","id","index","children"]);function cl(e){return e.index===!0}function fn(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((i,s)=>{let o=[...r,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(ce(i.index!==!0||!i.children,"Cannot specify children on an index route"),ce(!n[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),cl(i)){let l=Me({},i,t(i),{id:a});return n[a]=l,l}else{let l=Me({},i,t(i),{id:a,children:void 0});return n[a]=l,i.children&&(l.children=fn(i.children,t,o,n)),l}})}function Ot(e,t,r){return r===void 0&&(r="/"),an(e,t,r,!1)}function an(e,t,r,n){let i=typeof t=="string"?It(t):t,s=Nr(i.pathname||"/",r);if(s==null)return null;let o=ho(e);hl(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Cl(s);a=xl(o[l],c,n)}return a}function dl(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],handle:r.handle}}function ho(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ce(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=Gt([n,l.relativePath]),d=r.concat(l);s.children&&s.children.length>0&&(ce(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ho(s.children,t,d,c)),!(s.path==null&&!s.index)&&t.push({path:c,score:wl(c,s.index),routesMeta:d})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of fo(s.path))i(s,o,l)}),t}function fo(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=fo(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function hl(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:bl(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const fl=/^:[\w-]+$/,ml=3,pl=2,gl=1,vl=10,yl=-2,os=e=>e==="*";function wl(e,t){let r=e.split("/"),n=r.length;return r.some(os)&&(n+=yl),t&&(n+=pl),r.filter(i=>!os(i)).reduce((i,s)=>i+(fl.test(s)?ml:s===""?gl:vl),n)}function bl(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function xl(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,i={},s="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,d=s==="/"?t:t.slice(s.length)||"/",h=as({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h&&c&&r&&!n[n.length-1].route.index&&(h=as({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Gt([s,h.pathname]),pathnameBase:Tl(Gt([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Gt([s,h.pathnameBase]))}return o}function as(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=_l(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let b=a[h]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const y=a[h];return p&&!y?c[f]=void 0:c[f]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:e}}function _l(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),ur(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function Cl(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ur(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Nr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function El(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?It(e):e;return{pathname:r?r.startsWith("/")?r:Sl(r,t):t,search:Pl(n),hash:Dl(i)}}function Sl(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Vn(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mo(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Ml(e,t){let r=mo(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Rl(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=It(e):(i=Me({},e),ce(!i.pathname||!i.pathname.includes("?"),Vn("?","pathname","search",i)),ce(!i.pathname||!i.pathname.includes("#"),Vn("#","pathname","hash",i)),ce(!i.search||!i.search.includes("#"),Vn("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?t[h]:"/"}let l=El(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Gt=e=>e.join("/").replace(/\/\/+/g,"/"),Tl=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Pl=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Dl=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class mn{constructor(t,r,n,i){i===void 0&&(i=!1),this.status=t,this.statusText=r||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function _n(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const po=["post","put","patch","delete"],kl=new Set(po),Al=["get",...po],$l=new Set(Al),Fl=new Set([301,302,303,307,308]),Ll=new Set([307,308]),Un={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Il={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Tr={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},bi=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jl=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),go="remix-router-transitions";function Nl(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",n=!r;ce(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let g=e.detectErrorBoundary;i=_=>({hasErrorBoundary:g(_)})}else i=jl;let s={},o=fn(e.routes,i,void 0,s),a,l=e.basename||"/",c=e.dataStrategy||Ul,d=e.patchRoutesOnNavigation,h=Me({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),f=null,p=new Set,y=null,b=null,x=null,C=e.hydrationData!=null,w=Ot(o,e.history.location,l),M=null;if(w==null&&!d){let g=tt(404,{pathname:e.history.location.pathname}),{matches:_,route:S}=ys(o);w=_,M={[S.id]:g}}w&&!e.hydrationData&&Cr(w,o,e.history.location.pathname).active&&(w=null);let R;if(w)if(w.some(g=>g.route.lazy))R=!1;else if(!w.some(g=>g.route.loader))R=!0;else if(h.v7_partialHydration){let g=e.hydrationData?e.hydrationData.loaderData:null,_=e.hydrationData?e.hydrationData.errors:null;if(_){let S=w.findIndex(A=>_[A.route.id]!==void 0);R=w.slice(0,S+1).every(A=>!ei(A.route,g,_))}else R=w.every(S=>!ei(S.route,g,_))}else R=e.hydrationData!=null;else if(R=!1,w=[],h.v7_partialHydration){let g=Cr(null,o,e.history.location.pathname);g.active&&g.matches&&(w=g.matches)}let P,v={historyAction:e.history.action,location:e.history.location,matches:w,initialized:R,navigation:Un,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||M,fetchers:new Map,blockers:new Map},I=Ne.Pop,D=!1,F,$=!1,N=new Map,L=null,j=!1,H=!1,ne=[],V=new Set,Z=new Map,ge=0,X=-1,ie=new Map,ee=new Set,fe=new Map,Ae=new Map,be=new Set,re=new Map,se=new Map,$e;function Dt(){if(f=e.history.listen(g=>{let{action:_,location:S,delta:A}=g;if($e){$e(),$e=void 0;return}ur(se.size===0||A!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let z=zt({currentLocation:v.location,nextLocation:S,historyAction:_});if(z&&A!=null){let Y=new Promise(te=>{$e=te});e.history.go(A*-1),St(z,{state:"blocked",location:S,proceed(){St(z,{state:"proceeding",proceed:void 0,reset:void 0,location:S}),Y.then(()=>e.history.go(A))},reset(){let te=new Map(v.blockers);te.set(z,Tr),xe({blockers:te})}});return}return Fe(_,S)}),r){ru(t,N);let g=()=>nu(t,N);t.addEventListener("pagehide",g),L=()=>t.removeEventListener("pagehide",g)}return v.initialized||Fe(Ne.Pop,v.location,{initialHydration:!0}),P}function Ct(){f&&f(),L&&L(),p.clear(),F&&F.abort(),v.fetchers.forEach((g,_)=>at(_)),v.blockers.forEach((g,_)=>Hr(_))}function ut(g){return p.add(g),()=>p.delete(g)}function xe(g,_){_===void 0&&(_={}),v=Me({},v,g);let S=[],A=[];h.v7_fetcherPersist&&v.fetchers.forEach((z,Y)=>{z.state==="idle"&&(be.has(Y)?A.push(Y):S.push(Y))}),[...p].forEach(z=>z(v,{deletedFetchers:A,viewTransitionOpts:_.viewTransitionOpts,flushSync:_.flushSync===!0})),h.v7_fetcherPersist&&(S.forEach(z=>v.fetchers.delete(z)),A.forEach(z=>at(z)))}function W(g,_,S){var A,z;let{flushSync:Y}=S===void 0?{}:S,te=v.actionData!=null&&v.navigation.formMethod!=null&&ft(v.navigation.formMethod)&&v.navigation.state==="loading"&&((A=g.state)==null?void 0:A._isRedirect)!==!0,U;_.actionData?Object.keys(_.actionData).length>0?U=_.actionData:U=null:te?U=v.actionData:U=null;let O=_.loaderData?gs(v.loaderData,_.loaderData,_.matches||[],_.errors):v.loaderData,B=v.blockers;B.size>0&&(B=new Map(B),B.forEach((ue,He)=>B.set(He,Tr)));let G=D===!0||v.navigation.formMethod!=null&&ft(v.navigation.formMethod)&&((z=g.state)==null?void 0:z._isRedirect)!==!0;a&&(o=a,a=void 0),j||I===Ne.Pop||(I===Ne.Push?e.history.push(g,g.state):I===Ne.Replace&&e.history.replace(g,g.state));let oe;if(I===Ne.Pop){let ue=N.get(v.location.pathname);ue&&ue.has(g.pathname)?oe={currentLocation:v.location,nextLocation:g}:N.has(g.pathname)&&(oe={currentLocation:g,nextLocation:v.location})}else if($){let ue=N.get(v.location.pathname);ue?ue.add(g.pathname):(ue=new Set([g.pathname]),N.set(v.location.pathname,ue)),oe={currentLocation:v.location,nextLocation:g}}xe(Me({},_,{actionData:U,loaderData:O,historyAction:I,location:g,initialized:!0,navigation:Un,revalidation:"idle",restoreScrollPosition:In(g,_.matches||v.matches),preventScrollReset:G,blockers:B}),{viewTransitionOpts:oe,flushSync:Y===!0}),I=Ne.Pop,D=!1,$=!1,j=!1,H=!1,ne=[]}async function Je(g,_){if(typeof g=="number"){e.history.go(g);return}let S=Qn(v.location,v.matches,l,h.v7_prependBasename,g,h.v7_relativeSplatPath,_?.fromRouteId,_?.relative),{path:A,submission:z,error:Y}=ls(h.v7_normalizeFormMethod,!1,S,_),te=v.location,U=Ir(v.location,A,_&&_.state);U=Me({},U,e.history.encodeLocation(U));let O=_&&_.replace!=null?_.replace:void 0,B=Ne.Push;O===!0?B=Ne.Replace:O===!1||z!=null&&ft(z.formMethod)&&z.formAction===v.location.pathname+v.location.search&&(B=Ne.Replace);let G=_&&"preventScrollReset"in _?_.preventScrollReset===!0:void 0,oe=(_&&_.flushSync)===!0,ue=zt({currentLocation:te,nextLocation:U,historyAction:B});if(ue){St(ue,{state:"blocked",location:U,proceed(){St(ue,{state:"proceeding",proceed:void 0,reset:void 0,location:U}),Je(g,_)},reset(){let He=new Map(v.blockers);He.set(ue,Tr),xe({blockers:He})}});return}return await Fe(B,U,{submission:z,pendingError:Y,preventScrollReset:G,replace:_&&_.replace,enableViewTransition:_&&_.viewTransition,flushSync:oe})}function Xe(){if(et(),xe({revalidation:"loading"}),v.navigation.state!=="submitting"){if(v.navigation.state==="idle"){Fe(v.historyAction,v.location,{startUninterruptedRevalidation:!0});return}Fe(I||v.historyAction,v.navigation.location,{overrideNavigation:v.navigation,enableViewTransition:$===!0})}}async function Fe(g,_,S){F&&F.abort(),F=null,I=g,j=(S&&S.startUninterruptedRevalidation)===!0,Zi(v.location,v.matches),D=(S&&S.preventScrollReset)===!0,$=(S&&S.enableViewTransition)===!0;let A=a||o,z=S&&S.overrideNavigation,Y=Ot(A,_,l),te=(S&&S.flushSync)===!0,U=Cr(Y,A,_.pathname);if(U.active&&U.matches&&(Y=U.matches),!Y){let{error:_e,notFoundMatches:me,route:De}=br(_.pathname);W(_,{matches:me,loaderData:{},errors:{[De.id]:_e}},{flushSync:te});return}if(v.initialized&&!H&&Gl(v.location,_)&&!(S&&S.submission&&ft(S.submission.formMethod))){W(_,{matches:Y},{flushSync:te});return}F=new AbortController;let O=ir(e.history,_,F.signal,S&&S.submission),B;if(S&&S.pendingError)B=[Ht(Y).route.id,{type:ye.error,error:S.pendingError}];else if(S&&S.submission&&ft(S.submission.formMethod)){let _e=await vt(O,_,S.submission,Y,U.active,{replace:S.replace,flushSync:te});if(_e.shortCircuited)return;if(_e.pendingActionResult){let[me,De]=_e.pendingActionResult;if(nt(De)&&_n(De.error)&&De.error.status===404){F=null,W(_,{matches:_e.matches,loaderData:{},errors:{[me]:De.error}});return}}Y=_e.matches||Y,B=_e.pendingActionResult,z=On(_,S.submission),te=!1,U.active=!1,O=ir(e.history,O.url,O.signal)}let{shortCircuited:G,matches:oe,loaderData:ue,errors:He}=await ze(O,_,Y,U.active,z,S&&S.submission,S&&S.fetcherSubmission,S&&S.replace,S&&S.initialHydration===!0,te,B);G||(F=null,W(_,Me({matches:oe||Y},vs(B),{loaderData:ue,errors:He})))}async function vt(g,_,S,A,z,Y){Y===void 0&&(Y={}),et();let te=eu(_,S);if(xe({navigation:te},{flushSync:Y.flushSync===!0}),z){let B=await Er(A,_.pathname,g.signal);if(B.type==="aborted")return{shortCircuited:!0};if(B.type==="error"){let G=Ht(B.partialMatches).route.id;return{matches:B.partialMatches,pendingActionResult:[G,{type:ye.error,error:B.error}]}}else if(B.matches)A=B.matches;else{let{notFoundMatches:G,error:oe,route:ue}=br(_.pathname);return{matches:G,pendingActionResult:[ue.id,{type:ye.error,error:oe}]}}}let U,O=$r(A,_);if(!O.route.action&&!O.route.lazy)U={type:ye.error,error:tt(405,{method:g.method,pathname:_.pathname,routeId:O.route.id})};else if(U=(await Qe("action",v,g,[O],A,null))[O.route.id],g.signal.aborted)return{shortCircuited:!0};if(qt(U)){let B;return Y&&Y.replace!=null?B=Y.replace:B=fs(U.response.headers.get("Location"),new URL(g.url),l)===v.location.pathname+v.location.search,await Be(g,U,!0,{submission:S,replace:B}),{shortCircuited:!0}}if($t(U))throw tt(400,{type:"defer-action"});if(nt(U)){let B=Ht(A,O.route.id);return(Y&&Y.replace)!==!0&&(I=Ne.Push),{matches:A,pendingActionResult:[B.route.id,U]}}return{matches:A,pendingActionResult:[O.route.id,U]}}async function ze(g,_,S,A,z,Y,te,U,O,B,G){let oe=z||On(_,Y),ue=Y||te||bs(oe),He=!j&&(!h.v7_partialHydration||!O);if(A){if(He){let ke=Le(G);xe(Me({navigation:oe},ke!==void 0?{actionData:ke}:{}),{flushSync:B})}let de=await Er(S,_.pathname,g.signal);if(de.type==="aborted")return{shortCircuited:!0};if(de.type==="error"){let ke=Ht(de.partialMatches).route.id;return{matches:de.partialMatches,loaderData:{},errors:{[ke]:de.error}}}else if(de.matches)S=de.matches;else{let{error:ke,notFoundMatches:rr,route:Rr}=br(_.pathname);return{matches:rr,loaderData:{},errors:{[Rr.id]:ke}}}}let _e=a||o,[me,De]=cs(e.history,v,S,ue,_,h.v7_partialHydration&&O===!0,h.v7_skipActionErrorRevalidation,H,ne,V,be,fe,ee,_e,l,G);if(xr(de=>!(S&&S.some(ke=>ke.route.id===de))||me&&me.some(ke=>ke.route.id===de)),X=++ge,me.length===0&&De.length===0){let de=xt();return W(_,Me({matches:S,loaderData:{},errors:G&&nt(G[1])?{[G[0]]:G[1].error}:null},vs(G),de?{fetchers:new Map(v.fetchers)}:{}),{flushSync:B}),{shortCircuited:!0}}if(He){let de={};if(!A){de.navigation=oe;let ke=Le(G);ke!==void 0&&(de.actionData=ke)}De.length>0&&(de.fetchers=yt(De)),xe(de,{flushSync:B})}De.forEach(de=>{Ge(de.key),de.controller&&Z.set(de.key,de.controller)});let tr=()=>De.forEach(de=>Ge(de.key));F&&F.signal.addEventListener("abort",tr);let{loaderResults:Sr,fetcherResults:Mt}=await st(v,S,me,De,g);if(g.signal.aborted)return{shortCircuited:!0};F&&F.signal.removeEventListener("abort",tr),De.forEach(de=>Z.delete(de.key));let _t=Zr(Sr);if(_t)return await Be(g,_t.result,!0,{replace:U}),{shortCircuited:!0};if(_t=Zr(Mt),_t)return ee.add(_t.key),await Be(g,_t.result,!0,{replace:U}),{shortCircuited:!0};let{loaderData:Nn,errors:Mr}=ps(v,S,Sr,G,De,Mt,re);re.forEach((de,ke)=>{de.subscribe(rr=>{(rr||de.done)&&re.delete(ke)})}),h.v7_partialHydration&&O&&v.errors&&(Mr=Me({},v.errors,Mr));let Bt=xt(),qr=pe(X),Yr=Bt||qr||De.length>0;return Me({matches:S,loaderData:Nn,errors:Mr},Yr?{fetchers:new Map(v.fetchers)}:{})}function Le(g){if(g&&!nt(g[1]))return{[g[0]]:g[1].data};if(v.actionData)return Object.keys(v.actionData).length===0?null:v.actionData}function yt(g){return g.forEach(_=>{let S=v.fetchers.get(_.key),A=Pr(void 0,S?S.data:void 0);v.fetchers.set(_.key,A)}),new Map(v.fetchers)}function wt(g,_,S,A){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Ge(g);let z=(A&&A.flushSync)===!0,Y=a||o,te=Qn(v.location,v.matches,l,h.v7_prependBasename,S,h.v7_relativeSplatPath,_,A?.relative),U=Ot(Y,te,l),O=Cr(U,Y,te);if(O.active&&O.matches&&(U=O.matches),!U){Ee(g,_,tt(404,{pathname:te}),{flushSync:z});return}let{path:B,submission:G,error:oe}=ls(h.v7_normalizeFormMethod,!0,te,A);if(oe){Ee(g,_,oe,{flushSync:z});return}let ue=$r(U,B),He=(A&&A.preventScrollReset)===!0;if(G&&ft(G.formMethod)){ct(g,_,B,ue,U,O.active,z,He,G);return}fe.set(g,{routeId:_,path:B}),dt(g,_,B,ue,U,O.active,z,He,G)}async function ct(g,_,S,A,z,Y,te,U,O){et(),fe.delete(g);function B(Ie){if(!Ie.route.action&&!Ie.route.lazy){let nr=tt(405,{method:O.formMethod,pathname:S,routeId:_});return Ee(g,_,nr,{flushSync:te}),!0}return!1}if(!Y&&B(A))return;let G=v.fetchers.get(g);Oe(g,tu(O,G),{flushSync:te});let oe=new AbortController,ue=ir(e.history,S,oe.signal,O);if(Y){let Ie=await Er(z,S,ue.signal);if(Ie.type==="aborted")return;if(Ie.type==="error"){Ee(g,_,Ie.error,{flushSync:te});return}else if(Ie.matches){if(z=Ie.matches,A=$r(z,S),B(A))return}else{Ee(g,_,tt(404,{pathname:S}),{flushSync:te});return}}Z.set(g,oe);let He=ge,me=(await Qe("action",v,ue,[A],z,g))[A.route.id];if(ue.signal.aborted){Z.get(g)===oe&&Z.delete(g);return}if(h.v7_fetcherPersist&&be.has(g)){if(qt(me)||nt(me)){Oe(g,kt(void 0));return}}else{if(qt(me))if(Z.delete(g),X>He){Oe(g,kt(void 0));return}else return ee.add(g),Oe(g,Pr(O)),Be(ue,me,!1,{fetcherSubmission:O,preventScrollReset:U});if(nt(me)){Ee(g,_,me.error);return}}if($t(me))throw tt(400,{type:"defer-action"});let De=v.navigation.location||v.location,tr=ir(e.history,De,oe.signal),Sr=a||o,Mt=v.navigation.state!=="idle"?Ot(Sr,v.navigation.location,l):v.matches;ce(Mt,"Didn't find any matches after fetcher action");let _t=++ge;ie.set(g,_t);let Nn=Pr(O,me.data);v.fetchers.set(g,Nn);let[Mr,Bt]=cs(e.history,v,Mt,O,De,!1,h.v7_skipActionErrorRevalidation,H,ne,V,be,fe,ee,Sr,l,[A.route.id,me]);Bt.filter(Ie=>Ie.key!==g).forEach(Ie=>{let nr=Ie.key,Ki=v.fetchers.get(nr),Aa=Pr(void 0,Ki?Ki.data:void 0);v.fetchers.set(nr,Aa),Ge(nr),Ie.controller&&Z.set(nr,Ie.controller)}),xe({fetchers:new Map(v.fetchers)});let qr=()=>Bt.forEach(Ie=>Ge(Ie.key));oe.signal.addEventListener("abort",qr);let{loaderResults:Yr,fetcherResults:de}=await st(v,Mt,Mr,Bt,tr);if(oe.signal.aborted)return;oe.signal.removeEventListener("abort",qr),ie.delete(g),Z.delete(g),Bt.forEach(Ie=>Z.delete(Ie.key));let ke=Zr(Yr);if(ke)return Be(tr,ke.result,!1,{preventScrollReset:U});if(ke=Zr(de),ke)return ee.add(ke.key),Be(tr,ke.result,!1,{preventScrollReset:U});let{loaderData:rr,errors:Rr}=ps(v,Mt,Yr,void 0,Bt,de,re);if(v.fetchers.has(g)){let Ie=kt(me.data);v.fetchers.set(g,Ie)}pe(_t),v.navigation.state==="loading"&&_t>X?(ce(I,"Expected pending action"),F&&F.abort(),W(v.navigation.location,{matches:Mt,loaderData:rr,errors:Rr,fetchers:new Map(v.fetchers)})):(xe({errors:Rr,loaderData:gs(v.loaderData,rr,Mt,Rr),fetchers:new Map(v.fetchers)}),H=!1)}async function dt(g,_,S,A,z,Y,te,U,O){let B=v.fetchers.get(g);Oe(g,Pr(O,B?B.data:void 0),{flushSync:te});let G=new AbortController,oe=ir(e.history,S,G.signal);if(Y){let me=await Er(z,S,oe.signal);if(me.type==="aborted")return;if(me.type==="error"){Ee(g,_,me.error,{flushSync:te});return}else if(me.matches)z=me.matches,A=$r(z,S);else{Ee(g,_,tt(404,{pathname:S}),{flushSync:te});return}}Z.set(g,G);let ue=ge,_e=(await Qe("loader",v,oe,[A],z,g))[A.route.id];if($t(_e)&&(_e=await xi(_e,oe.signal,!0)||_e),Z.get(g)===G&&Z.delete(g),!oe.signal.aborted){if(be.has(g)){Oe(g,kt(void 0));return}if(qt(_e))if(X>ue){Oe(g,kt(void 0));return}else{ee.add(g),await Be(oe,_e,!1,{preventScrollReset:U});return}if(nt(_e)){Ee(g,_,_e.error);return}ce(!$t(_e),"Unhandled fetcher deferred data"),Oe(g,kt(_e.data))}}async function Be(g,_,S,A){let{submission:z,fetcherSubmission:Y,preventScrollReset:te,replace:U}=A===void 0?{}:A;_.response.headers.has("X-Remix-Revalidate")&&(H=!0);let O=_.response.headers.get("Location");ce(O,"Expected a Location header on the redirect Response"),O=fs(O,new URL(g.url),l);let B=Ir(v.location,O,{_isRedirect:!0});if(r){let me=!1;if(_.response.headers.has("X-Remix-Reload-Document"))me=!0;else if(bi.test(O)){const De=e.history.createURL(O);me=De.origin!==t.location.origin||Nr(De.pathname,l)==null}if(me){U?t.location.replace(O):t.location.assign(O);return}}F=null;let G=U===!0||_.response.headers.has("X-Remix-Replace")?Ne.Replace:Ne.Push,{formMethod:oe,formAction:ue,formEncType:He}=v.navigation;!z&&!Y&&oe&&ue&&He&&(z=bs(v.navigation));let _e=z||Y;if(Ll.has(_.response.status)&&_e&&ft(_e.formMethod))await Fe(G,B,{submission:Me({},_e,{formAction:O}),preventScrollReset:te||D,enableViewTransition:S?$:void 0});else{let me=On(B,z);await Fe(G,B,{overrideNavigation:me,fetcherSubmission:Y,preventScrollReset:te||D,enableViewTransition:S?$:void 0})}}async function Qe(g,_,S,A,z,Y){let te,U={};try{te=await Ol(c,g,_,S,A,z,Y,s,i)}catch(O){return A.forEach(B=>{U[B.route.id]={type:ye.error,error:O}}),U}for(let[O,B]of Object.entries(te))if(Xl(B)){let G=B.result;U[O]={type:ye.redirect,response:ql(G,S,O,z,l,h.v7_relativeSplatPath)}}else U[O]=await Wl(B);return U}async function st(g,_,S,A,z){let Y=g.matches,te=Qe("loader",g,z,S,_,null),U=Promise.all(A.map(async G=>{if(G.matches&&G.match&&G.controller){let ue=(await Qe("loader",g,ir(e.history,G.path,G.controller.signal),[G.match],G.matches,G.key))[G.match.route.id];return{[G.key]:ue}}else return Promise.resolve({[G.key]:{type:ye.error,error:tt(404,{pathname:G.path})}})})),O=await te,B=(await U).reduce((G,oe)=>Object.assign(G,oe),{});return await Promise.all([Jl(_,O,z.signal,Y,g.loaderData),Ql(_,B,A)]),{loaderResults:O,fetcherResults:B}}function et(){H=!0,ne.push(...xr()),fe.forEach((g,_)=>{Z.has(_)&&V.add(_),Ge(_)})}function Oe(g,_,S){S===void 0&&(S={}),v.fetchers.set(g,_),xe({fetchers:new Map(v.fetchers)},{flushSync:(S&&S.flushSync)===!0})}function Ee(g,_,S,A){A===void 0&&(A={});let z=Ht(v.matches,_);at(g),xe({errors:{[z.route.id]:S},fetchers:new Map(v.fetchers)},{flushSync:(A&&A.flushSync)===!0})}function ot(g){return h.v7_fetcherPersist&&(Ae.set(g,(Ae.get(g)||0)+1),be.has(g)&&be.delete(g)),v.fetchers.get(g)||Il}function at(g){let _=v.fetchers.get(g);Z.has(g)&&!(_&&_.state==="loading"&&ie.has(g))&&Ge(g),fe.delete(g),ie.delete(g),ee.delete(g),be.delete(g),V.delete(g),v.fetchers.delete(g)}function Et(g){if(h.v7_fetcherPersist){let _=(Ae.get(g)||0)-1;_<=0?(Ae.delete(g),be.add(g)):Ae.set(g,_)}else at(g);xe({fetchers:new Map(v.fetchers)})}function Ge(g){let _=Z.get(g);_&&(_.abort(),Z.delete(g))}function bt(g){for(let _ of g){let S=ot(_),A=kt(S.data);v.fetchers.set(_,A)}}function xt(){let g=[],_=!1;for(let S of ee){let A=v.fetchers.get(S);ce(A,"Expected fetcher: "+S),A.state==="loading"&&(ee.delete(S),g.push(S),_=!0)}return bt(g),_}function pe(g){let _=[];for(let[S,A]of ie)if(A<g){let z=v.fetchers.get(S);ce(z,"Expected fetcher: "+S),z.state==="loading"&&(Ge(S),ie.delete(S),_.push(S))}return bt(_),_.length>0}function Ln(g,_){let S=v.blockers.get(g)||Tr;return se.get(g)!==_&&se.set(g,_),S}function Hr(g){v.blockers.delete(g),se.delete(g)}function St(g,_){let S=v.blockers.get(g)||Tr;ce(S.state==="unblocked"&&_.state==="blocked"||S.state==="blocked"&&_.state==="blocked"||S.state==="blocked"&&_.state==="proceeding"||S.state==="blocked"&&_.state==="unblocked"||S.state==="proceeding"&&_.state==="unblocked","Invalid blocker state transition: "+S.state+" -> "+_.state);let A=new Map(v.blockers);A.set(g,_),xe({blockers:A})}function zt(g){let{currentLocation:_,nextLocation:S,historyAction:A}=g;if(se.size===0)return;se.size>1&&ur(!1,"A router only supports one blocker at a time");let z=Array.from(se.entries()),[Y,te]=z[z.length-1],U=v.blockers.get(Y);if(!(U&&U.state==="proceeding")&&te({currentLocation:_,nextLocation:S,historyAction:A}))return Y}function br(g){let _=tt(404,{pathname:g}),S=a||o,{matches:A,route:z}=ys(S);return xr(),{notFoundMatches:A,route:z,error:_}}function xr(g){let _=[];return re.forEach((S,A)=>{(!g||g(A))&&(S.cancel(),_.push(A),re.delete(A))}),_}function er(g,_,S){if(y=g,x=_,b=S||null,!C&&v.navigation===Un){C=!0;let A=In(v.location,v.matches);A!=null&&xe({restoreScrollPosition:A})}return()=>{y=null,x=null,b=null}}function _r(g,_){return b&&b(g,_.map(A=>dl(A,v.loaderData)))||g.key}function Zi(g,_){if(y&&x){let S=_r(g,_);y[S]=x()}}function In(g,_){if(y){let S=_r(g,_),A=y[S];if(typeof A=="number")return A}return null}function Cr(g,_,S){if(d)if(g){if(Object.keys(g[0].params).length>0)return{active:!0,matches:an(_,S,l,!0)}}else return{active:!0,matches:an(_,S,l,!0)||[]};return{active:!1,matches:null}}async function Er(g,_,S){if(!d)return{type:"success",matches:g};let A=g;for(;;){let z=a==null,Y=a||o,te=s;try{await d({path:_,matches:A,patch:(B,G)=>{S.aborted||hs(B,G,Y,te,i)}})}catch(B){return{type:"error",error:B,partialMatches:A}}finally{z&&!S.aborted&&(o=[...o])}if(S.aborted)return{type:"aborted"};let U=Ot(Y,_,l);if(U)return{type:"success",matches:U};let O=an(Y,_,l,!0);if(!O||A.length===O.length&&A.every((B,G)=>B.route.id===O[G].route.id))return{type:"success",matches:null};A=O}}function jn(g){s={},a=fn(g,i,void 0,s)}function Wr(g,_){let S=a==null;hs(g,_,a||o,s,i),S&&(o=[...o],xe({}))}return P={get basename(){return l},get future(){return h},get state(){return v},get routes(){return o},get window(){return t},initialize:Dt,subscribe:ut,enableScrollRestoration:er,navigate:Je,fetch:wt,revalidate:Xe,createHref:g=>e.history.createHref(g),encodeLocation:g=>e.history.encodeLocation(g),getFetcher:ot,deleteFetcher:Et,dispose:Ct,getBlocker:Ln,deleteBlocker:Hr,patchRoutes:Wr,_internalFetchControllers:Z,_internalActiveDeferreds:re,_internalSetRoutes:jn},P}function zl(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Qn(e,t,r,n,i,s,o,a){let l,c;if(o){l=[];for(let h of t)if(l.push(h),h.route.id===o){c=h;break}}else l=t,c=t[t.length-1];let d=Rl(i||".",Ml(l,s),Nr(e.pathname,r)||e.pathname,a==="path");if(i==null&&(d.search=e.search,d.hash=e.hash),(i==null||i===""||i===".")&&c){let h=_i(d.search);if(c.route.index&&!h)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&h){let f=new URLSearchParams(d.search),p=f.getAll("index");f.delete("index"),p.filter(b=>b).forEach(b=>f.append("index",b));let y=f.toString();d.search=y?"?"+y:""}}return n&&r!=="/"&&(d.pathname=d.pathname==="/"?r:Gt([r,d.pathname])),jr(d)}function ls(e,t,r,n){if(!n||!zl(n))return{path:r};if(n.formMethod&&!Kl(n.formMethod))return{path:r,error:tt(405,{method:n.formMethod})};let i=()=>({path:r,error:tt(400,{type:"invalid-body"})}),s=n.formMethod||"get",o=e?s.toUpperCase():s.toLowerCase(),a=wo(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!ft(o))return i();let f=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((p,y)=>{let[b,x]=y;return""+p+b+"="+x+`
`},""):String(n.body);return{path:r,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:void 0,text:f}}}else if(n.formEncType==="application/json"){if(!ft(o))return i();try{let f=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}ce(typeof FormData=="function","FormData is not available in this environment");let l,c;if(n.formData)l=ti(n.formData),c=n.formData;else if(n.body instanceof FormData)l=ti(n.body),c=n.body;else if(n.body instanceof URLSearchParams)l=n.body,c=ms(l);else if(n.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(n.body),c=ms(l)}catch{return i()}let d={formMethod:o,formAction:a,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(ft(d.formMethod))return{path:r,submission:d};let h=It(r);return t&&h.search&&_i(h.search)&&l.append("index",""),h.search="?"+l,{path:jr(h),submission:d}}function us(e,t,r){r===void 0&&(r=!1);let n=e.findIndex(i=>i.route.id===t);return n>=0?e.slice(0,r?n+1:n):e}function cs(e,t,r,n,i,s,o,a,l,c,d,h,f,p,y,b){let x=b?nt(b[1])?b[1].error:b[1].data:void 0,C=e.createURL(t.location),w=e.createURL(i),M=r;s&&t.errors?M=us(r,Object.keys(t.errors)[0],!0):b&&nt(b[1])&&(M=us(r,b[0]));let R=b?b[1].statusCode:void 0,P=o&&R&&R>=400,v=M.filter((D,F)=>{let{route:$}=D;if($.lazy)return!0;if($.loader==null)return!1;if(s)return ei($,t.loaderData,t.errors);if(Bl(t.loaderData,t.matches[F],D)||l.some(j=>j===D.route.id))return!0;let N=t.matches[F],L=D;return ds(D,Me({currentUrl:C,currentParams:N.params,nextUrl:w,nextParams:L.params},n,{actionResult:x,actionStatus:R,defaultShouldRevalidate:P?!1:a||C.pathname+C.search===w.pathname+w.search||C.search!==w.search||vo(N,L)}))}),I=[];return h.forEach((D,F)=>{if(s||!r.some(H=>H.route.id===D.routeId)||d.has(F))return;let $=Ot(p,D.path,y);if(!$){I.push({key:F,routeId:D.routeId,path:D.path,matches:null,match:null,controller:null});return}let N=t.fetchers.get(F),L=$r($,D.path),j=!1;f.has(F)?j=!1:c.has(F)?(c.delete(F),j=!0):N&&N.state!=="idle"&&N.data===void 0?j=a:j=ds(L,Me({currentUrl:C,currentParams:t.matches[t.matches.length-1].params,nextUrl:w,nextParams:r[r.length-1].params},n,{actionResult:x,actionStatus:R,defaultShouldRevalidate:P?!1:a})),j&&I.push({key:F,routeId:D.routeId,path:D.path,matches:$,match:L,controller:new AbortController})}),[v,I]}function ei(e,t,r){if(e.lazy)return!0;if(!e.loader)return!1;let n=t!=null&&t[e.id]!==void 0,i=r!=null&&r[e.id]!==void 0;return!n&&i?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!n&&!i}function Bl(e,t,r){let n=!t||r.route.id!==t.route.id,i=e[r.route.id]===void 0;return n||i}function vo(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function ds(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}function hs(e,t,r,n,i){var s;let o;if(e){let c=n[e];ce(c,"No route found to patch children into: routeId = "+e),c.children||(c.children=[]),o=c.children}else o=r;let a=t.filter(c=>!o.some(d=>yo(c,d))),l=fn(a,i,[e||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],n);o.push(...l)}function yo(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((r,n)=>{var i;return(i=t.children)==null?void 0:i.some(s=>yo(r,s))}):!1}async function Vl(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let i=r[e.id];ce(i,"No route found in manifest");let s={};for(let o in n){let l=i[o]!==void 0&&o!=="hasErrorBoundary";ur(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!ul.has(o)&&(s[o]=n[o])}Object.assign(i,s),Object.assign(i,Me({},t(i),{lazy:void 0}))}async function Ul(e){let{matches:t}=e,r=t.filter(i=>i.shouldLoad);return(await Promise.all(r.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[r[o].route.id]:s}),{})}async function Ol(e,t,r,n,i,s,o,a,l,c){let d=s.map(p=>p.route.lazy?Vl(p.route,l,a):void 0),h=s.map((p,y)=>{let b=d[y],x=i.some(w=>w.route.id===p.route.id);return Me({},p,{shouldLoad:x,resolve:async w=>(w&&n.method==="GET"&&(p.route.lazy||p.route.loader)&&(x=!0),x?Hl(t,n,p,b,w,c):Promise.resolve({type:ye.data,result:void 0}))})}),f=await e({matches:h,request:n,params:s[0].params,fetcherKey:o,context:c});try{await Promise.all(d)}catch{}return f}async function Hl(e,t,r,n,i,s){let o,a,l=c=>{let d,h=new Promise((y,b)=>d=b);a=()=>d(),t.signal.addEventListener("abort",a);let f=y=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):c({request:t,params:r.params,context:s},...y!==void 0?[y]:[]),p=(async()=>{try{return{type:"data",result:await(i?i(b=>f(b)):f())}}catch(y){return{type:"error",result:y}}})();return Promise.race([p,h])};try{let c=r.route[e];if(n)if(c){let d,[h]=await Promise.all([l(c).catch(f=>{d=f}),n]);if(d!==void 0)throw d;o=h}else if(await n,c=r.route[e],c)o=await l(c);else if(e==="action"){let d=new URL(t.url),h=d.pathname+d.search;throw tt(405,{method:t.method,pathname:h,routeId:r.route.id})}else return{type:ye.data,result:void 0};else if(c)o=await l(c);else{let d=new URL(t.url),h=d.pathname+d.search;throw tt(404,{pathname:h})}ce(o.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:ye.error,result:c}}finally{a&&t.signal.removeEventListener("abort",a)}return o}async function Wl(e){let{result:t,type:r}=e;if(bo(t)){let c;try{let d=t.headers.get("Content-Type");d&&/\bapplication\/json\b/.test(d)?t.body==null?c=null:c=await t.json():c=await t.text()}catch(d){return{type:ye.error,error:d}}return r===ye.error?{type:ye.error,error:new mn(t.status,t.statusText,c),statusCode:t.status,headers:t.headers}:{type:ye.data,data:c,statusCode:t.status,headers:t.headers}}if(r===ye.error){if(ws(t)){var n;if(t.data instanceof Error){var i;return{type:ye.error,error:t.data,statusCode:(i=t.init)==null?void 0:i.status}}t=new mn(((n=t.init)==null?void 0:n.status)||500,void 0,t.data)}return{type:ye.error,error:t,statusCode:_n(t)?t.status:void 0}}if(Zl(t)){var s,o;return{type:ye.deferred,deferredData:t,statusCode:(s=t.init)==null?void 0:s.status,headers:((o=t.init)==null?void 0:o.headers)&&new Headers(t.init.headers)}}if(ws(t)){var a,l;return{type:ye.data,data:t.data,statusCode:(a=t.init)==null?void 0:a.status,headers:(l=t.init)!=null&&l.headers?new Headers(t.init.headers):void 0}}return{type:ye.data,data:t}}function ql(e,t,r,n,i,s){let o=e.headers.get("Location");if(ce(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!bi.test(o)){let a=n.slice(0,n.findIndex(l=>l.route.id===r)+1);o=Qn(new URL(t.url),a,i,!0,o,s),e.headers.set("Location",o)}return e}function fs(e,t,r){if(bi.test(e)){let n=e,i=n.startsWith("//")?new URL(t.protocol+n):new URL(n),s=Nr(i.pathname,r)!=null;if(i.origin===t.origin&&s)return i.pathname+i.search+i.hash}return e}function ir(e,t,r,n){let i=e.createURL(wo(t)).toString(),s={signal:r};if(n&&ft(n.formMethod)){let{formMethod:o,formEncType:a}=n;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(n.json)):a==="text/plain"?s.body=n.text:a==="application/x-www-form-urlencoded"&&n.formData?s.body=ti(n.formData):s.body=n.formData}return new Request(i,s)}function ti(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function ms(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function Yl(e,t,r,n,i){let s={},o=null,a,l=!1,c={},d=r&&nt(r[1])?r[1].error:void 0;return e.forEach(h=>{if(!(h.route.id in t))return;let f=h.route.id,p=t[f];if(ce(!qt(p),"Cannot handle redirect results in processLoaderData"),nt(p)){let y=p.error;d!==void 0&&(y=d,d=void 0),o=o||{};{let b=Ht(e,f);o[b.route.id]==null&&(o[b.route.id]=y)}s[f]=void 0,l||(l=!0,a=_n(p.error)?p.error.status:500),p.headers&&(c[f]=p.headers)}else $t(p)?(n.set(f,p.deferredData),s[f]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(c[f]=p.headers)):(s[f]=p.data,p.statusCode&&p.statusCode!==200&&!l&&(a=p.statusCode),p.headers&&(c[f]=p.headers))}),d!==void 0&&r&&(o={[r[0]]:d},s[r[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function ps(e,t,r,n,i,s,o){let{loaderData:a,errors:l}=Yl(t,r,n,o);return i.forEach(c=>{let{key:d,match:h,controller:f}=c,p=s[d];if(ce(p,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if(nt(p)){let y=Ht(e.matches,h?.route.id);l&&l[y.route.id]||(l=Me({},l,{[y.route.id]:p.error})),e.fetchers.delete(d)}else if(qt(p))ce(!1,"Unhandled fetcher revalidation redirect");else if($t(p))ce(!1,"Unhandled fetcher deferred data");else{let y=kt(p.data);e.fetchers.set(d,y)}}),{loaderData:a,errors:l}}function gs(e,t,r,n){let i=Me({},t);for(let s of r){let o=s.route.id;if(t.hasOwnProperty(o)?t[o]!==void 0&&(i[o]=t[o]):e[o]!==void 0&&s.route.loader&&(i[o]=e[o]),n&&n.hasOwnProperty(o))break}return i}function vs(e){return e?nt(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Ht(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function ys(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function tt(e,t){let{pathname:r,routeId:n,method:i,type:s,message:o}=t===void 0?{}:t,a="Unknown Server Error",l="Unknown @remix-run/router error";return e===400?(a="Bad Request",i&&r&&n?l="You made a "+i+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):e===403?(a="Forbidden",l='Route "'+n+'" does not match URL "'+r+'"'):e===404?(a="Not Found",l='No route matches URL "'+r+'"'):e===405&&(a="Method Not Allowed",i&&r&&n?l="You made a "+i.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new mn(e||500,a,new Error(l),!0)}function Zr(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[n,i]=t[r];if(qt(i))return{key:n,result:i}}}function wo(e){let t=typeof e=="string"?It(e):e;return jr(Me({},t,{hash:""}))}function Gl(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Xl(e){return bo(e.result)&&Fl.has(e.result.status)}function $t(e){return e.type===ye.deferred}function nt(e){return e.type===ye.error}function qt(e){return(e&&e.type)===ye.redirect}function ws(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function Zl(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function bo(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function Kl(e){return $l.has(e.toLowerCase())}function ft(e){return kl.has(e.toLowerCase())}async function Jl(e,t,r,n,i){let s=Object.entries(t);for(let o=0;o<s.length;o++){let[a,l]=s[o],c=e.find(f=>f?.route.id===a);if(!c)continue;let d=n.find(f=>f.route.id===c.route.id),h=d!=null&&!vo(d,c)&&(i&&i[c.route.id])!==void 0;$t(l)&&h&&await xi(l,r,!1).then(f=>{f&&(t[a]=f)})}}async function Ql(e,t,r){for(let n=0;n<r.length;n++){let{key:i,routeId:s,controller:o}=r[n],a=t[i];e.find(c=>c?.route.id===s)&&$t(a)&&(ce(o,"Expected an AbortController for revalidating fetcher deferred result"),await xi(a,o.signal,!0).then(c=>{c&&(t[i]=c)}))}}async function xi(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:ye.data,data:e.deferredData.unwrappedData}}catch(i){return{type:ye.error,error:i}}return{type:ye.data,data:e.deferredData.data}}}function _i(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function $r(e,t){let r=typeof t=="string"?It(t).search:t.search;if(e[e.length-1].route.index&&_i(r||""))return e[e.length-1];let n=mo(e);return n[n.length-1]}function bs(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:s,json:o}=e;if(!(!t||!r||!n)){if(i!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:t,formAction:r,formEncType:n,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:o,text:void 0}}}function On(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function eu(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Pr(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function tu(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function kt(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function ru(e,t){try{let r=e.sessionStorage.getItem(go);if(r){let n=JSON.parse(r);for(let[i,s]of Object.entries(n||{}))s&&Array.isArray(s)&&t.set(i,new Set(s||[]))}}catch{}}function nu(e,t){if(t.size>0){let r={};for(let[n,i]of t)r[n]=[...i];try{e.sessionStorage.setItem(go,JSON.stringify(r))}catch(n){ur(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ri(){return ri=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ri.apply(this,arguments)}const xo=u.createContext(null),_o=u.createContext(null),Co=u.createContext(null),Ci=u.createContext(null),Cn=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Eo=u.createContext(null);function Ei(){return u.useContext(Ci)!=null}function iu(){return Ei()||ce(!1),u.useContext(Ci).location}function su(e,t,r,n){Ei()||ce(!1);let{navigator:i}=u.useContext(Co),{matches:s}=u.useContext(Cn),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=iu(),d;d=c;let h=d.pathname||"/",f=h;if(l!=="/"){let b=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let p=Ot(e,{pathname:f});return cu(p&&p.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:Gt([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:Gt([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,r,n)}function ou(){let e=mu(),t=_n(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),r?u.createElement("pre",{style:i},r):null,null)}const au=u.createElement(ou,null);class lu extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?u.createElement(Cn.Provider,{value:this.props.routeContext},u.createElement(Eo.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uu(e){let{routeContext:t,match:r,children:n}=e,i=u.useContext(xo);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),u.createElement(Cn.Provider,{value:t},n)}function cu(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var s;if(!r)return null;if(r.errors)e=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,a=(i=r)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&a?.[h.route.id]!==void 0);d>=0||ce(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=r,y=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,y=!1,b=null,x=null;r&&(p=a&&h.route.id?a[h.route.id]:void 0,b=h.route.errorElement||au,l&&(c<0&&f===0?(y=!0,x=null):c===f&&(y=!0,x=h.route.hydrateFallbackElement||null)));let C=t.concat(o.slice(0,f+1)),w=()=>{let M;return p?M=b:y?M=x:h.route.Component?M=u.createElement(h.route.Component,null):h.route.element?M=h.route.element:M=d,u.createElement(uu,{match:h,routeContext:{outlet:d,matches:C,isDataRoute:r!=null},children:M})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?u.createElement(lu,{location:r.location,revalidation:r.revalidation,component:b,error:p,children:w(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):w()},null)}var ni=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ni||{});function du(e){let t=u.useContext(_o);return t||ce(!1),t}function hu(e){let t=u.useContext(Cn);return t||ce(!1),t}function fu(e){let t=hu(),r=t.matches[t.matches.length-1];return r.route.id||ce(!1),r.route.id}function mu(){var e;let t=u.useContext(Eo),r=du(ni.UseRouteError),n=fu(ni.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}const xs={};function pu(e,t){xs[t]||(xs[t]=!0,console.warn(t))}const sr=(e,t,r)=>pu(e,"⚠️ React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+r+"."));function gu(e,t){e!=null&&e.v7_startTransition||sr("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&(!t||!t.v7_relativeSplatPath)&&sr("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),t&&(t.v7_fetcherPersist||sr("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),t.v7_normalizeFormMethod||sr("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),t.v7_partialHydration||sr("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),t.v7_skipActionErrorRevalidation||sr("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function vu(e){let{basename:t="/",children:r=null,location:n,navigationType:i=Ne.Pop,navigator:s,static:o=!1,future:a}=e;Ei()&&ce(!1);let l=t.replace(/^\/*/,"/"),c=u.useMemo(()=>({basename:l,navigator:s,static:o,future:ri({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof n=="string"&&(n=It(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:y="default"}=n,b=u.useMemo(()=>{let x=Nr(d,l);return x==null?null:{location:{pathname:x,search:h,hash:f,state:p,key:y},navigationType:i}},[l,d,h,f,p,y,i]);return b==null?null:u.createElement(Co.Provider,{value:c},u.createElement(Ci.Provider,{children:r,value:b}))}new Promise(()=>{});function yu(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:u.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:u.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:u.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pn(){return pn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pn.apply(this,arguments)}const wu="6";try{window.__reactRouterVersion=wu}catch{}function bu(e,t){return Nl({basename:void 0,future:pn({},void 0,{v7_prependBasename:!0}),history:ol({window:void 0}),hydrationData:xu(),routes:e,mapRouteProperties:yu,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function xu(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=pn({},t,{errors:_u(t.errors)})),t}function _u(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&i.__type==="RouteErrorResponse")r[n]=new mn(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",r[n]=o}catch{}}if(r[n]==null){let s=new Error(i.message);s.stack="",r[n]=s}}else r[n]=i;return r}const Cu=u.createContext({isTransitioning:!1}),Eu=u.createContext(new Map),Su="startTransition",_s=ja[Su],Mu="flushSync",Cs=Na[Mu];function Ru(e){_s?_s(e):e()}function Dr(e){Cs?Cs(e):e()}class Tu{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}}function Pu(e){let{fallbackElement:t,router:r,future:n}=e,[i,s]=u.useState(r.state),[o,a]=u.useState(),[l,c]=u.useState({isTransitioning:!1}),[d,h]=u.useState(),[f,p]=u.useState(),[y,b]=u.useState(),x=u.useRef(new Map),{v7_startTransition:C}=n||{},w=u.useCallback(D=>{C?Ru(D):D()},[C]),M=u.useCallback((D,F)=>{let{deletedFetchers:$,flushSync:N,viewTransitionOpts:L}=F;$.forEach(H=>x.current.delete(H)),D.fetchers.forEach((H,ne)=>{H.data!==void 0&&x.current.set(ne,H.data)});let j=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!L||j){N?Dr(()=>s(D)):w(()=>s(D));return}if(N){Dr(()=>{f&&(d&&d.resolve(),f.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:L.currentLocation,nextLocation:L.nextLocation})});let H=r.window.document.startViewTransition(()=>{Dr(()=>s(D))});H.finished.finally(()=>{Dr(()=>{h(void 0),p(void 0),a(void 0),c({isTransitioning:!1})})}),Dr(()=>p(H));return}f?(d&&d.resolve(),f.skipTransition(),b({state:D,currentLocation:L.currentLocation,nextLocation:L.nextLocation})):(a(D),c({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}))},[r.window,f,d,x,w]);u.useLayoutEffect(()=>r.subscribe(M),[r,M]),u.useEffect(()=>{l.isTransitioning&&!l.flushSync&&h(new Tu)},[l]),u.useEffect(()=>{if(d&&o&&r.window){let D=o,F=d.promise,$=r.window.document.startViewTransition(async()=>{w(()=>s(D)),await F});$.finished.finally(()=>{h(void 0),p(void 0),a(void 0),c({isTransitioning:!1})}),p($)}},[w,o,d,r.window]),u.useEffect(()=>{d&&o&&i.location.key===o.location.key&&d.resolve()},[d,f,i.location,o]),u.useEffect(()=>{!l.isTransitioning&&y&&(a(y.state),c({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),b(void 0))},[l.isTransitioning,y]),u.useEffect(()=>{},[]);let R=u.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:D=>r.navigate(D),push:(D,F,$)=>r.navigate(D,{state:F,preventScrollReset:$?.preventScrollReset}),replace:(D,F,$)=>r.navigate(D,{replace:!0,state:F,preventScrollReset:$?.preventScrollReset})}),[r]),P=r.basename||"/",v=u.useMemo(()=>({router:r,navigator:R,static:!1,basename:P}),[r,R,P]),I=u.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return u.useEffect(()=>gu(n,r.future),[n,r.future]),u.createElement(u.Fragment,null,u.createElement(xo.Provider,{value:v},u.createElement(_o.Provider,{value:i},u.createElement(Eu.Provider,{value:x.current},u.createElement(Cu.Provider,{value:l},u.createElement(vu,{basename:P,location:i.location,navigationType:i.historyAction,navigator:R,future:I},i.initialized||r.future.v7_partialHydration?u.createElement(Du,{routes:r.routes,future:r.future,state:i}):t))))),null)}const Du=u.memo(ku);function ku(e){let{routes:t,future:r,state:n}=e;return su(t,void 0,n,r)}var Es;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Es||(Es={}));var Ss;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ss||(Ss={}));const Au=()=>m.jsx("div",{className:"loading-overlay",style:{position:"fixed",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",zIndex:9999,opacity:0,animation:"fadeIn 0.3s ease forwards"},children:m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem"},children:[m.jsx("div",{className:"spinner",style:{width:"48px",height:"48px",border:"2px solid rgba(158, 207, 208, 0.3)",borderRadius:"50%",borderTopColor:"rgba(158, 207, 208, 0.8)",position:"relative",boxShadow:"0 0 20px rgba(158, 207, 208, 0.2)",animation:"spin 1s linear infinite"}}),m.jsx("div",{className:"loading-text",style:{color:"rgba(255, 255, 255, 0.9)",fontSize:"0.9rem",fontFamily:"var(--font-display)",fontWeight:"200",letterSpacing:"0.15em",textTransform:"lowercase",opacity:0,transform:"translateY(10px)",animation:"slideUp 0.5s ease 0.2s forwards"},children:"Initializing"}),m.jsx("div",{style:{position:"absolute",bottom:"3rem",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"0.75rem"},children:[0,1,2].map(e=>m.jsx("div",{className:"loading-dot",style:{width:"4px",height:"4px",borderRadius:"50%",background:"rgba(158, 207, 208, 0.8)",boxShadow:"0 0 10px rgba(158, 207, 208, 0.4)",animation:`pulse 1.2s ease-in-out ${e*.2}s infinite`}},e))})]})});let So=class extends J.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){this.setState({error:t,errorInfo:r}),console.error("Error caught by boundary:",t,r)}render(){return this.state.hasError?m.jsxs(Gr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",background:"var(--background)",color:"var(--text)",textAlign:"center"},children:[m.jsx(Gr.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},style:{fontSize:"clamp(2rem, 5vw, 3rem)",marginBottom:"1rem",background:"linear-gradient(135deg, var(--text) 0%, var(--glow) 100%)",WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent"},children:"Something went wrong"}),m.jsx(Gr.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},style:{fontSize:"1.125rem",maxWidth:"600px",marginBottom:"2rem",opacity:.8},children:"We're working on fixing this. Try refreshing the page or come back later."}),m.jsx(Gr.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},onClick:()=>window.location.reload(),style:{padding:"0.75rem 1.5rem",background:"var(--accent)",border:"none",borderRadius:"4px",color:"var(--text)",cursor:"pointer",fontSize:"1rem",transition:"transform 0.2s ease"},whileHover:{scale:1.05},whileTap:{scale:.95},children:"Refresh Page"}),!1]}):this.props.children}};const $u=({sections:e,currentSection:t,onNavigate:r})=>m.jsx(Pe.nav,{className:"fixed-navigation",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.5},children:m.jsx("div",{className:"nav-indicators",children:e.map(n=>m.jsxs(Pe.button,{className:`nav-item ${t===n.id?"active":""}`,onClick:()=>r(n.id),initial:{opacity:.7},animate:{opacity:1},transition:{duration:.3},children:[m.jsx(Pe.div,{className:"nav-dot",initial:{scale:.8},animate:{scale:t===n.id?1:.8,backgroundColor:t===n.id?"var(--accent)":"transparent"},transition:{duration:.3}}),m.jsx(Pe.span,{className:"nav-label",initial:{opacity:0},animate:{opacity:t===n.id?1:.6,color:t===n.id?"var(--accent)":"var(--text)"},whileHover:{opacity:1},transition:{duration:.2},children:n.label})]},n.id))})}),kr=({children:e,className:t,style:r})=>{const n=u.useRef(null),i=Ji(0),s=Ji(0),o=zn(0,{stiffness:300,damping:30}),a=zn(0,{stiffness:300,damping:30}),l=zn(1,{stiffness:300,damping:30}),c=$a`radial-gradient(circle at ${i}px ${s}px, var(--glow) 0%, transparent 70%)`;return u.useEffect(()=>{if(!n.current)return;const d=n.current;let h=!1;const f=b=>{const x=d.getBoundingClientRect(),C=b.clientX-x.left,w=b.clientY-x.top;if(i.set(C),s.set(w),h){const M=(w-x.height/2)/x.height*-20,R=(C-x.width/2)/x.width*20;o.set(M),a.set(R)}},p=()=>{h=!0,l.set(1.02)},y=()=>{h=!1,i.set(d.offsetWidth/2),s.set(d.offsetHeight/2),o.set(0),a.set(0),l.set(1)};return d.addEventListener("mousemove",f,{passive:!0}),d.addEventListener("mouseenter",p,{passive:!0}),d.addEventListener("mouseleave",y,{passive:!0}),i.set(d.offsetWidth/2),s.set(d.offsetHeight/2),()=>{d.removeEventListener("mousemove",f),d.removeEventListener("mouseenter",p),d.removeEventListener("mouseleave",y)}},[i,s,o,a,l]),m.jsxs(Pe.div,{ref:n,className:`card-interaction ${t||""}`,style:{...r,position:"relative",transformStyle:"preserve-3d",transformOrigin:"center center",willChange:"transform",isolation:"isolate",background:"rgba(0, 0, 0, 0.2)",backdropFilter:"blur(10px)",borderRadius:"12px",border:"1px solid rgba(122, 158, 159, 0.1)",padding:"2rem",overflow:"hidden",scale:l,rotateX:o,rotateY:a,z:0},children:[m.jsx(Pe.div,{className:"card-glow",style:{position:"absolute",inset:-1,background:c,opacity:.15,pointerEvents:"none",borderRadius:"inherit",zIndex:0,mixBlendMode:"screen"}}),m.jsx(Pe.div,{className:"pattern-overlay",style:{position:"absolute",inset:0,backgroundImage:"linear-gradient(45deg, rgba(122, 158, 159, 0.05) 25%, transparent 25%)",backgroundSize:"3px 3px",opacity:.1,pointerEvents:"none",borderRadius:"inherit",zIndex:0}}),m.jsx(Pe.div,{style:{position:"relative",zIndex:1,transform:"translateZ(20px)",transformStyle:"preserve-3d"},children:e})]})},Mo=Math.sqrt(5),Fu=(Mo-1)/4,We=(5-Mo)/20,Kr=e=>Math.floor(e)|0,Jr=new Float64Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]);function Si(e=Math.random){const t=Lu(e),r=new Float64Array(t).map(o=>Jr[o%32*4]),n=new Float64Array(t).map(o=>Jr[o%32*4+1]),i=new Float64Array(t).map(o=>Jr[o%32*4+2]),s=new Float64Array(t).map(o=>Jr[o%32*4+3]);return function(a,l,c,d){let h,f,p,y,b;const x=(a+l+c+d)*Fu,C=Kr(a+x),w=Kr(l+x),M=Kr(c+x),R=Kr(d+x),P=(C+w+M+R)*We,v=C-P,I=w-P,D=M-P,F=R-P,$=a-v,N=l-I,L=c-D,j=d-F;let H=0,ne=0,V=0,Z=0;$>N?H++:ne++,$>L?H++:V++,$>j?H++:Z++,N>L?ne++:V++,N>j?ne++:Z++,L>j?V++:Z++;const ge=H>=3?1:0,X=ne>=3?1:0,ie=V>=3?1:0,ee=Z>=3?1:0,fe=H>=2?1:0,Ae=ne>=2?1:0,be=V>=2?1:0,re=Z>=2?1:0,se=H>=1?1:0,$e=ne>=1?1:0,Dt=V>=1?1:0,Ct=Z>=1?1:0,ut=$-ge+We,xe=N-X+We,W=L-ie+We,Je=j-ee+We,Xe=$-fe+2*We,Fe=N-Ae+2*We,vt=L-be+2*We,ze=j-re+2*We,Le=$-se+3*We,yt=N-$e+3*We,wt=L-Dt+3*We,ct=j-Ct+3*We,dt=$-1+4*We,Be=N-1+4*We,Qe=L-1+4*We,st=j-1+4*We,et=C&255,Oe=w&255,Ee=M&255,ot=R&255;let at=.6-$*$-N*N-L*L-j*j;if(at<0)h=0;else{const pe=et+t[Oe+t[Ee+t[ot]]];at*=at,h=at*at*(r[pe]*$+n[pe]*N+i[pe]*L+s[pe]*j)}let Et=.6-ut*ut-xe*xe-W*W-Je*Je;if(Et<0)f=0;else{const pe=et+ge+t[Oe+X+t[Ee+ie+t[ot+ee]]];Et*=Et,f=Et*Et*(r[pe]*ut+n[pe]*xe+i[pe]*W+s[pe]*Je)}let Ge=.6-Xe*Xe-Fe*Fe-vt*vt-ze*ze;if(Ge<0)p=0;else{const pe=et+fe+t[Oe+Ae+t[Ee+be+t[ot+re]]];Ge*=Ge,p=Ge*Ge*(r[pe]*Xe+n[pe]*Fe+i[pe]*vt+s[pe]*ze)}let bt=.6-Le*Le-yt*yt-wt*wt-ct*ct;if(bt<0)y=0;else{const pe=et+se+t[Oe+$e+t[Ee+Dt+t[ot+Ct]]];bt*=bt,y=bt*bt*(r[pe]*Le+n[pe]*yt+i[pe]*wt+s[pe]*ct)}let xt=.6-dt*dt-Be*Be-Qe*Qe-st*st;if(xt<0)b=0;else{const pe=et+1+t[Oe+1+t[Ee+1+t[ot+1]]];xt*=xt,b=xt*xt*(r[pe]*dt+n[pe]*Be+i[pe]*Qe+s[pe]*st)}return 27*(h+f+p+y+b)}}function Lu(e){const r=new Uint8Array(512);for(let n=0;n<512/2;n++)r[n]=n;for(let n=0;n<512/2-1;n++){const i=n+~~(e()*(256-n)),s=r[n];r[n]=r[i],r[i]=s}for(let n=256;n<512;n++)r[n]=r[n-256];return r}class Ro{constructor(){this.noise4D=Si(),this.group=new za,this.particles=[],this.numParticles=2e3,this.bounds={minX:-50,maxX:50,minY:-50,maxY:50,minZ:-50,maxZ:50},this.currentSection="hero",this.init()}init(){const t=new ao,r=new Float32Array(this.numParticles*3),n=new Float32Array(this.numParticles*3),i=new Float32Array(this.numParticles*3),s=new Float32Array(this.numParticles);for(let a=0;a<this.numParticles;a++){const l=a*3;r[l]=(Math.random()-.5)*100,r[l+1]=(Math.random()-.5)*100,r[l+2]=(Math.random()-.5)*100,n[l]=0,n[l+1]=0,n[l+2]=0;const c=new Xt;c.setHSL(.5+Math.random()*.2,.75,.6),i[l]=c.r,i[l+1]=c.g,i[l+2]=c.b,s[a]=Math.random()*.5+.5}t.setAttribute("position",new Xr(r,3)),t.setAttribute("velocity",new Xr(n,3)),t.setAttribute("color",new Xr(i,3)),t.setAttribute("size",new Xr(s,1));const o=new Ba({size:.4,vertexColors:!0,transparent:!0,opacity:.8,blending:lo,sizeAttenuation:!0,depthWrite:!1});this.points=new Va(t,o),this.group.add(this.points)}updateSection(t){switch(this.currentSection=t,t){case"hero":this.points.material.size=.4,this.points.material.opacity=.8,this.bounds={minX:-75,maxX:75,minY:-75,maxY:75,minZ:-75,maxZ:75};break;case"vision-solutions":this.points.material.size=.6,this.points.material.opacity=.9,this.bounds={minX:-100,maxX:100,minY:-100,maxY:100,minZ:-100,maxZ:100};break;case"manifesto":this.points.material.size=.3,this.points.material.opacity=.7,this.bounds={minX:-150,maxX:150,minY:-150,maxY:150,minZ:-150,maxZ:150};break}}update(t){const r=this.points.geometry.attributes.position,n=this.points.geometry.attributes.velocity,i=this.points.geometry.attributes.color,s=this.points.geometry.attributes.size;for(let o=0;o<this.numParticles;o++){const a=o*3,l=r.array[a],c=r.array[a+1],d=r.array[a+2];let h=.02;switch(this.currentSection){case"hero":h=.025;break;case"vision-solutions":h=.015;break;case"manifesto":h=.03;break}const f=this.noise4D(l*h,c*h,d*h,t*.5)*2,p=this.noise4D(l*h+100,c*h+100,d*h+100,t*.5)*2,y=this.noise4D(l*h+200,c*h+200,d*h+200,t*.5)*2;let b=.15,x=.95;switch(this.currentSection){case"hero":b=.15,x=.95;break;case"vision-solutions":b=.2,x=.9;break;case"manifesto":b=.12,x=.98;break}n.array[a]=n.array[a]*x+f*b,n.array[a+1]=n.array[a+1]*x+p*b,n.array[a+2]=n.array[a+2]*x+y*b;const C=2;n.array[a]=Bn.clamp(n.array[a],-C,C),n.array[a+1]=Bn.clamp(n.array[a+1],-C,C),n.array[a+2]=Bn.clamp(n.array[a+2],-C,C),r.array[a]+=n.array[a],r.array[a+1]+=n.array[a+1],r.array[a+2]+=n.array[a+2];const w=(Math.sin(t*2+o*.1)+1)*.25+.5;if(s.array[o]=s.array[o]*.95+w*.05,r.array[a]<this.bounds.minX||r.array[a]>this.bounds.maxX||r.array[a+1]<this.bounds.minY||r.array[a+1]>this.bounds.maxY||r.array[a+2]<this.bounds.minZ||r.array[a+2]>this.bounds.maxZ){r.array[a]=(Math.random()-.5)*(this.bounds.maxX-this.bounds.minX),r.array[a+1]=(Math.random()-.5)*(this.bounds.maxY-this.bounds.minY),r.array[a+2]=(Math.random()-.5)*(this.bounds.maxZ-this.bounds.minZ),n.array[a]=0,n.array[a+1]=0,n.array[a+2]=0;const M=new Xt;switch(this.currentSection){case"hero":M.setHSL(.5+Math.random()*.2,.8,.6);break;case"vision-solutions":M.setHSL(.6+Math.random()*.2,.85,.7);break;case"manifesto":M.setHSL(.4+Math.random()*.2,.75,.5);break}i.array[a]=M.r,i.array[a+1]=M.g,i.array[a+2]=M.b}}r.needsUpdate=!0,n.needsUpdate=!0,i.needsUpdate=!0,s.needsUpdate=!0}dispose(){this.points&&(this.points.geometry.dispose(),this.points.material.dispose()),this.group.clear()}}var Ms=(e,t,r)=>new Promise((n,i)=>{var s=l=>{try{a(r.next(l))}catch(c){i(c)}},o=l=>{try{a(r.throw(l))}catch(c){i(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);a((r=r.apply(e,t)).next())}),ae=class{static add(e,t){if(typeof t=="number")for(let r=0,n=e.length;r<n;r++)e[r]+=t;else for(let r=0,n=e.length;r<n;r++)e[r]+=t[r]||0;return e}static subtract(e,t){if(typeof t=="number")for(let r=0,n=e.length;r<n;r++)e[r]-=t;else for(let r=0,n=e.length;r<n;r++)e[r]-=t[r]||0;return e}static multiply(e,t){if(typeof t=="number")for(let r=0,n=e.length;r<n;r++)e[r]*=t;else{if(e.length!=t.length)throw new Error(`Cannot do element-wise multiply since the array lengths don't match: ${e.toString()} multiply-with ${t.toString()}`);for(let r=0,n=e.length;r<n;r++)e[r]*=t[r]}return e}static divide(e,t){if(typeof t=="number"){if(t===0)throw new Error("Cannot divide by zero");for(let r=0,n=e.length;r<n;r++)e[r]/=t}else{if(e.length!=t.length)throw new Error(`Cannot do element-wise divide since the array lengths don't match. ${e.toString()} divide-by ${t.toString()}`);for(let r=0,n=e.length;r<n;r++)e[r]/=t[r]}return e}static dot(e,t){if(e.length!=t.length)throw new Error("Array lengths don't match");let r=0;for(let n=0,i=e.length;n<i;n++)r+=e[n]*t[n];return r}static cross2D(e,t){return e[0]*t[1]-e[1]*t[0]}static cross(e,t){return new E(e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0])}static magnitude(e){return Math.sqrt(ae.dot(e,e))}static unit(e,t=void 0){let r=t===void 0?ae.magnitude(e):t;return r===0?E.make(e.length):ae.divide(e,r)}static abs(e){return ae.map(e,Math.abs)}static floor(e){return ae.map(e,Math.floor)}static ceil(e){return ae.map(e,Math.ceil)}static round(e){return ae.map(e,Math.round)}static max(e){let t=Number.MIN_VALUE,r=0;for(let n=0,i=e.length;n<i;n++)t=Math.max(t,e[n]),t===e[n]&&(r=n);return{value:t,index:r}}static min(e){let t=Number.MAX_VALUE,r=0;for(let n=0,i=e.length;n<i;n++)t=Math.min(t,e[n]),t===e[n]&&(r=n);return{value:t,index:r}}static sum(e){let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r];return t}static map(e,t){for(let r=0,n=e.length;r<n;r++)e[r]=t(e[r],r,e);return e}},le=class{constructor(){this.reset()}get value(){return this._33}get domMatrix(){return new DOMMatrix(le.toDOMMatrix(this._33))}reset(){this._33=le.scale2DMatrix(1,1)}scale2D(e,t=[0,0]){const r=le.scaleAt2DMatrix(e[0]||1,e[1]||1,t);return this._33=le.multiply(this._33,r),this}rotate2D(e,t=[0,0]){const r=le.rotateAt2DMatrix(Math.cos(e),Math.sin(e),t);return this._33=le.multiply(this._33,r),this}translate2D(e){const t=le.translate2DMatrix(e[0]||0,e[1]||0);return this._33=le.multiply(this._33,t),this}shear2D(e,t=[0,0]){const r=le.shearAt2DMatrix(Math.tan(e[0]||0),Math.tan(e[1]||1),t);return this._33=le.multiply(this._33,r),this}static add(e,t){if(typeof t!="number"){if(e[0].length!=t[0].length)throw new Error("Cannot add matrix if rows' and columns' size don't match.");if(e.length!=t.length)throw new Error("Cannot add matrix if rows' and columns' size don't match.")}let r=new k,n=typeof t=="number";for(let i=0,s=e.length;i<s;i++)r.push(e[i].$add(n?t:t[i]));return r}static multiply(e,t,r=!1,n=!1){let i=new k;if(typeof t!="number")if(n){if(e.length!=t.length)throw new Error("Cannot multiply matrix element-wise because the matrices' sizes don't match.");for(let s=0,o=e.length;s<o;s++)i.push(e[s].$multiply(t[s]))}else{if(!r&&e[0].length!=t.length)throw new Error("Cannot multiply matrix if rows in matrix-a don't match columns in matrix-b.");if(r&&e[0].length!=t[0].length)throw new Error("Cannot multiply matrix if transposed and the columns in both matrices don't match.");r||(t=le.transpose(t));for(let s=0,o=e.length;s<o;s++){let a=E.make(t.length,0);for(let l=0,c=t.length;l<c;l++)a[l]=ae.dot(e[s],t[l]);i.push(a)}}else for(let s=0,o=e.length;s<o;s++)i.push(e[s].$multiply(t));return i}static zipSlice(e,t,r=!1){let n=[];for(let i=0,s=e.length;i<s;i++){if(e[i].length-1<t&&r===!1)throw`Index ${t} is out of bounds`;n.push(e[i][t]||r)}return new E(n)}static zip(e,t=!1,r=!1){let n=new k,i=r?e.reduce((s,o)=>Math.max(s,o.length),0):e[0].length;for(let s=0;s<i;s++)n.push(le.zipSlice(e,s,t));return n}static transpose(e,t=!1,r=!1){return le.zip(e,t,r)}static toDOMMatrix(e){return[e[0][0],e[0][1],e[1][0],e[1][1],e[2][0],e[2][1]]}static transform2D(e,t){let r=e[0]*t[0][0]+e[1]*t[1][0]+t[2][0],n=e[0]*t[0][1]+e[1]*t[1][1]+t[2][1];return new E(r,n)}static scale2DMatrix(e,t){return new k(new E(e,0,0),new E(0,t,0),new E(0,0,1))}static rotate2DMatrix(e,t){return new k(new E(e,t,0),new E(-t,e,0),new E(0,0,1))}static shear2DMatrix(e,t){return new k(new E(1,e,0),new E(t,1,0),new E(0,0,1))}static translate2DMatrix(e,t){return new k(new E(1,0,0),new E(0,1,0),new E(e,t,1))}static scaleAt2DMatrix(e,t,r){let n=le.scale2DMatrix(e,t);return n[2][0]=-r[0]*e+r[0],n[2][1]=-r[1]*t+r[1],n}static rotateAt2DMatrix(e,t,r){let n=le.rotate2DMatrix(e,t);return n[2][0]=r[0]*(1-e)+r[1]*t,n[2][1]=r[1]*(1-e)-r[0]*t,n}static shearAt2DMatrix(e,t,r){let n=le.shear2DMatrix(e,t);return n[2][0]=-r[1]*t,n[2][1]=-r[0]*e,n}static reflectAt2DMatrix(e,t){let r=Te.intercept(e,t);if(r==null)return[new E([-1,0,0]),new E([0,1,0]),new E([e[0]+t[0],0,1])];{let n=r.yi,i=Math.atan(r.slope)*2,s=Math.cos(i),o=Math.sin(i);return[new E([s,o,0]),new E([o,-s,0]),new E([-n*o,n+n*s,1])]}}},Ft=(e,t="expected")=>T.warn("Group's length is less than "+t,e),Iu=(e,t="")=>T.warn(`Index ${t} is out of bound in Group`,e),Te=class{static fromAngle(e,t,r){let n=new k(new E(e),new E(e));return n[1].toAngle(t,r,!0),n}static slope(e,t){return t[0]-e[0]===0?void 0:(t[1]-e[1])/(t[0]-e[0])}static intercept(e,t){if(t[0]-e[0]!==0){let r=(t[1]-e[1])/(t[0]-e[0]),n=e[1]-r*e[0];return{slope:r,yi:n,xi:r===0?void 0:-n/r}}}static sideOfPt2D(e,t){let r=T.iterToArray(e);return(r[1][0]-r[0][0])*(t[1]-r[0][1])-(t[0]-r[0][0])*(r[1][1]-r[0][1])}static collinear(e,t,r,n=.01){let i=new E(0,0,0).to(e).$subtract(t),s=new E(0,0,0).to(e).$subtract(r);return i.$cross(s).divide(1e3).equals(new E(0,0,0),n)}static magnitude(e){let t=T.iterToArray(e);return t.length>=2?t[1].$subtract(t[0]).magnitude():0}static magnitudeSq(e){let t=T.iterToArray(e);return t.length>=2?t[1].$subtract(t[0]).magnitudeSq():0}static perpendicularFromPt(e,t,r=!1){let n=T.iterToArray(e);if(n[0].equals(n[1]))return;let i=n[0].$subtract(n[1]),s=n[1].$subtract(t),o=s.$subtract(i.$project(s));return r?o:o.$add(t)}static distanceFromPt(e,t){let r=T.iterToArray(e),n=Te.perpendicularFromPt(r,t,!0);return n?n.magnitude():r[0].$subtract(t).magnitude()}static intersectRay2D(e,t){let r=T.iterToArray(e),n=T.iterToArray(t),i=Te.intercept(r[0],r[1]),s=Te.intercept(n[0],n[1]),o=r[0],a=n[0];if(i==null){if(s==null)return;let l=-s.slope*(a[0]-o[0])+a[1];return new E(o[0],l)}else if(s==null){let l=-i.slope*(o[0]-a[0])+o[1];return new E(a[0],l)}else if(s.slope!=i.slope){let l=(i.slope*o[0]-s.slope*a[0]+a[1]-o[1])/(i.slope-s.slope),c=i.slope*(l-o[0])+o[1];return new E(l,c)}else return i.yi==s.yi?new E(o[0],o[1]):void 0}static intersectLine2D(e,t){let r=T.iterToArray(e),n=T.iterToArray(t),i=Te.intersectRay2D(r,n);return i&&Q.withinBound(i,r[0],r[1])&&Q.withinBound(i,n[0],n[1])?i:void 0}static intersectLineWithRay2D(e,t){let r=T.iterToArray(e),n=T.iterToArray(t),i=Te.intersectRay2D(r,n);return i&&Q.withinBound(i,r[0],r[1])?i:void 0}static intersectPolygon2D(e,t,r=!1){let n=T.iterToArray(e),i=T.iterToArray(t),s=r?Te.intersectLineWithRay2D:Te.intersectLine2D,o=new k;for(let a=0,l=i.length;a<l;a++){let c=a===l-1?0:a+1,d=s([i[a],i[c]],n);d&&o.push(d)}return o.length>0?o:void 0}static intersectLines2D(e,t,r=!1){let n=new k,i=r?Te.intersectLineWithRay2D:Te.intersectLine2D;for(let s of e)for(let o of t){let a=i(s,o);a&&n.push(a)}return n}static intersectGridWithRay2D(e,t){let r=T.iterToArray(e),n=Te.intercept(new E(r[0]).subtract(t),new E(r[1]).subtract(t)),i=new k;return n&&n.xi&&i.push(new E(t[0]+n.xi,t[1])),n&&n.yi&&i.push(new E(t[0],t[1]+n.yi)),i}static intersectGridWithLine2D(e,t){let r=T.iterToArray(e),n=Te.intersectGridWithRay2D(r,t),i=new k;for(let s=0,o=n.length;s<o;s++)Q.withinBound(n[s],r[0],r[1])&&i.push(n[s]);return i}static intersectRect2D(e,t){let r=T.iterToArray(e),n=T.iterToArray(t),i=Q.boundingBox(k.fromPtArray(r));return ve.hasIntersectRect2D(i,n)?Te.intersectLines2D([r],ve.sides(n)):new k}static subpoints(e,t){let r=T.iterToArray(e),n=new k;for(let i=1;i<=t;i++)n.push(Q.interpolate(r[0],r[1],i/(t+1)));return n}static crop(e,t,r=0,n=!0){let i=T.iterToArray(e),o=i[r===0?1:0].$subtract(i[r]);if(o[0]===0||t[0]===0)return i[r];if(n){let a=o.unit().multiply(t[1]);return i[r].$add(a)}else{let a=ve.fromCenter(i[r],t),l=ve.sides(a),c=0;return Math.abs(o[1]/o[0])>Math.abs(t[1]/t[0])?c=o[1]<0?0:2:c=o[0]<0?3:1,Te.intersectRay2D(l[c],i)}}static marker(e,t,r="arrow",n=!0){let i=T.iterToArray(e),s=n?0:1,o=n?1:0,a=i[s].$subtract(i[o]);if(a.magnitudeSq()===0)return new k;a.unit();let l=Q.perpendicular(a).multiply(t[0]).add(i[o]);return r=="arrow"?(l.add(a.$multiply(t[1])),new k(i[o],l[0],l[1])):new k(l[0],l[1])}static toRect(e){let t=T.iterToArray(e);return new k(t[0].$min(t[1]),t[0].$max(t[1]))}},ve=class{static from(e,t,r){return ve.fromTopLeft(e,t,r)}static fromTopLeft(e,t,r){let n=typeof t=="number"?[t,r||t]:t;return new k(new E(e),new E(e).add(n))}static fromCenter(e,t,r){let n=typeof t=="number"?[t/2,(r||t)/2]:new E(t).divide(2);return new k(new E(e).subtract(n),new E(e).add(n))}static toCircle(e,t=!0){return Lt.fromRect(e,t)}static toSquare(e,t=!1){let r=T.iterToArray(e),n=ve.size(r),i=t?n.maxValue().value:n.minValue().value;return ve.fromCenter(ve.center(r),i,i)}static size(e){let t=T.iterToArray(e);return t[0].$max(t[1]).subtract(t[0].$min(t[1]))}static center(e){let t=T.iterToArray(e),r=t[0].$min(t[1]),n=t[0].$max(t[1]);return r.add(n.$subtract(r).divide(2))}static corners(e){let t=T.iterToArray(e),r=t[0].$min(t[1]),n=t[0].$max(t[1]);return new k(r,new E(n.x,r.y),n,new E(r.x,n.y))}static sides(e){let[t,r,n,i]=ve.corners(e);return[new k(t,r),new k(r,n),new k(n,i),new k(i,t)]}static boundingBox(e){let t=T.iterToArray(e),r=T.flatten(t,!1),n=E.make(2,Number.MAX_VALUE),i=E.make(2,Number.MIN_VALUE);for(let s=0,o=r.length;s<o;s++){let a=0;for(let l of r[s])if(n[a]=Math.min(n[a],l[a]),i[a]=Math.max(i[a],l[a]),++a>=2)break}return new k(n,i)}static polygon(e){return ve.corners(e)}static quadrants(e,t){let r=T.iterToArray(e),n=ve.corners(r),i=t!=null?new E(t):ve.center(r);return n.map(s=>new k(s,i).boundingBox())}static halves(e,t=.5,r=!1){let n=T.iterToArray(e),i=n[0].$min(n[1]),s=n[0].$max(n[1]),o=r?Ce.lerp(i[1],s[1],t):Ce.lerp(i[0],s[0],t);return r?[new k(i,new E(s[0],o)),new k(new E(i[0],o),s)]:[new k(i,new E(o,s[1])),new k(new E(o,i[1]),s)]}static withinBound(e,t){let r=T.iterToArray(e);return Q.withinBound(t,r[0],r[1])}static hasIntersectRect2D(e,t,r=!1){let n=T.iterToArray(e),i=T.iterToArray(t);return r&&(n=Q.boundingBox(n),i=Q.boundingBox(i)),!(n[0][0]>i[1][0]||i[0][0]>n[1][0]||n[0][1]>i[1][1]||i[0][1]>n[1][1])}static intersectRect2D(e,t){let r=T.iterToArray(e),n=T.iterToArray(t);return ve.hasIntersectRect2D(r,n)?Te.intersectLines2D(ve.sides(r),ve.sides(n)):new k}},Lt=class{static fromRect(e,t=!1){let r=T.iterToArray(e),n=0,i=n=ve.size(r).minValue().value/2;if(t){let s=ve.size(r).maxValue().value/2;n=Math.sqrt(i*i+s*s)}else n=i;return new k(ve.center(r),new E(n,n))}static fromTriangle(e,t=!1){return t?mt.circumcircle(e):mt.incircle(e)}static fromCenter(e,t){return new k(new E(e),new E(t,t))}static withinBound(e,t,r=0){let n=T.iterToArray(e),i=n[0].$subtract(t);return i.dot(i)+r<n[1].x*n[1].x}static intersectRay2D(e,t){let r=T.iterToArray(e),n=T.iterToArray(t),i=n[0].$subtract(n[1]),s=r[0].$subtract(n[0]),o=i.dot(i),a=s.dot(i),l=s.dot(s)-r[1].x*r[1].x,c=a/o,d=l/o,h=c*c-d;if(h<0)return new k;{let f=Math.sqrt(h),p=-c+f,y=n[0].$subtract(i.$multiply(p));if(h===0)return new k(y);let b=-c-f,x=n[0].$subtract(i.$multiply(b));return new k(y,x)}}static intersectLine2D(e,t){let r=T.iterToArray(e),n=T.iterToArray(t),i=Lt.intersectRay2D(r,n),s=new k;if(i.length>0)for(let o=0,a=i.length;o<a;o++)ve.withinBound(n,i[o])&&s.push(i[o]);return s}static intersectCircle2D(e,t){let r=T.iterToArray(e),n=T.iterToArray(t),i=n[0].$subtract(r[0]),s=i.magnitudeSq(),o=Math.sqrt(s),a=r[1].x,l=n[1].x,c=a*a,d=l*l;if(o>a+l)return new k;if(o<Math.abs(a-l))return new k(r[0].clone());{let h=(c-d+s)/(2*o),f=Math.sqrt(c-h*h),p=i.$multiply(h/o).add(r[0]);return new k(new E(p.x+f*i.y/o,p.y-f*i.x/o),new E(p.x-f*i.y/o,p.y+f*i.x/o))}}static intersectRect2D(e,t){let r=T.iterToArray(e),n=T.iterToArray(t),i=ve.sides(n),s=[];for(let o=0,a=i.length;o<a;o++){let l=Lt.intersectLine2D(r,i[o]);l.length>0&&s.push(l)}return T.flatten(s)}static toRect(e,t=!1){let r=T.iterToArray(e),n=r[1][0];if(t){let i=Math.sqrt(n*n)/2;return new k(r[0].$subtract(i),r[0].$add(i))}else return new k(r[0].$subtract(n),r[0].$add(n))}static toTriangle(e,t=!0){let r=T.iterToArray(e);if(t){let n=-Math.PI/2,i=Math.PI*2/3,s=new k;for(let o=0;o<3;o++)s.push(r[0].clone().toAngle(n,r[1][0],!0)),n+=i;return s}else return mt.fromCenter(r[0],r[1][0])}},mt=class{static fromRect(e){let t=T.iterToArray(e),r=t[0].$add(t[1]).divide(2);r.y=t[0][1];let n=t[1].clone();return n.x=t[0][0],new k(r,t[1].clone(),n)}static fromCircle(e){return Lt.toTriangle(e,!0)}static fromCenter(e,t){return mt.fromCircle(Lt.fromCenter(e,t))}static medial(e){let t=T.iterToArray(e);return t.length<3?Ft(new k,3):je.midpoints(t,!0)}static oppositeSide(e,t){let r=T.iterToArray(e);return r.length<3?Ft(new k,3):t===0?k.fromPtArray([r[1],r[2]]):t===1?k.fromPtArray([r[0],r[2]]):k.fromPtArray([r[0],r[1]])}static altitude(e,t){let r=T.iterToArray(e),n=mt.oppositeSide(r,t);return n.length>1?new k(r[t],Te.perpendicularFromPt(n,r[t])):new k}static orthocenter(e){let t=T.iterToArray(e);if(t.length<3)return Ft(void 0,3);let r=mt.altitude(t,0),n=mt.altitude(t,1);return Te.intersectRay2D(r,n)}static incenter(e){let t=T.iterToArray(e);if(t.length<3)return Ft(void 0,3);let r=je.bisector(t,0).add(t[0]),n=je.bisector(t,1).add(t[1]);return Te.intersectRay2D(new k(t[0],r),new k(t[1],n))}static incircle(e,t){let r=T.iterToArray(e),n=t||mt.incenter(r),i=je.area(r),s=je.perimeter(r,!0),o=2*i/s.total;return Lt.fromCenter(n,o)}static circumcenter(e){let t=T.iterToArray(e),r=mt.medial(t),n=[r[0],Q.perpendicular(t[0].$subtract(r[0])).p1.$add(r[0])],i=[r[1],Q.perpendicular(t[1].$subtract(r[1])).p1.$add(r[1])];return Te.intersectRay2D(n,i)}static circumcircle(e,t){let r=T.iterToArray(e),n=t||mt.circumcenter(r),i=r[0].$subtract(n).magnitude();return Lt.fromCenter(n,i)}},je=class{static centroid(e){return Q.centroid(e)}static rectangle(e,t,r){return ve.corners(ve.fromCenter(e,t,r))}static fromCenter(e,t,r){let n=new k;for(let i=0;i<r;i++){let s=Math.PI*2*i/r;n.push(new E(Math.cos(s)*t,Math.sin(s)*t).add(e))}return n}static lineAt(e,t){let r=T.iterToArray(e);if(t<0||t>=r.length)throw new Error("index out of the Polygon's range");return new k(r[t],t===r.length-1?r[0]:r[t+1])}static lines(e,t=!0){let r=T.iterToArray(e);if(r.length<2)return Ft(new k,2);let n=T.split(r,2,1);return t&&n.push(new k(r[r.length-1],r[0])),n.map(i=>i)}static midpoints(e,t=!1,r=.5){return je.lines(e,t).map(s=>Q.interpolate(s[0],s[1],r))}static adjacentSides(e,t,r=!1){let n=T.iterToArray(e);if(n.length<2)return Ft(new k,2);if(t<0||t>=n.length)return Iu(new k,t);let i=[],s=t-1;r&&s<0&&(s=n.length-1),s>=0&&i.push(new k(n[t],n[s]));let o=t+1;return r&&o>n.length-1&&(o=0),o<=n.length-1&&i.push(new k(n[t],n[o])),i}static bisector(e,t){let r=je.adjacentSides(e,t,!0);if(r.length>=2){let n=r[0][1].$subtract(r[0][0]).unit(),i=r[1][1].$subtract(r[1][0]).unit();return n.add(i).divide(2)}else return}static perimeter(e,t=!1){let r=je.lines(e,t),n=0,i=E.make(r.length,0);for(let s=0,o=r.length;s<o;s++){let a=Te.magnitude(r[s]);n+=a,i[s]=a}return{total:n,segments:i}}static area(e){let t=T.iterToArray(e);if(t.length<3)return Ft(new k,3);let r=(i,s)=>i[0]*s[1]-i[1]*s[0],n=0;for(let i=0,s=t.length;i<s;i++)i<t.length-1?n+=r(t[i],t[i+1]):n+=r(t[i],t[0]);return Math.abs(n/2)}static convexHull(e,t=!1){let r=T.iterToArray(e);if(r.length<3)return Ft(new k,3);t||(r=r.slice(),r.sort((l,c)=>l[0]-c[0]));let n=(l,c,d)=>(c[0]-l[0])*(d[1]-l[1])-(d[0]-l[0])*(c[1]-l[1])>0,i=[],s=r.length-2,o=s+3;i[s]=r[2],i[o]=r[2],n(r[0],r[1],r[2])?(i[s+1]=r[0],i[s+2]=r[1]):(i[s+1]=r[1],i[s+2]=r[0]);for(let l=3,c=r.length;l<c;l++){let d=r[l];if(!(n(i[s],i[s+1],d)&&n(i[o-1],i[o],d))){for(;!n(i[s],i[s+1],d);)s+=1;for(s-=1,i[s]=d;!n(i[o-1],i[o],d);)o-=1;o+=1,i[o]=d}}let a=new k;for(let l=0;l<o-s;l++)a.push(i[s+l]);return a}static network(e,t=0){let r=T.iterToArray(e),n=[];for(let i=0,s=r.length;i<s;i++)i!=t&&n.push(new k(r[t],r[i]));return n}static nearestPt(e,t){let r=Number.MAX_VALUE,n=-1,i=0;for(let s of e){let o=s.$subtract(t).magnitudeSq();o<r&&(r=o,n=i),i++}return n}static projectAxis(e,t){let r=T.iterToArray(e),n=t.dot(r[0]),i=new E(n,n);for(let s=1,o=r.length;s<o;s++)n=t.dot(r[s]),i=new E(Math.min(n,i[0]),Math.max(n,i[1]));return i}static _axisOverlap(e,t,r){let n=je.projectAxis(e,r),i=je.projectAxis(t,r);return n[0]<i[0]?i[0]-n[1]:n[0]-i[1]}static hasIntersectPoint(e,t){let r=T.iterToArray(e),n=!1;for(let i=0,s=r.length;i<s;i++){let o=je.lineAt(r,i);o[0][1]>t[1]!=o[1][1]>t[1]&&t[0]<(o[1][0]-o[0][0])*(t[1]-o[0][1])/(o[1][1]-o[0][1])+o[0][0]&&(n=!n)}return n}static hasIntersectCircle(e,t){let r=T.iterToArray(e),n=T.iterToArray(t),i={which:-1,dist:0,normal:null,edge:null,vertex:null},s=n[0],o=n[1][0],a=Number.MAX_SAFE_INTEGER;for(let c=0,d=r.length;c<d;c++){let h=je.lineAt(r,c),f=new E(h[0].y-h[1].y,h[1].x-h[0].x).unit(),p=new k(s.$add(f.$multiply(o)),s.$subtract(f.$multiply(o))),y=je._axisOverlap(r,p,f);if(y>0)return null;Math.abs(y)<a&&(ve.withinBound(h,Te.perpendicularFromPt(h,s))||Lt.intersectLine2D(t,h).length>0)&&(i.edge=h,i.normal=f,a=Math.abs(y),i.which=c)}return i.edge?(s.$subtract(je.centroid(r)).dot(i.normal)<0&&i.normal.multiply(-1),i.dist=a,i.vertex=s,i):null}static hasIntersectPolygon(e,t){let r=T.iterToArray(e),n=T.iterToArray(t),i={which:-1,dist:0,normal:new E,edge:new k,vertex:new E},s=Number.MAX_SAFE_INTEGER;for(let f=0,p=r.length+n.length;f<p;f++){let y=f<r.length?je.lineAt(r,f):je.lineAt(n,f-r.length),b=new E(y[0].y-y[1].y,y[1].x-y[0].x).unit(),x=je._axisOverlap(r,n,b);if(x>0)return null;Math.abs(x)<s&&(i.edge=y,i.normal=b,s=Math.abs(x),i.which=f<r.length?0:1)}i.dist=s;let o=i.which===0?n:r,a=i.which===0?r:n,l=je.centroid(o),c=je.centroid(a);l.$subtract(c).dot(i.normal)<0&&i.normal.multiply(-1);let h=Number.MAX_SAFE_INTEGER;for(let f=0,p=o.length;f<p;f++){let y=i.normal.dot(o[f].$subtract(c));y<h&&(h=y,i.vertex=o[f])}return i}static intersectPolygon2D(e,t){let r=T.iterToArray(e),n=T.iterToArray(t),i=je.lines(r),s=[];for(let o=0,a=i.length;o<a;o++){let l=Te.intersectPolygon2D(i[o],n,!1);l&&s.push(l)}return T.flatten(s,!0)}static toRects(e){let t=[];for(let n of e)t.push(Q.boundingBox(n));let r=T.flatten(t,!1);return t.unshift(Q.boundingBox(r)),t}},Se=class{static getSteps(e){let t=new k;for(let r=0;r<=e;r++){let n=r/e;t.push(new E(n*n*n,n*n,n,1))}return t}static controlPoints(e,t=0,r=!1){let n=T.iterToArray(e);if(t>n.length-1)return new k;let i=o=>o<n.length-1?o:n.length-1,s=n[t];return t=r?t:t+1,new k(s,n[i(t++)],n[i(t++)],n[i(t++)])}static _calcPt(e,t){let r=e.reduce((i,s,o)=>i+s.x*t[o],0),n=e.reduce((i,s,o)=>i+s.y*t[o],0);if(e[0].length>2){let i=e.reduce((s,o,a)=>s+o.z*t[a],0);return new E(r,n,i)}return new E(r,n)}static catmullRom(e,t=10){let r=T.iterToArray(e);if(r.length<2)return new k;let n=new k,i=Se.getSteps(t),s=Se.controlPoints(r,0,!0);for(let a=0;a<=t;a++)n.push(Se.catmullRomStep(i[a],s));let o=0;for(;o<r.length-2;){let a=Se.controlPoints(r,o);if(a.length>0){for(let l=0;l<=t;l++)n.push(Se.catmullRomStep(i[l],a));o++}}return n}static catmullRomStep(e,t){let r=new k(new E(-.5,1,-.5,0),new E(1.5,-2.5,0,1),new E(-1.5,2,.5,0),new E(.5,-.5,0,0));return Se._calcPt(t,le.multiply([e],r,!0)[0])}static cardinal(e,t=10,r=.5){let n=T.iterToArray(e);if(n.length<2)return new k;let i=new k,s=Se.getSteps(t),o=Se.controlPoints(n,0,!0);for(let l=0;l<=t;l++)i.push(Se.cardinalStep(s[l],o,r));let a=0;for(;a<n.length-2;){let l=Se.controlPoints(n,a);if(l.length>0){for(let c=0;c<=t;c++)i.push(Se.cardinalStep(s[c],l,r));a++}}return i}static cardinalStep(e,t,r=.5){let n=new k(new E(-1,2,-1,0),new E(-1,1,0,0),new E(1,-2,1,0),new E(1,-1,0,0)),i=le.multiply([e],n,!0)[0].multiply(r),s=2*e[0]-3*e[1]+1,o=-2*e[0]+3*e[1],a=Se._calcPt(t,i);return a.x+=s*t[1].x+o*t[2].x,a.y+=s*t[1].y+o*t[2].y,a.length>2&&(a.z+=s*t[1].z+o*t[2].z),a}static bezier(e,t=10){let r=T.iterToArray(e);if(r.length<4)return new k;let n=new k,i=Se.getSteps(t),s=0;for(;s<r.length-3;){let o=Se.controlPoints(r,s);if(o.length>0){for(let a=0;a<=t;a++)n.push(Se.bezierStep(i[a],o));s+=3}}return n}static bezierStep(e,t){let r=new k(new E(-1,3,-3,1),new E(3,-6,3,0),new E(-3,3,0,0),new E(1,0,0,0));return Se._calcPt(t,le.multiply([e],r,!0)[0])}static bspline(e,t=10,r=1){let n=T.iterToArray(e);if(n.length<2)return new k;let i=new k,s=Se.getSteps(t),o=0;for(;o<n.length-3;){let a=Se.controlPoints(n,o);if(a.length>0){if(r!==1)for(let l=0;l<=t;l++)i.push(Se.bsplineTensionStep(s[l],a,r));else for(let l=0;l<=t;l++)i.push(Se.bsplineStep(s[l],a));o++}}return i}static bsplineStep(e,t){let r=new k(new E(-.16666666666666666,.5,-.5,.16666666666666666),new E(.5,-1,0,.6666666666666666),new E(-.5,.5,.5,.16666666666666666),new E(.16666666666666666,0,0,0));return Se._calcPt(t,le.multiply([e],r,!0)[0])}static bsplineTensionStep(e,t,r=1){let n=new k(new E(-.16666666666666666,.5,-.5,.16666666666666666),new E(-1.5,2,0,-.3333333333333333),new E(1.5,-2.5,.5,.16666666666666666),new E(.16666666666666666,0,0,0)),i=le.multiply([e],n,!0)[0].multiply(r),s=2*e[0]-3*e[1]+1,o=-2*e[0]+3*e[1],a=Se._calcPt(t,i);return a.x+=s*t[1].x+o*t[2].x,a.y+=s*t[1].y+o*t[2].y,a.length>2&&(a.z+=s*t[1].z+o*t[2].z),a}};function ju(){var e=4022871197,t=function(r){if(r){r=r.toString();for(var n=0;n<r.length;n++){e+=r.charCodeAt(n);var i=.02519603282416938*e;e=i>>>0,i-=e,i*=e,e=i>>>0,i-=e,e+=i*4294967296}return(e>>>0)*23283064365386963e-26}else e=4022871197};return t}function Nu(e){var t=48,r=1,n=t,i=new Array(t),s,o,a=0,l=ju();for(s=0;s<t;s++)i[s]=l(Math.random().toString());function c(){for(l(),s=0;s<t;s++)i[s]=l(" ");r=1,n=t}function d(f){return f=f.replace(/(^\s*)|(\s*$)/gi,""),f=f.replace(/[\x00-\x1F]/gi,""),f=f.replace(/\n /,`
`),f}function h(f){for(f=d(f),l(f),s=0;s<f.length;s++)for(a=f.charCodeAt(s),o=0;o<t;o++)i[o]-=l(a.toString()),i[o]<0&&(i[o]+=1)}return c(),h(e),{random(){++n>=t&&(n=0);var f=1768863*i[n]+r*23283064365386963e-26;return i[n]=f-(r=f|0)}}}var Ce=class{static equals(e,t,r=1e-5){return Math.abs(e-t)<r}static lerp(e,t,r){return(1-r)*e+r*t}static clamp(e,t,r){return Math.max(t,Math.min(r,e))}static boundValue(e,t,r){let n=Math.abs(r-t),i=e%n;return i>r?i-=n:i<t&&(i+=n),i}static within(e,t,r){return e>=Math.min(t,r)&&e<=Math.max(t,r)}static randomRange(e,t=0){let r=e>t?e-t:t-e;return e+Ce.random()*r}static randomPt(e,t){let r=new E(e.length),n=t?ae.subtract(t.slice(),e):e,i=t?e:new E(e.length).fill(0);for(let s=0,o=r.length;s<o;s++)r[s]=Ce.random()*n[s]+i[s];return r}static normalizeValue(e,t,r){let n=Math.min(t,r),i=Math.max(t,r);return(e-n)/(i-n)}static sum(e){let t=T.iterToArray(e),r=new E(t[0]);for(let n=1,i=t.length;n<i;n++)ae.add(r,t[n]);return r}static average(e){let t=T.iterToArray(e);return Ce.sum(t).divide(t.length)}static cycle(e,t=ln.sineInOut){return t(e>.5?2-e*2:e*2)}static mapToRange(e,t,r,n,i){if(t==r)throw new Error("[currMin, currMax] must define a range that is not zero");let s=Math.min(n,i),o=Math.max(n,i);return Ce.normalizeValue(e,t,r)*(o-s)+s}static seed(e){this.generator=Nu(e)}static random(){return this.generator?this.generator.random():Math.random()}},Q=class{static boundAngle(e){return Ce.boundValue(e,0,360)}static boundRadian(e){return Ce.boundValue(e,0,we.two_pi)}static toRadian(e){return e*we.deg_to_rad}static toDegree(e){return e*we.rad_to_deg}static boundingBox(e){let t,r;for(let n of e)t==null?(t=n.clone(),r=n.clone()):(t=t.$min(n),r=r.$max(n));return new k(t,r)}static centroid(e){return Ce.average(e)}static anchor(e,t=0,r="to"){let n=r=="to"?"subtract":"add",i=0;for(let s of e)typeof t=="number"?t!==i&&s[n](e[t]):s[n](t),i++}static interpolate(e,t,r=.5){let n=Math.min(e.length,t.length),i=E.make(n);for(let s=0;s<n;s++)i[s]=e[s]*(1-r)+t[s]*r;return i}static perpendicular(e,t=we.xy){let r=t[1],n=t[0],i=new E(e),s=new E(i);s[n]=-i[r],s[r]=i[n];let o=new E(i);return o[n]=i[r],o[r]=-i[n],new k(s,o)}static isPerpendicular(e,t){return new E(e).dot(t)===0}static withinBound(e,t,r){for(let n=0,i=Math.min(e.length,t.length,r.length);n<i;n++)if(!Ce.within(e[n],t[n],r[n]))return!1;return!0}static sortEdges(e){let t=T.iterToArray(e),r=Q.boundingBox(t),n=r[1].add(r[0]).divide(2),i=(s,o)=>{if(s.length<2||o.length<2)throw new Error("Pt dimension cannot be less than 2");let a=s.$subtract(n),l=o.$subtract(n);if(a[0]>=0&&l[0]<0)return 1;if(a[0]<0&&l[0]>=0)return-1;if(a[0]==0&&l[0]==0)return a[1]>=0||l[1]>=0?a[1]>l[1]?1:-1:l[1]>a[1]?1:-1;let c=a.$cross2D(l);return c<0?1:c>0?-1:a[0]*a[0]+a[1]*a[1]>l[0]*l[0]+l[1]*l[1]?1:-1};return t.sort(i)}static scale(e,t,r){let n=T.iterToArray(e[0]!==void 0&&typeof e[0]=="number"?[e]:e),i=typeof t=="number"?E.make(n[0].length,t):t;r||(r=E.make(n[0].length,0));for(let s=0,o=n.length;s<o;s++){let a=n[s];for(let l=0,c=a.length;l<c;l++)a[l]=r&&r[l]?r[l]+(a[l]-r[l])*i[l]:a[l]*i[l]}return Q}static rotate2D(e,t,r,n){let i=T.iterToArray(e[0]!==void 0&&typeof e[0]=="number"?[e]:e),s=r?le.rotateAt2DMatrix:le.rotate2DMatrix;r||(r=E.make(i[0].length,0));let o=Math.cos(t),a=Math.sin(t);for(let l=0,c=i.length;l<c;l++){let d=n?i[l].$take(n):i[l];if(d.to(le.transform2D(d,s(o,a,r))),n)for(let h=0;h<n.length;h++)i[l][n[h]]=d[h]}return Q}static shear2D(e,t,r,n){let i=T.iterToArray(e[0]!==void 0&&typeof e[0]=="number"?[e]:e),s=typeof t=="number"?[t,t]:t;r||(r=E.make(i[0].length,0));let o=r?le.shearAt2DMatrix:le.shear2DMatrix,a=Math.tan(s[0]),l=Math.tan(s[1]);for(let c=0,d=i.length;c<d;c++){let h=n?i[c].$take(n):i[c];if(h.to(le.transform2D(h,o(a,l,r))),n)for(let f=0;f<n.length;f++)i[c][n[f]]=h[f]}return Q}static reflect2D(e,t,r){let n=T.iterToArray(e[0]!==void 0&&typeof e[0]=="number"?[e]:e),i=T.iterToArray(t),s=le.reflectAt2DMatrix(i[0],i[1]);for(let o=0,a=n.length;o<a;o++){let l=r?n[o].$take(r):n[o];if(l.to(le.transform2D(l,s)),r)for(let c=0;c<r.length;c++)n[o][r[c]]=l[c]}return Q}static cosTable(){let e=new Float64Array(360);for(let r=0;r<360;r++)e[r]=Math.cos(r*Math.PI/180);return{table:e,cos:r=>e[Math.floor(Q.boundAngle(Q.toDegree(r)))]}}static sinTable(){let e=new Float64Array(360);for(let r=0;r<360;r++)e[r]=Math.sin(r*Math.PI/180);return{table:e,sin:r=>e[Math.floor(Q.boundAngle(Q.toDegree(r)))]}}},ln=class{static linear(e,t=1){return t*e}static quadraticIn(e,t=1){return t*e*e}static quadraticOut(e,t=1){return-t*e*(e-2)}static quadraticInOut(e,t=1){let r=e*2;return e<.5?t/2*e*e*4:-t/2*((r-1)*(r-3)-1)}static cubicIn(e,t=1){return t*e*e*e}static cubicOut(e,t=1){let r=e-1;return t*(r*r*r+1)}static cubicInOut(e,t=1){let r=e*2;return e<.5?t/2*r*r*r:t/2*((r-2)*(r-2)*(r-2)+2)}static exponentialIn(e,t=1,r=.25){return t*Math.pow(e,1/r)}static exponentialOut(e,t=1,r=.25){return t*Math.pow(e,r)}static sineIn(e,t=1){return-t*Math.cos(e*we.half_pi)+t}static sineOut(e,t=1){return t*Math.sin(e*we.half_pi)}static sineInOut(e,t=1){return-t/2*(Math.cos(Math.PI*e)-1)}static cosineApprox(e,t=1){let r=e*e,n=r*r,i=n*r;return t*(4*i/9-17*n/9+22*r/9)}static circularIn(e,t=1){return-t*(Math.sqrt(1-e*e)-1)}static circularOut(e,t=1){let r=e-1;return t*Math.sqrt(1-r*r)}static circularInOut(e,t=1){let r=e*2;return e<.5?-t/2*(Math.sqrt(1-r*r)-1):t/2*(Math.sqrt(1-(r-2)*(r-2))+1)}static elasticIn(e,t=1,r=.7){let n=e-1,i=r/we.two_pi*1.5707963267948966;return t*(-Math.pow(2,10*n)*Math.sin((n-i)*we.two_pi/r))}static elasticOut(e,t=1,r=.7){let n=r/we.two_pi*1.5707963267948966;return t*(Math.pow(2,-10*e)*Math.sin((e-n)*we.two_pi/r))+t}static elasticInOut(e,t=1,r=.6){let n=e*2,i=r/we.two_pi*1.5707963267948966;return e<.5?(n-=1,t*(-.5*(Math.pow(2,10*n)*Math.sin((n-i)*we.two_pi/r)))):(n-=1,t*(.5*(Math.pow(2,-10*n)*Math.sin((n-i)*we.two_pi/r)))+t)}static bounceIn(e,t=1){return t-ln.bounceOut(1-e,t)}static bounceOut(e,t=1){return e<1/2.75?t*(7.5625*e*e):e<2/2.75?(e-=1.5/2.75,t*(7.5625*e*e+.75)):e<2.5/2.75?(e-=2.25/2.75,t*(7.5625*e*e+.9375)):(e-=2.625/2.75,t*(7.5625*e*e+.984375))}static bounceInOut(e,t=1){return e<.5?ln.bounceIn(e*2,t)/2:ln.bounceOut(e*2-1,t)/2+t/2}static sigmoid(e,t=1,r=10){let n=r*(e-.5);return t/(1+Math.exp(-n))}static logSigmoid(e,t=1,r=.7){r=Math.max(we.epsilon,Math.min(1-we.epsilon,r)),r=1/(1-r);let n=1/(1+Math.exp((e-.5)*r*-2)),i=1/(1+Math.exp(r)),s=1/(1+Math.exp(-r));return t*(n-i)/(s-i)}static seat(e,t=1,r=.5){return e<.5?t*Math.pow(2*e,1-r)/2:t*(1-Math.pow(2*(1-e),1-r)/2)}static quadraticBezier(e,t=1,r=[.05,.95]){let n=typeof r!="number"?r[0]:r,i=typeof r!="number"?r[1]:.5,s=1-2*n;s===0&&(s=we.epsilon);let o=(Math.sqrt(n*n+s*e)-n)/s;return t*((1-2*i)*(o*o)+2*i*o)}static cubicBezier(e,t=1,r=[.1,.7],n=[.9,.2]){let i=new k(new E(0,0),new E(r),new E(n),new E(1,1));return t*Se.bezierStep(new E(e*e*e,e*e,e,1),Se.controlPoints(i)).y}static quadraticTarget(e,t=1,r=[.2,.35]){let n=Math.min(1-we.epsilon,Math.max(we.epsilon,r[0])),i=Math.min(1,Math.max(0,r[1])),s=(1-i)/(1-n)-i/n,o=(s*(n*n)-i)/n,a=s*(e*e)-o*e;return t*Math.min(1,Math.max(0,a))}static cliff(e,t=1,r=.5){return e>r?t:0}static step(e,t,r,n,...i){let s=1/t,o=Math.floor(r/s)*s;return e(o,n,...i)}},we={xy:"xy",yz:"yz",xz:"xz",xyz:"xyz",horizontal:0,vertical:1,identical:0,right:4,bottom_right:5,bottom:6,bottom_left:7,left:8,top_left:1,top:2,top_right:3,epsilon:1e-4,max:Number.MAX_VALUE,min:Number.MIN_VALUE,pi:Math.PI,two_pi:6.283185307179586,half_pi:1.5707963267948966,quarter_pi:.7853981633974483,one_degree:.017453292519943295,rad_to_deg:57.29577951308232,deg_to_rad:.017453292519943295,gravity:9.81,newton:.10197,gaussian:.3989422804014327},Vt=class{static warnLevel(e){return e&&(Vt._warnLevel=e),Vt._warnLevel}static getArgs(e){if(e.length<1)return[];let t=[],r=Array.isArray(e[0])||ArrayBuffer.isView(e[0]);if(typeof e[0]=="number")t=Array.prototype.slice.call(e);else if(typeof e[0]=="object"&&!r){let n=["x","y","z","w"],i=e[0];for(let s=0;s<n.length&&!(i.length&&s>=i.length||!(n[s]in i));s++)t.push(i[n[s]])}else r&&(t=[].slice.call(e[0]));return t}static warn(e="error",t=void 0){if(Vt.warnLevel()=="error")throw new Error(e);return Vt.warnLevel()=="warn"&&console.warn(e),t}static randomInt(e,t=0){return Vt.warn("Util.randomInt is deprecated. Please use `Num.randomRange`"),Math.floor(Ce.random()*e)+t}static split(e,t,r,n=!1,i=!0){let s=[],o=[],a=r||t,l=0;if(e.length<=0||a<=0)return[];for(;l<e.length;){o=[];for(let c=0;c<t;c++)if(n)o.push(e[(l+c)%e.length]);else{if(l+c>=e.length)break;o.push(e[l+c])}l+=a,(!i||i&&o.length===t)&&s.push(o)}return s}static flatten(e,t=!0){let r=t?new k:new Array;return r.concat.apply(r,e)}static combine(e,t,r){let n=[];for(let i=0,s=e.length;i<s;i++)for(let o=0,a=t.length;o<a;o++)n.push(r(e[i],t[o]));return n}static zip(e){let t=[];for(let r=0,n=e[0].length;r<n;r++){let i=[];for(let s=0;s<e.length;s++)i.push(e[s][r]);t.push(i)}return t}static stepper(e,t=0,r=1,n){let i=t;return function(){return i+=r,i>=e&&(i=t+(i-e)),n&&n(i),i}}static forRange(e,t,r=0,n=1){let i=[];for(let s=r,o=t;s<o;s+=n)i[s]=e(s);return i}static load(e,t){var r=new XMLHttpRequest;r.open("GET",e,!0),r.onload=function(){r.status>=200&&r.status<400?t(r.responseText,!0):t(`Server error (${r.status}) when loading "${e}"`,!1)},r.onerror=function(){t("Unknown network error",!1)},r.send()}static download(e,t="pts_canvas_image",r="png",n=1){const i=r==="jpg"?"jpeg":r;e.element.toBlob(function(s){const o=document.createElement("a"),a=URL.createObjectURL(s);o.href=a,o.download=`${t}.${r}`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},`image/${i}`,n)}static performance(e=10){let t=Date.now(),r=[];return function(){const n=Date.now();return r.push(n-t),r.length>=e&&r.shift(),t=n,Math.floor(r.reduce((i,s)=>i+s,0)/r.length)}}static arrayCheck(e,t=2){return Array.isArray(e)&&e.length<t?(Vt.warn(`Requires ${t} or more Pts in this Group.`),!1):!0}static iterToArray(e){return Array.isArray(e)?e:[...e]}static isMobile(){return/iPhone|iPad|Android/i.test(navigator.userAgent)}},T=Vt;T._warnLevel="mute";var E=class extends Float32Array{constructor(...e){let t;e.length===1&&typeof e[0]=="number"?t=e[0]:t=e.length>0?T.getArgs(e):[0,0],super(t)}static make(e,t=0,r=!1){let n=new Float32Array(e);if(t&&n.fill(t),r)for(let i=0,s=n.length;i<s;i++)n[i]=n[i]*Ce.random();return new E(n)}get id(){return this._id}set id(e){this._id=e}get x(){return this[0]}set x(e){this[0]=e}get y(){return this[1]}set y(e){this[1]=e}get z(){return this[2]}set z(e){this[2]=e}get w(){return this[3]}set w(e){this[3]=e}clone(){return new E(this)}equals(e,t=1e-6){for(let r=0,n=this.length;r<n;r++)if(Math.abs(this[r]-e[r])>t)return!1;return!0}to(...e){let t=T.getArgs(e);for(let r=0,n=Math.min(this.length,t.length);r<n;r++)this[r]=t[r];return this}$to(...e){return this.clone().to(...e)}toAngle(e,t,r=!1){let n=t??this.magnitude(),i=[Math.cos(e)*n,Math.sin(e)*n];return r?this.add(i):this.to(i)}op(e){let t=this;return(...r)=>e(t,...r)}ops(e){let t=[];for(let r=0,n=e.length;r<n;r++)t.push(this.op(e[r]));return t}$take(e){let t=[];for(let r=0,n=e.length;r<n;r++)t.push(this[e[r]]||0);return new E(t)}$concat(...e){return new E(this.toArray().concat(T.getArgs(e)))}add(...e){return e.length===1&&typeof e[0]=="number"?ae.add(this,e[0]):ae.add(this,T.getArgs(e)),this}$add(...e){return this.clone().add(...e)}subtract(...e){return e.length===1&&typeof e[0]=="number"?ae.subtract(this,e[0]):ae.subtract(this,T.getArgs(e)),this}$subtract(...e){return this.clone().subtract(...e)}multiply(...e){return e.length===1&&typeof e[0]=="number"?ae.multiply(this,e[0]):ae.multiply(this,T.getArgs(e)),this}$multiply(...e){return this.clone().multiply(...e)}divide(...e){return e.length===1&&typeof e[0]=="number"?ae.divide(this,e[0]):ae.divide(this,T.getArgs(e)),this}$divide(...e){return this.clone().divide(...e)}magnitudeSq(){return ae.dot(this,this)}magnitude(){return ae.magnitude(this)}unit(e=void 0){return ae.unit(this,e),this}$unit(e=void 0){return this.clone().unit(e)}dot(...e){return ae.dot(this,T.getArgs(e))}$cross2D(...e){return ae.cross2D(this,T.getArgs(e))}$cross(...e){return ae.cross(this,T.getArgs(e))}$project(...e){return this.$multiply(this.dot(...e)/this.magnitudeSq())}projectScalar(...e){return this.dot(...e)/this.magnitude()}abs(){return ae.abs(this),this}$abs(){return this.clone().abs()}floor(){return ae.floor(this),this}$floor(){return this.clone().floor()}ceil(){return ae.ceil(this),this}$ceil(){return this.clone().ceil()}round(){return ae.round(this),this}$round(){return this.clone().round()}minValue(){return ae.min(this)}maxValue(){return ae.max(this)}$min(...e){let t=T.getArgs(e),r=this.clone();for(let n=0,i=Math.min(this.length,t.length);n<i;n++)r[n]=Math.min(this[n],t[n]);return r}$max(...e){let t=T.getArgs(e),r=this.clone();for(let n=0,i=Math.min(this.length,t.length);n<i;n++)r[n]=Math.max(this[n],t[n]);return r}angle(e=we.xy){return Math.atan2(this[e[1]],this[e[0]])}angleBetween(e,t=we.xy){return Q.boundRadian(this.angle(t))-Q.boundRadian(e.angle(t))}scale(e,t){return Q.scale(this,e,t||E.make(this.length,0)),this}rotate2D(e,t,r){return Q.rotate2D(this,e,t||E.make(this.length,0),r),this}shear2D(e,t,r){return Q.shear2D(this,e,t||E.make(this.length,0),r),this}reflect2D(e,t){return Q.reflect2D(this,e,t),this}toString(){return`Pt(${this.join(", ")})`}toArray(){return[].slice.call(this)}toGroup(){return new k(E.make(this.length),this.clone())}toBound(){return new pt(E.make(this.length),this.clone())}},k=class extends Array{constructor(...e){super(...e)}get id(){return this._id}set id(e){this._id=e}get p1(){return this[0]}get p2(){return this[1]}get p3(){return this[2]}get p4(){return this[3]}get q1(){return this[this.length-1]}get q2(){return this[this.length-2]}get q3(){return this[this.length-3]}get q4(){return this[this.length-4]}clone(){let e=new k;for(let t=0,r=this.length;t<r;t++)e.push(this[t].clone());return e}static fromArray(e){let t=new k;for(let r of e){let n=r instanceof E?r:new E(r);t.push(n)}return t}static fromPtArray(e){return k.from(e)}split(e,t,r=!1){return T.split(this,e,t,r)}insert(e,t=0){return k.prototype.splice.apply(this,[t,0,...e]),this}remove(e=0,t=1){let r=e<0?[e*-1-1,t]:[e,t];return k.prototype.splice.apply(this,r)}segments(e=2,t=1,r=!1){return this.split(e,t,r)}lines(){return this.segments(2,1)}centroid(){return Q.centroid(this)}boundingBox(){return Q.boundingBox(this)}anchorTo(e=0){Q.anchor(this,e,"to")}anchorFrom(e=0){Q.anchor(this,e,"from")}op(e){let t=this;return(...r)=>e(t,...r)}ops(e){let t=[];for(let r=0,n=e.length;r<n;r++)t.push(this.op(e[r]));return t}interpolate(e){e=Ce.clamp(e,0,1);let t=this.length-1,r=1/(this.length-1),n=Math.floor(e/r);return Q.interpolate(this[n],this[Math.min(this.length-1,n+1)],(e-n*r)*t)}moveBy(...e){return this.add(...e)}moveTo(...e){let t=new E(T.getArgs(e)).subtract(this[0]);return this.moveBy(t),this}scale(e,t){for(let r=0,n=this.length;r<n;r++)Q.scale(this[r],e,t||this[0]);return this}rotate2D(e,t,r){for(let n=0,i=this.length;n<i;n++)Q.rotate2D(this[n],e,t||this[0],r);return this}shear2D(e,t,r){for(let n=0,i=this.length;n<i;n++)Q.shear2D(this[n],e,t||this[0],r);return this}reflect2D(e,t){for(let r=0,n=this.length;r<n;r++)Q.reflect2D(this[r],e,t);return this}sortByDimension(e,t=!1){return this.sort((r,n)=>t?n[e]-r[e]:r[e]-n[e])}forEachPt(e,...t){if(!this[0][e])return T.warn(`${e} is not a function of Pt`),this;for(let r=0,n=this.length;r<n;r++)this[r]=this[r][e](...t);return this}add(...e){return this.forEachPt("add",...e)}subtract(...e){return this.forEachPt("subtract",...e)}multiply(...e){return this.forEachPt("multiply",...e)}divide(...e){return this.forEachPt("divide",...e)}$matrixAdd(e){return le.add(this,e)}$matrixMultiply(e,t=!1,r=!1){return le.multiply(this,e,t,r)}zipSlice(e,t=!1){return le.zipSlice(this,e,t)}$zip(e=void 0,t=!1){return le.zip(this,e,t)}toBound(){return pt.fromGroup(this)}toString(){return"Group[ "+this.reduce((e,t)=>e+t.toString()+" ","")+" ]"}},pt=class extends k{constructor(...e){super(...e),this._center=new E,this._size=new E,this._topLeft=new E,this._bottomRight=new E,this._inited=!1,this.init()}static fromBoundingRect(e){let t=new pt(new E(e.left||0,e.top||0),new E(e.right||0,e.bottom||0));return e.width&&e.height&&(t.size=new E(e.width,e.height)),t}static fromGroup(e){let t=T.iterToArray(e);if(t.length<2)throw new Error("Cannot create a Bound from a group that has less than 2 Pt");return new pt(t[0],t[t.length-1])}init(){if(this.p1&&(this._size=this.p1.clone(),this._inited=!0),this.p1&&this.p2){let e=this.p1,t=this.p2;this.topLeft=e.$min(t),this._bottomRight=e.$max(t),this._updateSize(),this._inited=!0}}clone(){return new pt(this._topLeft.clone(),this._bottomRight.clone())}_updateSize(){this._size=this._bottomRight.$subtract(this._topLeft).abs(),this._updateCenter()}_updateCenter(){this._center=this._size.$multiply(.5).add(this._topLeft)}_updatePosFromTop(){this._bottomRight=this._topLeft.$add(this._size),this._updateCenter()}_updatePosFromBottom(){this._topLeft=this._bottomRight.$subtract(this._size),this._updateCenter()}_updatePosFromCenter(){let e=this._size.$multiply(.5);this._topLeft=this._center.$subtract(e),this._bottomRight=this._center.$add(e)}get size(){return new E(this._size)}set size(e){this._size=new E(e),this._updatePosFromTop()}get center(){return new E(this._center)}set center(e){this._center=new E(e),this._updatePosFromCenter()}get topLeft(){return new E(this._topLeft)}set topLeft(e){this._topLeft=new E(e),this[0]=this._topLeft,this._updateSize()}get bottomRight(){return new E(this._bottomRight)}set bottomRight(e){this._bottomRight=new E(e),this[1]=this._bottomRight,this._updateSize()}get width(){return this._size.length>0?this._size.x:0}set width(e){this._size.x=e,this._updatePosFromTop()}get height(){return this._size.length>1?this._size.y:0}set height(e){this._size.y=e,this._updatePosFromTop()}get depth(){return this._size.length>2?this._size.z:0}set depth(e){this._size.z=e,this._updatePosFromTop()}get x(){return this.topLeft.x}get y(){return this.topLeft.y}get z(){return this.topLeft.z}get inited(){return this._inited}update(){return this._topLeft=this[0],this._bottomRight=this[1],this._updateSize(),this}},Ze={up:"up",down:"down",move:"move",drag:"drag",uidrag:"uidrag",drop:"drop",uidrop:"uidrop",over:"over",out:"out",enter:"enter",leave:"leave",click:"click",keydown:"keydown",keyup:"keyup",pointerdown:"pointerdown",pointerup:"pointerup",contextmenu:"contextmenu",all:"all"},zu=class{constructor(){this.id="space",this.bound=new pt,this._time={prev:0,diff:0,end:-1,min:0},this.players={},this.playerCount=0,this._animID=-1,this._pause=!1,this._refresh=void 0,this._pointer=new E,this._isReady=!1,this._playing=!1}refresh(e){return this._refresh=e,this}minFrameTime(e=0){this._time.min=e}add(e){let t=typeof e=="function"?{animate:e}:e,r=this.playerCount++,n=t.animateID||this.id+r;return this.players[n]=t,t.animateID=n,t.resize&&this.bound.inited&&t.resize(this.bound),this._refresh===void 0&&(this._refresh=!0),this}remove(e){return delete this.players[e.animateID],this}removeAll(){return this.players={},this}play(e=0){if(!(e===0&&this._animID!==-1)){if(this._animID=requestAnimationFrame(this.play.bind(this)),this._pause)return this;if(this._time.diff=e-this._time.prev,this._time.diff<this._time.min)return this;this._time.prev=e;try{this.playItems(e)}catch(t){throw cancelAnimationFrame(this._animID),this._animID=-1,this._playing=!1,t}return this}}replay(){this._time.end=-1,this.play()}playItems(e){if(this._playing=!0,this._refresh&&this.clear(),this._isReady)for(let t in this.players)this.players[t].animate&&this.players[t].animate(e,this._time.diff,this);this._time.end>=0&&e>this._time.end&&(cancelAnimationFrame(this._animID),this._animID=-1,this._playing=!1)}pause(e=!1){return this._pause=e?!this._pause:!0,this}resume(){return this._pause=!1,this}stop(e=0){return this._time.end=e,this}playOnce(e=0){return this.play(),this.stop(e),this}render(e){return this._renderFunc&&this._renderFunc(e,this),this}set customRendering(e){this._renderFunc=e}get customRendering(){return this._renderFunc}get isPlaying(){return this._playing}get outerBound(){return this.bound.clone()}get innerBound(){return new pt(E.make(this.size.length,0),this.size.clone())}get size(){return this.bound.size.clone()}get center(){return this.size.divide(2)}get width(){return this.bound.width}get height(){return this.bound.height}},To=class extends zu{constructor(){super(...arguments),this._pressed=!1,this._dragged=!1,this._hasMouse=!1,this._hasTouch=!1,this._hasKeyboard=!1}get pointer(){let e=this._pointer.clone();return e.id=this._pointer.id,e}bindCanvas(e,t,r={},n){(n||this._canvas).addEventListener(e,t,r)}unbindCanvas(e,t,r={},n){(n||this._canvas).removeEventListener(e,t,r)}bindDoc(e,t,r={}){document&&document.addEventListener(e,t,r)}unbindDoc(e,t,r={}){document&&document.removeEventListener(e,t,r)}bindMouse(e=!0,t){return e?(this._mouseDown=this._mouseDown.bind(this),this._mouseUp=this._mouseUp.bind(this),this._mouseOver=this._mouseOver.bind(this),this._mouseOut=this._mouseOut.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseClick=this._mouseClick.bind(this),this._pointerDown=this._pointerDown.bind(this),this._pointerUp=this._pointerUp.bind(this),this._contextMenu=this._contextMenu.bind(this),this.bindCanvas("mousedown",this._mouseDown,{},t),this.bindCanvas("pointerdown",this._pointerDown,{},t),this.bindCanvas("mouseup",this._mouseUp,{},t),this.bindCanvas("pointerup",this._pointerUp,{},t),this.bindCanvas("mouseover",this._mouseOver,{},t),this.bindCanvas("mouseout",this._mouseOut,{},t),this.bindCanvas("mousemove",this._mouseMove,{},t),this.bindCanvas("click",this._mouseClick,{},t),this.bindCanvas("contextmenu",this._contextMenu,{},t),this._hasMouse=!0):(this.unbindCanvas("mousedown",this._mouseDown,{},t),this.unbindCanvas("pointerdown",this._pointerDown,{},t),this.unbindCanvas("mouseup",this._mouseUp,{},t),this.unbindCanvas("pointerup",this._pointerUp,{},t),this.unbindCanvas("mouseover",this._mouseOver,{},t),this.unbindCanvas("mouseout",this._mouseOut,{},t),this.unbindCanvas("mousemove",this._mouseMove,{},t),this.unbindCanvas("click",this._mouseClick,{},t),this.unbindCanvas("contextmenu",this._contextMenu,{},t),this._hasMouse=!1),this}bindTouch(e=!0,t=!1,r){return e?(this.bindCanvas("touchstart",this._touchStart.bind(this),{passive:t},r),this.bindCanvas("touchend",this._mouseUp.bind(this),{},r),this.bindCanvas("touchmove",this._touchMove.bind(this),{passive:t},r),this.bindCanvas("touchcancel",this._mouseOut.bind(this),{},r),this._hasTouch=!0):(this.unbindCanvas("touchstart",this._touchStart.bind(this),{passive:t},r),this.unbindCanvas("touchend",this._mouseUp.bind(this),{},r),this.unbindCanvas("touchmove",this._touchMove.bind(this),{passive:t},r),this.unbindCanvas("touchcancel",this._mouseOut.bind(this),{},r),this._hasTouch=!1),this}bindKeyboard(e=!0){return e?(this._keyDownBind=this._keyDown.bind(this),this._keyUpBind=this._keyUp.bind(this),this.bindDoc("keydown",this._keyDownBind,{}),this.bindDoc("keyup",this._keyUpBind,{}),this._hasKeyboard=!0):(this.unbindDoc("keydown",this._keyDownBind,{}),this.unbindDoc("keyup",this._keyUpBind,{}),this._hasKeyboard=!1),this}touchesToPoints(e,t="touches"){if(!e||!e[t])return[];let r=[];for(var n=0;n<e[t].length;n++){let i=e[t].item(n);r.push(new E(i.pageX-this.bound.topLeft.x,i.pageY-this.bound.topLeft.y))}return r}_mouseAction(e,t){if(!this.isPlaying)return;let r=0,n=0;if(t instanceof MouseEvent){for(let i in this.players)if(this.players.hasOwnProperty(i)){let s=this.players[i];r=t.pageX-this.outerBound.x,n=t.pageY-this.outerBound.y,s.action&&s.action(e,r,n,t)}}else for(let i in this.players)if(this.players.hasOwnProperty(i)){let s=this.players[i],o=t.changedTouches&&t.changedTouches.length>0,a=t.changedTouches.item(0);r=o?a.pageX-this.outerBound.x:0,n=o?a.pageY-this.outerBound.y:0,s.action&&s.action(e,r,n,t)}e&&(this._pointer.to(r,n),this._pointer.id=e)}_mouseDown(e){return this._mouseAction(Ze.down,e),this._pressed=!0,!1}_pointerDown(e){return this._mouseAction(Ze.pointerdown,e),e.target instanceof Element&&e.target.setPointerCapture(e.pointerId),!1}_mouseUp(e){return this._dragged?this._mouseAction(Ze.drop,e):this._mouseAction(Ze.up,e),this._pressed=!1,this._dragged=!1,!1}_pointerUp(e){return this._mouseAction(Ze.pointerup,e),e.target instanceof Element&&(e.target.releasePointerCapture(e.pointerId),this._dragged&&this._mouseAction(Ze.drop,e),this._dragged=!1),!1}_mouseMove(e){return this._mouseAction(Ze.move,e),this._pressed&&(this._dragged=!0,this._mouseAction(Ze.drag,e)),!1}_mouseOver(e){return this._mouseAction(Ze.over,e),!1}_mouseOut(e){return this._mouseAction(Ze.out,e),this._dragged&&this._mouseAction(Ze.drop,e),this._dragged=!1,!1}_mouseClick(e){return this._mouseAction(Ze.click,e),this._pressed=!1,this._dragged=!1,!1}_contextMenu(e){return this._mouseAction(Ze.contextmenu,e),!1}_touchMove(e){return this._mouseMove(e),e.preventDefault(),!1}_touchStart(e){return this._mouseDown(e),e.preventDefault(),!1}_keyDown(e){return this._keyboardAction(Ze.keydown,e),!1}_keyUp(e){return this._keyboardAction(Ze.keyup,e),!1}_keyboardAction(e,t){if(this.isPlaying){for(let r in this.players)if(this.players.hasOwnProperty(r)){let n=this.players[r];n.action&&n.action(e,t.shiftKey?1:0,t.altKey?1:0,t)}}}},Bu=class{constructor(){this._ready=!1}get ready(){return this._ready}},Mi=class extends Bu{constructor(){super(...arguments),this._filled=!0,this._stroked=!0,this._font=new En(14,"sans-serif")}get filled(){return this._filled}set filled(e){this._filled=e}get stroked(){return this._stroked}set stroked(e){this._stroked=e}get currentFont(){return this._font}_multiple(e,t,...r){if(!e)return this;for(let n=0,i=e.length;n<i;n++)this[t](e[n],...r);return this}alpha(e){return this}fill(e){return this}fillOnly(e){return this.stroke(!1),this.fill(e)}stroke(e,t,r,n){return this}strokeOnly(e,t,r,n){return this.fill(!1),this.stroke(e,t,r,n)}points(e,t,r){if(e){for(let n=0,i=e.length;n<i;n++)this.point(e[n],t,r);return this}}circles(e){return this._multiple(e,"circle")}squares(e){return this._multiple(e,"square")}lines(e){return this._multiple(e,"line")}polygons(e){return this._multiple(e,"polygon")}rects(e){return this._multiple(e,"rect")}},En=class{constructor(e=12,t="sans-serif",r="",n="",i=1.5){this.size=e,this.face=t,this.style=n,this.weight=r,this.lineHeight=i}get value(){return`${this.style} ${this.weight} ${this.size}px/${this.lineHeight} ${this.face}`}toString(){return this.value}},Rs=class{static textWidthEstimator(e,t=["M","n","."],r=[.06,.8,.14]){let n=t.map(e),i=new E(r).dot(n);return s=>s.length*i}static truncate(e,t,r,n=""){let i=Math.floor(t.length*Math.min(1,r/e(t)));return i<t.length?(i=Math.max(0,i-n.length),[t.substr(0,i)+n,i]):[t,t.length]}static fontSizeToBox(e,t=1,r=!0){let n=pt.fromGroup(e),i=r?n.height:n.width,s=t*i;return function(o){let a=pt.fromGroup(o),l=(r?a.height:a.width)/i;return s*l}}static fontSizeToThreshold(e,t=0){return function(r,n){let i=r*n/e;return t<0?Math.min(i,r):t>0?Math.max(i,r):i}}},At=class{constructor(e=!1,t,r){this._scale=1,this._loaded=!1,this._editable=e,this._space=t,this._scale=this._space?this._space.pixelScale:1,this._img=new Image,r&&(this._img.crossOrigin="Anonymous")}static load(e,t=!1,r,n){const i=new At(t,r);return i.load(e).then(s=>{n&&n(s)}),i}static loadAsync(e,t=!1,r){return Ms(this,null,function*(){return yield new At(t,r).load(e)})}static loadPattern(e,t,r="repeat",n=!1){return Ms(this,null,function*(){return(yield At.loadAsync(e,n,t)).pattern(r)})}static blank(e,t,r){let n=new At(!0,t);const i=r||t.pixelScale;return n.initCanvas(e[0],e[1],i),n}load(e){return new Promise((t,r)=>{this._editable&&!document&&r("Cannot create html canvas element. document not found."),this._img.src=e,this._img.onload=()=>{this._editable&&(this._cv||(this._cv=document.createElement("canvas")),this._drawToScale(this._scale,this._img),this._data=this._ctx.getImageData(0,0,this._cv.width,this._cv.height)),this._loaded=!0,t(this)},this._img.onerror=n=>{r(n)}})}_drawToScale(e,t){const r=t.width,n=t.height;this.initCanvas(r,n,e),t&&this._ctx.drawImage(t,0,0,r,n,0,0,this._cv.width,this._cv.height)}initCanvas(e,t,r=1){if(!this._editable){console.error("Cannot initiate canvas because this Img is not set to be editable");return}this._cv||(this._cv=document.createElement("canvas"));const n=typeof r=="number"?[r,r]:r;this._cv.width=e*n[0],this._cv.height=t*n[1],this._ctx=this._cv.getContext("2d"),this._loaded=!0}bitmap(e){const t=e?e[0]:this._cv.width,r=e?e[1]:this._cv.height;return createImageBitmap(this._cv,0,0,t,r)}pattern(e="repeat",t=!1){if(!this._space)throw"Cannot find CanvasSpace ctx to create image pattern";return this._space.ctx.createPattern(t?this._cv:this._img,e)}sync(){this._scale!==1?this.bitmap().then(e=>{this._drawToScale(1/this._scale,e),this.load(this.toBase64())}):this._img.src=this.toBase64()}pixel(e,t=!0){const r=typeof t=="number"?t:t?this._scale:1;return At.getPixel(this._data,[e[0]*r,e[1]*r])}static getPixel(e,t){const r=new E(0,0,0,0);if(t[0]>=e.width||t[1]>=e.height)return r;const n=Math.floor(t[1])*(e.width*4)+Math.floor(t[0])*4,i=e.data;return n>=i.length-4?r:new E(i[n],i[n+1],i[n+2],i[n+3])}resize(e,t=!1){let r=t?e:[e[0]/this._img.naturalWidth,e[1]/this._img.naturalHeight];return this._drawToScale(r,this._img),this._data=this._ctx.getImageData(0,0,this._cv.width,this._cv.height),this}crop(e){let t=e.topLeft.scale(this._scale),r=e.size.scale(this._scale);return this._ctx.getImageData(t.x,t.y,r.x,r.y)}filter(e){return this._ctx.filter=e,this._ctx.drawImage(this._cv,0,0),this._ctx.filter="none",this}cleanup(){this._cv&&this._cv.remove(),this._img&&this._img.remove(),this._data=null}static fromBlob(e,t=!1,r){let n=URL.createObjectURL(e);return new At(t,r).load(n)}static imageDataToBlob(e){return new Promise(function(t,r){document||r("Cannot create html canvas element. document not found.");let n=document.createElement("canvas");n.width=e.width,n.height=e.height,n.getContext("2d").putImageData(e,0,0),n.toBlob(i=>{t(i),n.remove()})})}toBase64(){return this._cv.toDataURL()}toBlob(){return new Promise(e=>{this._cv.toBlob(t=>e(t))})}getForm(){return this._editable||console.error("Cannot get a CanvasForm because this Img is not editable"),this._ctx?new qe(this._ctx):void 0}get current(){return this._editable?this._cv:this._img}get image(){return this._img}get canvas(){return this._cv}get data(){return this._data}get ctx(){return this._ctx}get loaded(){return this._loaded}get pixelScale(){return this._scale}get imageSize(){return!this._img.width||!this._img.height?this.canvasSize.$divide(this._scale):new E(this._img.width,this._img.height)}get canvasSize(){return new E(this._cv.width,this._cv.height)}get scaledMatrix(){const e=1/this._scale;return new le().scale2D([e,e])}},Vu=class extends To{constructor(e,t){super(),this._pixelScale=1,this._autoResize=!0,this._bgcolor="#e1e9f0",this._offscreen=!1,this._initialResize=!1;var r=null;if(this.id="pt",e instanceof Element)r=e,this.id="pts_existing_space";else{let n=e;n=e[0]==="#"||e[0]==="."?e:"#"+e,r=document.querySelector(n),this.id=n.substr(1)}r?r.nodeName.toLowerCase()!="canvas"?(this._container=r,this._canvas=this._createElement("canvas",this.id+"_canvas"),this._container.appendChild(this._canvas),this._initialResize=!0):(this._canvas=r,this._container=r.parentElement,this._autoResize=!1):(this._container=this._createElement("div",this.id+"_container"),this._canvas=this._createElement("canvas",this.id),this._container.appendChild(this._canvas),document.body.appendChild(this._container)),setTimeout(this._ready.bind(this,t),100),this._ctx=this._canvas.getContext("2d")}_createElement(e="div",t){let r=document.createElement(e);return r.setAttribute("id",t),r}_ready(e){if(!this._container)throw new Error(`Cannot initiate #${this.id} element`);this._isReady=!0,this._resizeHandler(null),this.clear(this._bgcolor),this._canvas.dispatchEvent(new Event("ready"));for(let t in this.players)this.players.hasOwnProperty(t)&&this.players[t].start&&this.players[t].start(this.bound.clone(),this);this._pointer=this.center,this._initialResize=!1,e&&e(this.bound,this._canvas)}setup(e){if(this._bgcolor=e.bgcolor?e.bgcolor:"transparent",this.autoResize=e.resize!=null?e.resize:!1,e.retina!==!1){let t=window&&window.devicePixelRatio||1,r=this._ctx.webkitBackingStorePixelRatio||this._ctx.mozBackingStorePixelRatio||this._ctx.msBackingStorePixelRatio||this._ctx.oBackingStorePixelRatio||this._ctx.backingStorePixelRatio||1;this._pixelScale=Math.max(1,t/r)}return e.offscreen?(this._offscreen=!0,this._offCanvas=this._createElement("canvas",this.id+"_offscreen"),this._offCtx=this._offCanvas.getContext("2d")):this._offscreen=!1,e.pixelDensity&&(this._pixelScale=e.pixelDensity),this}set autoResize(e){window&&(this._autoResize=e,e?window.addEventListener("resize",this._resizeHandler.bind(this)):window.removeEventListener("resize",this._resizeHandler.bind(this)))}get autoResize(){return this._autoResize}resize(e,t){this.bound=e,this._canvas.width=Math.ceil(this.bound.size.x)*this._pixelScale,this._canvas.height=Math.ceil(this.bound.size.y)*this._pixelScale,this._canvas.style.width=Math.ceil(this.bound.size.x)+"px",this._canvas.style.height=Math.ceil(this.bound.size.y)+"px",this._offscreen&&(this._offCanvas.width=Math.ceil(this.bound.size.x)*this._pixelScale,this._offCanvas.height=Math.ceil(this.bound.size.y)*this._pixelScale),this._pixelScale!=1&&(this._ctx.scale(this._pixelScale,this._pixelScale),this._offscreen&&this._offCtx.scale(this._pixelScale,this._pixelScale));for(let r in this.players)if(this.players.hasOwnProperty(r)){let n=this.players[r];n.resize&&n.resize(this.bound,t)}return this.render(this._ctx),t&&!this.isPlaying&&this.playOnce(0),this}_resizeHandler(e){if(!window)return;let t=this._autoResize||this._initialResize?this._container.getBoundingClientRect():this._canvas.getBoundingClientRect();if(t){let r=pt.fromBoundingRect(t);r.center=r.center.add(window.pageXOffset,window.pageYOffset),this.resize(r,e)}}set background(e){this._bgcolor=e}get background(){return this._bgcolor}get pixelScale(){return this._pixelScale}get hasOffscreen(){return this._offscreen}get offscreenCtx(){return this._offCtx}get offscreenCanvas(){return this._offCanvas}getForm(){return new qe(this)}get element(){return this._canvas}get parent(){return this._container}get ready(){return this._isReady}get ctx(){return this._ctx}clear(e){e&&(this._bgcolor=e);const t=this._ctx.fillStyle,r=Math.ceil(this.pixelScale);return!this._bgcolor||this._bgcolor==="transparent"?this._ctx.clearRect(-r,-r,this._canvas.width+r,this._canvas.height+r):((this._bgcolor.indexOf("rgba")===0||this._bgcolor.length===9&&this._bgcolor.indexOf("#")===0)&&this._ctx.clearRect(-r,-r,this._canvas.width+r,this._canvas.height+r),this._ctx.fillStyle=this._bgcolor,this._ctx.fillRect(-r,-r,this._canvas.width+r,this._canvas.height+r)),this._ctx.fillStyle=t,this}clearOffscreen(e){if(this._offscreen){const t=Math.ceil(this.pixelScale);e?(this._offCtx.fillStyle=e,this._offCtx.fillRect(-t,-t,this._canvas.width+t,this._canvas.height+t)):this._offCtx.clearRect(-t,-t,this._offCanvas.width+t,this._offCanvas.height+t)}return this}playItems(e){this._isReady&&(this._ctx.save(),this._offscreen&&this._offCtx.save(),super.playItems(e),this._ctx.restore(),this._offscreen&&this._offCtx.restore(),this.render(this._ctx))}dispose(){if(window)return window.removeEventListener("resize",this._resizeHandler.bind(this)),this.stop(),this.removeAll(),this}recorder(e,t="webm",r=15e6){let n=this._canvas.captureStream();const i=new MediaRecorder(n,{mimeType:`video/${t}`,bitsPerSecond:r});return i.ondataavailable=function(s){let o=URL.createObjectURL(new Blob([s.data],{type:`video/${t}`}));if(typeof e=="function")e(o);else if(e){let a=document.createElement("a");a.href=o,a.download=`canvas_video.${t}`,a.click(),a.remove()}},i}},qe=class extends Mi{constructor(e){if(super(),this._style={fillStyle:"#f03",strokeStyle:"#fff",lineWidth:1,lineJoin:"bevel",lineCap:"butt",globalAlpha:1},!e)return this;const t=r=>{this._ctx=r,this._ctx.fillStyle=this._style.fillStyle,this._ctx.strokeStyle=this._style.strokeStyle,this._ctx.lineJoin="bevel",this._ctx.font=this._font.value,this._ready=!0};e instanceof CanvasRenderingContext2D?t(e):(this._space=e,this._space.add({start:()=>{t(this._space.ctx)}}))}get space(){return this._space}get ctx(){return this._ctx}useOffscreen(e=!0,t=!1){return t&&this._space.clearOffscreen(typeof t=="string"?t:null),this._ctx=this._space.hasOffscreen&&e?this._space.offscreenCtx:this._space.ctx,this}renderOffscreen(e=[0,0]){this._space.hasOffscreen&&this._space.ctx.drawImage(this._space.offscreenCanvas,e[0],e[1],this._space.width,this._space.height)}alpha(e){return this._ctx.globalAlpha=e,this._style.globalAlpha=e,this}fill(e){return typeof e=="boolean"?this.filled=e:(this.filled=!0,this._style.fillStyle=e,this._ctx.fillStyle=e),this}fillOnly(e){return this.stroke(!1),this.fill(e)}stroke(e,t,r,n){return typeof e=="boolean"?this.stroked=e:(this.stroked=!0,this._style.strokeStyle=e,this._ctx.strokeStyle=e,t&&(this._ctx.lineWidth=t,this._style.lineWidth=t),r&&(this._ctx.lineJoin=r,this._style.lineJoin=r),n&&(this._ctx.lineCap=n,this._style.lineCap=n)),this}strokeOnly(e,t,r,n){return this.fill(!1),this.stroke(e,t,r,n)}applyFillStroke(e=!0,t=!0,r=1){return e&&(typeof e=="string"&&this.fill(e),this._ctx.fill()),t&&(typeof t=="string"&&this.stroke(t,r),this._ctx.stroke()),this}gradient(e){let t=[];e.length<2&&e.push([.99,"#000"],[1,"#000"]);for(let r=0,n=e.length;r<n;r++){let i=typeof e[r]=="string"?r*(1/(e.length-1)):e[r][0],s=typeof e[r]=="string"?e[r]:e[r][1];t.push([i,s])}return(r,n)=>{let i=n?this._ctx.createRadialGradient(r[0][0],r[0][1],Math.abs(r[1][0]),n[0][0],n[0][1],Math.abs(n[1][0])):this._ctx.createLinearGradient(r[0][0],r[0][1],r[1][0],r[1][1]);for(let s=0,o=t.length;s<o;s++)i.addColorStop(t[s][0],t[s][1]);return i}}composite(e="source-over"){return this._ctx.globalCompositeOperation=e,this}clip(){return this._ctx.clip(),this}dash(e=!0,t=0){return e?(e===!0&&(e=[5,5]),this._ctx.setLineDash([e[0],e[1]]),this._ctx.lineDashOffset=t):(this._ctx.setLineDash([]),this._ctx.lineDashOffset=0),this}font(e,t,r,n,i){return typeof e=="number"?(this._font.size=e,i&&(this._font.face=i),t&&(this._font.weight=t),r&&(this._font.style=r),n&&(this._font.lineHeight=n)):this._font=e,this._ctx.font=this._font.value,this._estimateTextWidth&&this.fontWidthEstimate(!0),this}fontWidthEstimate(e=!0){return this._estimateTextWidth=e?Rs.textWidthEstimator(t=>this._ctx.measureText(t).width):void 0,this}getTextWidth(e){return this._estimateTextWidth?this._estimateTextWidth(e):this._ctx.measureText(e+" .").width}_textTruncate(e,t,r=""){return Rs.truncate(this.getTextWidth.bind(this),e,t,r)}_textAlign(e,t,r,n){let i=T.iterToArray(e);if(T.arrayCheck(i)){n||(n=ve.center(i));var s=i[0][0];this._ctx.textAlign=="end"||this._ctx.textAlign=="right"?s=i[1][0]:(this._ctx.textAlign=="center"||this._ctx.textAlign=="middle")&&(s=n[0]);var o=n[1];return t=="top"||t=="start"?o=i[0][1]:(t=="end"||t=="bottom")&&(o=i[1][1]),r?new E(s+r[0],o+r[1]):new E(s,o)}}reset(){for(let e in this._style)this._style.hasOwnProperty(e)&&(this._ctx[e]=this._style[e]);return this._font=new En,this._ctx.font=this._font.value,this}_paint(){this._filled&&this._ctx.fill(),this._stroked&&this._ctx.stroke()}static point(e,t,r=5,n="square"){if(t){if(!qe[n])throw new Error(`${n} is not a static function of CanvasForm`);qe[n](e,t,r)}}point(e,t=5,r="square"){return qe.point(this._ctx,e,t,r),this._paint(),this}static circle(e,t,r=10){t&&(e.beginPath(),e.arc(t[0],t[1],r,0,we.two_pi,!1),e.closePath())}circle(e){let t=T.iterToArray(e);return qe.circle(this._ctx,t[0],t[1][0]),this._paint(),this}static ellipse(e,t,r,n=0,i=0,s=we.two_pi,o=!1){!t||!r||(e.beginPath(),e.ellipse(t[0],t[1],r[0],r[1],n,i,s,o))}ellipse(e,t,r=0,n=0,i=we.two_pi,s=!1){return qe.ellipse(this._ctx,e,t,r,n,i,s),this._paint(),this}static arc(e,t,r,n,i,s){t&&(e.beginPath(),e.arc(t[0],t[1],r,n,i,s))}arc(e,t,r,n,i){return qe.arc(this._ctx,e,t,r,n,i),this._paint(),this}static square(e,t,r){if(!t)return;let n=t[0]-r,i=t[1]-r,s=t[0]+r,o=t[1]+r;e.beginPath(),e.moveTo(n,i),e.lineTo(n,o),e.lineTo(s,o),e.lineTo(s,i),e.closePath()}square(e,t){return qe.square(this._ctx,e,t),this._paint(),this}static line(e,t){if(!T.arrayCheck(t))return;let r=0;e.beginPath();for(let n of t)n&&(r++>0?e.lineTo(n[0],n[1]):e.moveTo(n[0],n[1]))}line(e){return qe.line(this._ctx,e),this._paint(),this}static polygon(e,t){T.arrayCheck(t)&&(qe.line(e,t),e.closePath())}polygon(e){return qe.polygon(this._ctx,e),this._paint(),this}static rect(e,t){let r=T.iterToArray(t);T.arrayCheck(r)&&(e.beginPath(),e.moveTo(r[0][0],r[0][1]),e.lineTo(r[0][0],r[1][1]),e.lineTo(r[1][0],r[1][1]),e.lineTo(r[1][0],r[0][1]),e.closePath())}rect(e){return qe.rect(this._ctx,e),this._paint(),this}static image(e,t,r,n){let i=T.iterToArray(t),s;if(typeof i[0]=="number")s=i;else if(n){let o=T.iterToArray(n);s=[o[0][0],o[0][1],o[1][0]-o[0][0],o[1][1]-o[0][1],i[0][0],i[0][1],i[1][0]-i[0][0],i[1][1]-i[0][1]]}else s=[i[0][0],i[0][1],i[1][0]-i[0][0],i[1][1]-i[0][1]];r instanceof At?r.loaded&&e.drawImage(r.image,...s):e.drawImage(r,...s)}image(e,t,r){return t instanceof At?t.loaded&&qe.image(this._ctx,e,t.image,r):qe.image(this._ctx,e,t,r),this}static imageData(e,t,r){let n=T.iterToArray(t);typeof n[0]=="number"?e.putImageData(r,n[0],n[1]):e.putImageData(r,n[0][0],n[0][1],n[0][0],n[0][1],n[1][0],n[1][1])}imageData(e,t){return qe.imageData(this._ctx,e,t),this}static text(e,t,r,n){t&&e.fillText(r,t[0],t[1],n)}text(e,t,r){return qe.text(this._ctx,e,t,r),this}textBox(e,t,r="middle",n="",i=!0){i&&(this._ctx.textBaseline=r);let s=ve.size(e),o=this._textTruncate(t,s[0],n);return this.text(this._textAlign(e,r),o[0]),this}paragraphBox(e,t,r=1.2,n="top",i=!0){let s=T.iterToArray(e),o=ve.size(s);this._ctx.textBaseline="top";let a=this._font.size*r,l=(p,y=[],b=0)=>{if(!p||i&&b*a>o[1]-a*2)return y;if(b>1e4)throw new Error("max recursion reached (10000)");let x=this._textTruncate(p,o[0],""),C=x[0].indexOf(`
`);if(C>=0)return y.push(x[0].substr(0,C)),l(p.substr(C+1),y,b+1);let w=x[0].lastIndexOf(" ")+1;(w<=0||x[1]===p.length)&&(w=void 0);let M=x[0].substr(0,w);return y.push(M),x[1]<=0||x[1]===p.length?y:l(p.substr(w||x[1]),y,b+1)},c=l(t),d=c.length*a,h=s;if(n=="middle"||n=="center"){let p=(o[1]-d)/2;i&&(p=Math.max(0,p)),h=new k(s[0].$add(0,p),s[1].$subtract(0,p))}else n=="bottom"?h=new k(s[0].$add(0,o[1]-d),s[1]):h=new k(s[0],s[0].$add(o[0],d));let f=ve.center(h);for(let p=0,y=c.length;p<y;p++)this.text(this._textAlign(h,"top",[0,p*a],f),c[p]);return this}alignText(e="left",t="alphabetic"){return t=="center"&&(t="middle"),t=="baseline"&&(t="alphabetic"),this._ctx.textAlign=e,this._ctx.textBaseline=t,this}log(e){let t=this._ctx.measureText(e).width+20;return this.stroke(!1).fill("rgba(0,0,0,.4)").rect([[0,0],[t,20]]),this.fill("#fff").text([10,14],e),this}},Ts=class{static distributeRandom(e,t,r=2){let n=new k;for(let i=0;i<t;i++){let s=[e.x+Ce.random()*e.width];r>1&&s.push(e.y+Ce.random()*e.height),r>2&&s.push(e.z+Ce.random()*e.depth),n.push(new E(s))}return n}static distributeLinear(e,t){let r=T.iterToArray(e),n=Te.subpoints(r,t-2);return n.unshift(r[0]),n.push(r[r.length-1]),n}static gridPts(e,t,r,n=[.5,.5]){if(t===0||r===0)throw new Error("grid columns and rows cannot be 0");let i=e.size.$subtract(1).$divide(t,r),s=i.$multiply(n),o=new k;for(let a=0;a<r;a++)for(let l=0;l<t;l++)o.push(e.topLeft.$add(i.$multiply(l,a)).add(s));return o}static gridCells(e,t,r){if(t===0||r===0)throw new Error("grid columns and rows cannot be 0");let n=e.size.$subtract(1).divide(t,r),i=[];for(let s=0;s<r;s++)for(let o=0;o<t;o++)i.push(new k(e.topLeft.$add(n.$multiply(o,s)),e.topLeft.$add(n.$multiply(o,s).add(n))));return i}static radialPts(e,t,r,n=-we.half_pi){let i=new k,s=we.two_pi/r;for(let o=0;o<r;o++)i.push(new E(e).toAngle(s*o+n,t,!0));return i}static noisePts(e,t=.01,r=.01,n=0,i=0){let s=Ce.random(),o=new k,a=0;for(let l of e){let c=new Uu(l),d=n&&n>0?Math.floor(a/n):a,h=i&&i>0?a%i:a;c.initNoise(t*h,r*d),c.seed(s),o.push(c),a++}return o}static delaunay(e){return Po.from(e)}},Qr=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],en=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,9,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Uu=class extends E{constructor(...e){super(...e),this.perm=[],this._n=new E(.01,.01),this.perm=en.concat(en)}initNoise(...e){return this._n=new E(...e),this}step(e=0,t=0){return this._n.add(e,t),this}seed(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(let t=0;t<255;t++){let r=t&1?en[t]^e&255:en[t]^e>>8&255;this.perm[t]=this.perm[t+256]=r}return this}noise2D(){let e=Math.max(0,Math.floor(this._n[0]))%255,t=Math.max(0,Math.floor(this._n[1]))%255,r=this._n[0]%255-e,n=this._n[1]%255-t,i=ae.dot(Qr[(e+this.perm[t])%12],[r,n,0]),s=ae.dot(Qr[(e+this.perm[t+1])%12],[r,n-1,0]),o=ae.dot(Qr[(e+1+this.perm[t])%12],[r-1,n,0]),a=ae.dot(Qr[(e+1+this.perm[t+1])%12],[r-1,n-1,0]),l=d=>d*d*d*(d*(d*6-15)+10),c=l(r);return Ce.lerp(Ce.lerp(i,o,c),Ce.lerp(s,a,c),l(n))}},Po=class extends k{constructor(){super(...arguments),this._mesh=[]}delaunay(e=!0){if(this.length<3)return[];this._mesh=[];let t=this.length,r=[];for(let l=0;l<t;l++)r[l]=l;r.sort((l,c)=>this[c][0]-this[l][0]);let n=this.slice(),i=this._superTriangle();n=n.concat(i);let s=[this._circum(t,t+1,t+2,i)],o=[],a=[];for(let l=0,c=r.length;l<c;l++){let d=r[l],h=[],f=s.length;for(this._mesh[d]||(this._mesh[d]={});f--;){let p=s[f],y=p.circle[1][0],b=n[d].$subtract(p.circle[0]);if(b[0]>0&&b[0]*b[0]>y*y){o.push(p),a.push(p.triangle),s.splice(f,1);continue}b[0]*b[0]+b[1]*b[1]-y*y>we.epsilon||(h.push(p.i,p.j,p.j,p.k,p.k,p.i),s.splice(f,1))}for(Po._dedupe(h),f=h.length;f>1;)s.push(this._circum(h[--f],h[--f],d,!1,n))}for(let l=0,c=s.length;l<c;l++){let d=s[l];d.i<t&&d.j<t&&d.k<t&&(o.push(d),a.push(d.triangle),this._cache(d))}return e?a:o}voronoi(){let e=[],t=this._mesh;for(let r=0,n=t.length;r<n;r++)e.push(this.neighborPts(r,!0));return e}mesh(){return this._mesh}neighborPts(e,t=!1){let r=new k,n=this._mesh;for(let i in n[e])n[e].hasOwnProperty(i)&&r.push(n[e][i].circle[0]);return t?Q.sortEdges(r):r}neighbors(e){let t=[],r=this._mesh;for(let n in r[e])r[e].hasOwnProperty(n)&&t.push(r[e][n]);return t}_cache(e){this._mesh[e.i][`${Math.min(e.j,e.k)}-${Math.max(e.j,e.k)}`]=e,this._mesh[e.j][`${Math.min(e.i,e.k)}-${Math.max(e.i,e.k)}`]=e,this._mesh[e.k][`${Math.min(e.i,e.j)}-${Math.max(e.i,e.j)}`]=e}_superTriangle(){let e=this[0],t=this[0];for(let s=1,o=this.length;s<o;s++)e=e.$min(this[s]),t=t.$max(this[s]);let r=t.$subtract(e),n=e.$add(t).divide(2),i=Math.max(r[0],r[1]);return new k(n.$subtract(20*i,i),n.$add(0,20*i),n.$add(20*i,-i))}_triangle(e,t,r,n=this){return new k(n[e],n[t],n[r])}_circum(e,t,r,n,i=this){let s=n||this._triangle(e,t,r,i);return{i:e,j:t,k:r,triangle:s,circle:mt.circumcircle(s)}}static _dedupe(e){let t=e.length;for(;t>1;){let r=e[--t],n=e[--t],i=t;for(;i>1;){let s=e[--i],o=e[--i];if(n==o&&r==s||n==s&&r==o){e.splice(t,2),e.splice(i,2);break}}}return e}},q=class extends E{constructor(...e){super(...e),this._mode="rgb",this._isNorm=!1}static from(...e){let t=[1,1,1,1],r=T.getArgs(e);for(let n=0,i=t.length;n<i;n++)n<r.length&&(t[n]=r[n]);return new q(t)}static fromHex(e){if(e[0]=="#"&&(e=e.substr(1)),e.length<=3){let n=i=>e[i]||"F";e=`${n(0)}${n(0)}${n(1)}${n(1)}${n(2)}${n(2)}`}let t=1;e.length===8&&(t=e.substr(6)&&255/255,e=e.substring(0,6));let r=parseInt(e,16);return new q(r>>16,r>>8&255,r&255,t)}static rgb(...e){return q.from(...e).toMode("rgb")}static hsl(...e){return q.from(...e).toMode("hsl")}static hsb(...e){return q.from(...e).toMode("hsb")}static lab(...e){return q.from(...e).toMode("lab")}static lch(...e){return q.from(...e).toMode("lch")}static luv(...e){return q.from(...e).toMode("luv")}static xyz(...e){return q.from(...e).toMode("xyz")}static maxValues(e){return q.ranges[e].zipSlice(1).$take([0,1,2])}get hex(){return this.toString("hex")}get rgb(){return this.toString("rgb")}get rgba(){return this.toString("rgba")}clone(){let e=new q(this);return e.toMode(this._mode),e}toMode(e,t=!1){if(t){let r=this._mode.toUpperCase()+"to"+e.toUpperCase();if(q[r])this.to(q[r](this,this._isNorm,this._isNorm));else throw new Error("Cannot convert color with "+r)}return this._mode=e,this}get mode(){return this._mode}get r(){return this[0]}set r(e){this[0]=e}get g(){return this[1]}set g(e){this[1]=e}get b(){return this[2]}set b(e){this[2]=e}get h(){return this._mode=="lch"?this[2]:this[0]}set h(e){let t=this._mode=="lch"?2:0;this[t]=e}get s(){return this[1]}set s(e){this[1]=e}get l(){return this._mode=="hsl"?this[2]:this[0]}set l(e){let t=this._mode=="hsl"?2:0;this[t]=e}get a(){return this[1]}set a(e){this[1]=e}get c(){return this[1]}set c(e){this[1]=e}get u(){return this[1]}set u(e){this[1]=e}get v(){return this[2]}set v(e){this[2]=e}set alpha(e){this.length>3&&(this[3]=e)}get alpha(){return this.length>3?this[3]:1}get normalized(){return this._isNorm}set normalized(e){this._isNorm=e}normalize(e=!0){if(this._isNorm==e)return this;let t=q.ranges[this._mode];for(let r=0;r<3;r++)this[r]=e?Ce.mapToRange(this[r],t[r][0],t[r][1],0,1):Ce.mapToRange(this[r],0,1,t[r][0],t[r][1]);return this._isNorm=e,this}$normalize(e=!0){return this.clone().normalize(e)}toString(e="mode"){if(e=="hex"){let t=r=>{let n=Math.floor(r).toString(16);return n.length<2?"0"+n:n};return`#${t(this[0])}${t(this[1])}${t(this[2])}`}else return e=="rgba"?`rgba(${Math.floor(this[0])},${Math.floor(this[1])},${Math.floor(this[2])},${this.alpha})`:e=="rgb"?`rgb(${Math.floor(this[0])},${Math.floor(this[1])},${Math.floor(this[2])})`:`${this._mode}(${this[0]},${this[1]},${this[2]},${this.alpha})`}static RGBtoHSL(e,t=!1,r=!1){let[n,i,s]=t?e:e.$normalize(),o=Math.max(n,i,s),a=Math.min(n,i,s),l=(o+a)/2,c=l,d=l;if(o==a)l=0,c=0;else{let h=o-a;c=d>.5?h/(2-o-a):h/(o+a),l=0,o===n?l=(i-s)/h+(i<s?6:0):o===i?l=(s-n)/h+2:o===s&&(l=(n-i)/h+4)}return q.hsl(r?l/60:l*60,c,d,e.alpha)}static HSLtoRGB(e,t=!1,r=!1){let[n,i,s]=e;if(t||(n=n/360),i==0)return q.rgb(s*255,s*255,s*255,e.alpha);let o=s<=.5?s*(1+i):s+i-s*i,a=2*s-o,l=d=>(d=d<0?d+1:d>1?d-1:d,d*6<1?a+(o-a)*d*6:d*2<1?o:d*3<2?a+(o-a)*(2/3-d)*6:a),c=r?1:255;return q.rgb(c*l(n+1/3),c*l(n),c*l(n-1/3),e.alpha)}static RGBtoHSB(e,t=!1,r=!1){let[n,i,s]=t?e:e.$normalize(),o=Math.max(n,i,s),a=Math.min(n,i,s),l=o-a,c=0,d=o===0?0:l/o,h=o;return o!=a&&(o===n?c=(i-s)/l+(i<s?6:0):o===i?c=(s-n)/l+2:o===s&&(c=(n-i)/l+4)),q.hsb(r?c/60:c*60,d,h,e.alpha)}static HSBtoRGB(e,t=!1,r=!1){let[n,i,s]=e;t||(n=n/360);let o=Math.floor(n*6),a=n*6-o,l=s*(1-i),c=s*(1-a*i),d=s*(1-(1-a)*i),f=[[s,d,l],[c,s,l],[l,s,d],[l,c,s],[d,l,s],[s,l,c]][o%6],p=r?1:255;return q.rgb(p*f[0],p*f[1],p*f[2],e.alpha)}static RGBtoLAB(e,t=!1,r=!1){let n=t?e.$normalize(!1):e;return q.XYZtoLAB(q.RGBtoXYZ(n),!1,r)}static LABtoRGB(e,t=!1,r=!1){let n=t?e.$normalize(!1):e;return q.XYZtoRGB(q.LABtoXYZ(n),!1,r)}static RGBtoLCH(e,t=!1,r=!1){let n=t?e.$normalize(!1):e;return q.LABtoLCH(q.RGBtoLAB(n),!1,r)}static LCHtoRGB(e,t=!1,r=!1){let n=t?e.$normalize(!1):e;return q.LABtoRGB(q.LCHtoLAB(n),!1,r)}static RGBtoLUV(e,t=!1,r=!1){let n=t?e.$normalize(!1):e;return q.XYZtoLUV(q.RGBtoXYZ(n),!1,r)}static LUVtoRGB(e,t=!1,r=!1){let n=t?e.$normalize(!1):e;return q.XYZtoRGB(q.LUVtoXYZ(n),!1,r)}static RGBtoXYZ(e,t=!1,r=!1){let n=t?e.clone():e.$normalize();for(let s=0;s<3;s++)n[s]=n[s]>.04045?Math.pow((n[s]+.055)/1.055,2.4):n[s]/12.92,r||(n[s]=n[s]*100);let i=q.xyz(n[0]*.4124564+n[1]*.3575761+n[2]*.1804375,n[0]*.2126729+n[1]*.7151522+n[2]*.072175,n[0]*.0193339+n[1]*.119192+n[2]*.9503041,e.alpha);return r?i.normalize():i}static XYZtoRGB(e,t=!1,r=!1){let[n,i,s]=t?e:e.$normalize(),o=[n*3.2406254773200533+i*-1.5372079722103187+s*-.4986285986982479,n*-.9689307147293197+i*1.8757560608852415+s*.041517523842953964,n*.055710120445510616+i*-.2040210505984867+s*1.0569959422543882];for(let l=0;l<3;l++)o[l]=o[l]>.0031308?1.055*Math.pow(o[l],1/2.4)-.055:12.92*o[l],o[l]=Math.max(0,Math.min(1,o[l])),r||(o[l]=Math.round(o[l]*255));let a=q.rgb(o[0],o[1],o[2],e.alpha);return r?a.normalize():a}static XYZtoLAB(e,t=!1,r=!1){let n=t?e.$normalize(!1):e.clone();const i=.00885645167,s=903.296296296;n.divide(q.D65);let o=c=>c>i?Math.pow(c,1/3):(s*c+16)/116,a=o(n[1]),l=q.lab(116*a-16,500*(o(n[0])-a),200*(a-o(n[2])),e.alpha);return r?l.normalize():l}static LABtoXYZ(e,t=!1,r=!1){let n=t?e.$normalize(!1):e,i=(n[0]+16)/116,s=n[1]/500+i,o=i-n[2]/200;const a=.00885645167,l=903.296296296;let c=q.D65;const d=Math.pow(s,3),h=Math.pow(o,3);let f=q.xyz(c[0]*(d>a?d:(116*s-16)/l),c[1]*(n[0]>l*a?Math.pow((n[0]+16)/116,3):n[0]/l),c[2]*(h>a?h:(116*o-16)/l),e.alpha);return r?f.normalize():f}static XYZtoLUV(e,t=!1,r=!1){let[n,i,s]=t?e.$normalize(!1):e,o=4*n/(n+15*i+3*s),a=9*i/(n+15*i+3*s);i=i/100,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116;let l=4*q.D65[0]/(q.D65[0]+15*q.D65[1]+3*q.D65[2]),c=9*q.D65[1]/(q.D65[0]+15*q.D65[1]+3*q.D65[2]),d=116*i-16;return q.luv(d,13*d*(o-l),13*d*(a-c),e.alpha)}static LUVtoXYZ(e,t=!1,r=!1){let[n,i,s]=t?e.$normalize(!1):e,o=(n+16)/116,a=o*o*o;o=a>.008856?a:(o-16/116)/7.787;let l=4*q.D65[0]/(q.D65[0]+15*q.D65[1]+3*q.D65[2]),c=9*q.D65[1]/(q.D65[0]+15*q.D65[1]+3*q.D65[2]);i=i/(13*n)+l,s=s/(13*n)+c,o=o*100;let d=-1*(9*o*i)/((i-4)*s-i*s),h=(9*o-15*s*o-s*d)/(3*s);return q.xyz(d,o,h,e.alpha)}static LABtoLCH(e,t=!1,r=!1){let n=t?e.$normalize(!1):e,i=Q.toDegree(Q.boundRadian(Math.atan2(n[2],n[1])));return q.lch(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]),i,e.alpha)}static LCHtoLAB(e,t=!1,r=!1){let n=t?e.$normalize(!1):e,i=Q.toRadian(n[2]);return q.lab(n[0],Math.cos(i)*n[1],Math.sin(i)*n[1],e.alpha)}},Do=q;Do.D65=new E(95.047,100,108.883,1);Do.ranges={rgb:new k(new E(0,255),new E(0,255),new E(0,255)),hsl:new k(new E(0,360),new E(0,1),new E(0,1)),hsb:new k(new E(0,360),new E(0,1),new E(0,1)),lab:new k(new E(0,100),new E(-128,127),new E(-128,127)),lch:new k(new E(0,100),new E(0,100),new E(0,360)),luv:new k(new E(0,100),new E(-134,220),new E(-140,122)),xyz:new k(new E(0,100),new E(0,100),new E(0,100))};var lt=class extends To{constructor(e,t){super(),this.id="domspace",this._autoResize=!0,this._bgcolor="#e1e9f0",this._css={};var r=null;this.id="pts",e instanceof Element?(r=e,this.id="pts_existing_space"):(r=document.querySelector(e),this.id=e.substr(1)),r?(this._canvas=r,this._container=r.parentElement):(this._container=lt.createElement("div","pts_container"),this._canvas=lt.createElement("div","pts_element"),this._container.appendChild(this._canvas),document.body.appendChild(this._container)),setTimeout(this._ready.bind(this,t),50)}static createElement(e="div",t,r){let n=document.createElement(e);return t&&n.setAttribute("id",t),r&&r.appendChild&&r.appendChild(n),n}_ready(e){if(!this._container)throw new Error(`Cannot initiate #${this.id} element`);this._isReady=!0,this._resizeHandler(null),this.clear(this._bgcolor),this._canvas.dispatchEvent(new Event("ready"));for(let t in this.players)this.players.hasOwnProperty(t)&&this.players[t].start&&this.players[t].start(this.bound.clone(),this);this._pointer=this.center,this.refresh(!1),e&&e(this.bound,this._canvas)}setup(e){return e.bgcolor&&(this._bgcolor=e.bgcolor),this.autoResize=e.resize!=null?e.resize:!1,this}getForm(){return null}set autoResize(e){this._autoResize=e,e?window.addEventListener("resize",this._resizeHandler.bind(this)):(delete this._css.width,delete this._css.height,window.removeEventListener("resize",this._resizeHandler.bind(this)))}get autoResize(){return this._autoResize}resize(e,t){this.bound=e,this.styles({width:`${e.width}px`,height:`${e.height}px`},!0);for(let r in this.players)if(this.players.hasOwnProperty(r)){let n=this.players[r];n.resize&&n.resize(this.bound,t)}return this}_resizeHandler(e){let t=pt.fromBoundingRect(this._container.getBoundingClientRect());this._autoResize?this.styles({width:"100%",height:"100%"},!0):this.styles({width:`${t.width}px`,height:`${t.height}px`},!0),this.resize(t,e)}get element(){return this._canvas}get parent(){return this._container}get ready(){return this._isReady}clear(e){return e&&(this.background=e),this._canvas.innerHTML="",this}set background(e){this._bgcolor=e,this._container.style.backgroundColor=this._bgcolor}get background(){return this._bgcolor}style(e,t,r=!1){return this._css[e]=t,r&&(this._canvas.style[e]=t),this}styles(e,t=!1){for(let r in e)e.hasOwnProperty(r)&&this.style(r,e[r],t);return this}static setAttr(e,t){for(let r in t)t.hasOwnProperty(r)&&e.setAttribute(r,t[r]);return e}static getInlineStyles(e){let t="";for(let r in e)e.hasOwnProperty(r)&&e[r]&&(t+=`${r}: ${e[r]}; `);return t}dispose(){return window.removeEventListener("resize",this._resizeHandler.bind(this)),this.stop(),this.removeAll(),this}},Rt=class extends lt{getForm(){return new gn(this)}static htmlElement(e,t,r,n=!0){if(!e||!e.appendChild)throw new Error("parent is not a valid DOM element");let i=document.querySelector(`#${r}`);return i||(i=document.createElement(t),i.setAttribute("id",r),n&&i.setAttribute("class",r.substring(0,r.indexOf("-"))),e.appendChild(i)),i}remove(e){return this._container.querySelectorAll("."+gn.scopeID(e)).forEach(r=>{r.parentNode.removeChild(r)}),super.remove(e)}removeAll(){return this._container.innerHTML="",super.removeAll()}},Re=class extends Mi{constructor(e){super(),this._style={filled:!0,stroked:!0,background:"#f03","border-color":"#fff",color:"#000","border-width":"1px","border-radius":"0","border-style":"solid",opacity:1,position:"absolute",top:0,left:0,width:0,height:0},this._ctx={group:null,groupID:"pts",groupCount:0,currentID:"pts0",currentClass:"",style:{}},this._ready=!1,this._space=e,this._space.add({start:()=>{this._ctx.group=this._space.element,this._ctx.groupID="pts_dom_"+Re.groupID++,this._ctx.style=Object.assign({},this._style),this._ready=!0}})}get space(){return this._space}styleTo(e,t,r=""){if(this._ctx.style[e]===void 0)throw new Error(`${e} style property doesn't exist`);this._ctx.style[e]=`${t}${r}`}alpha(e){return this.styleTo("opacity",e),this}fill(e){return typeof e=="boolean"?(this.styleTo("filled",e),e||this.styleTo("background","transparent")):(this.styleTo("filled",!0),this.styleTo("background",e)),this}stroke(e,t,r,n){return typeof e=="boolean"?(this.styleTo("stroked",e),e||this.styleTo("border-width",0)):(this.styleTo("stroked",!0),this.styleTo("border-color",e),this.styleTo("border-width",(t||1)+"px")),this}fillText(e){return this.styleTo("color",e),this}cls(e){return typeof e=="boolean"?this._ctx.currentClass="":this._ctx.currentClass=e,this}font(e,t,r,n,i){return typeof e=="number"?(this._font.size=e,i&&(this._font.face=i),t&&(this._font.weight=t),r&&(this._font.style=r),n&&(this._font.lineHeight=n)):this._font=e,this._ctx.style.font=this._font.value,this}reset(){return this._ctx.style=Object.assign({},this._style),this._font=new En(10,"sans-serif"),this._ctx.style.font=this._font.value,this}updateScope(e,t){return this._ctx.group=t,this._ctx.groupID=e,this._ctx.groupCount=0,this.nextID(),this._ctx}scope(e){if(!e||e.animateID==null)throw new Error("item not defined or not yet added to Space");return this.updateScope(Re.scopeID(e),this.space.element)}nextID(){return this._ctx.groupCount++,this._ctx.currentID=`${this._ctx.groupID}-${this._ctx.groupCount}`,this._ctx.currentID}static getID(e){return e.currentID||`p-${Re.domID++}`}static scopeID(e){return`item-${e.animateID}`}static style(e,t){let r=[];t.filled||r.push("background: none"),t.stroked||r.push("border: none");for(let n in t)if(t.hasOwnProperty(n)&&n!="filled"&&n!="stroked"){let i=t[n];if(i){if(!t.filled&&n.indexOf("background")===0)continue;if(!t.stroked&&n.indexOf("border-width")===0)continue;r.push(`${n}: ${i}`)}}return Rt.setAttr(e,{style:r.join(";")})}static rectStyle(e,t,r){return e.style.left=t[0]+"px",e.style.top=t[1]+"px",e.style.width=r[0]+"px",e.style.height=r[1]+"px",e}static textStyle(e,t){return e.style.left=t[0]+"px",e.style.top=t[1]+"px",e}static point(e,t,r=5,n="square"){return n==="circle"?Re.circle(e,t,r):Re.square(e,t,r)}point(e,t=5,r="square"){return this.nextID(),r=="circle"&&this.styleTo("border-radius","100%"),Re.point(this._ctx,e,t,r),this}static circle(e,t,r=10){let n=Rt.htmlElement(e.group,"div",Re.getID(e));return Rt.setAttr(n,{class:`pts-form pts-circle ${e.currentClass}`}),Re.rectStyle(e,new E(t).$subtract(r),new E(r*2,r*2)),Re.style(n,e.style),n}circle(e){return this.nextID(),this.styleTo("border-radius","100%"),Re.circle(this._ctx,e[0],e[1][0]),this}static square(e,t,r){let n=Rt.htmlElement(e.group,"div",Re.getID(e));return Rt.setAttr(n,{class:`pts-form pts-square ${e.currentClass}`}),Re.rectStyle(e,new E(t).$subtract(r),new E(r*2,r*2)),Re.style(n,e.style),n}square(e,t){return this.nextID(),Re.square(this._ctx,e,t),this}static rect(e,t){let r=T.iterToArray(t);if(!T.arrayCheck(r))return;let n=Rt.htmlElement(e.group,"div",Re.getID(e));return Rt.setAttr(n,{class:`pts-form pts-rect ${e.currentClass}`}),Re.rectStyle(e,r[0],r[1]),Re.style(n,e.style),n}rect(e){return this.nextID(),this.styleTo("border-radius","0"),Re.rect(this._ctx,e),this}static text(e,t,r){let n=Rt.htmlElement(e.group,"div",Re.getID(e));return Rt.setAttr(n,{class:`pts-form pts-text ${e.currentClass}`}),n.textContent=r,Re.textStyle(e,t),Re.style(n,e.style),n}text(e,t){return this.nextID(),Re.text(this._ctx,e,t),this}log(e){return this.fill("#000").stroke("#fff",.5).text([10,14],e),this}arc(e,t,r,n,i){return T.warn("arc is not implemented in HTMLForm"),this}line(e){return T.warn("line is not implemented in HTMLForm"),this}polygon(e){return T.warn("polygon is not implemented in HTMLForm"),this}},gn=Re;gn.groupID=0;gn.domID=0;var Tt=class extends lt{constructor(e,t){if(super(e,t),this._bgcolor="#999",this._canvas.nodeName.toLowerCase()!="svg"){let r=Tt.svgElement(this._canvas,"svg",`${this.id}_svg`);this._container=this._canvas,this._canvas=r}}getForm(){return new vn(this)}get element(){return this._canvas}resize(e,t){return super.resize(e,t),Tt.setAttr(this.element,{viewBox:`0 0 ${this.bound.width} ${this.bound.height}`,width:`${this.bound.width}`,height:`${this.bound.height}`,xmlns:"http://www.w3.org/2000/svg",version:"1.1"}),this}static svgElement(e,t,r){if(!e||!e.appendChild)throw new Error("parent is not a valid DOM element");let n=document.querySelector(`#${r}`);return n||(n=document.createElementNS("http://www.w3.org/2000/svg",t),n.setAttribute("id",r),e.appendChild(n)),n}remove(e){return this._container.querySelectorAll("."+vn.scopeID(e)).forEach(r=>{r.parentNode.removeChild(r)}),super.remove(e)}removeAll(){return this._container.innerHTML="",super.removeAll()}},he=class extends Mi{constructor(e){super(),this._style={filled:!0,stroked:!0,fill:"#f03",stroke:"#fff","stroke-width":1,"stroke-linejoin":"bevel","stroke-linecap":"sqaure",opacity:1},this._ctx={group:null,groupID:"pts",groupCount:0,currentID:"pts0",currentClass:"",style:{}},this._ready=!1,this._space=e,this._space.add({start:()=>{this._ctx.group=this._space.element,this._ctx.groupID="pts_svg_"+he.groupID++,this._ctx.style=Object.assign({},this._style),this._ready=!0}})}get space(){return this._space}styleTo(e,t){if(this._ctx.style[e]===void 0)throw new Error(`${e} style property doesn't exist`);this._ctx.style[e]=t}alpha(e){return this.styleTo("opacity",e),this}fill(e){return typeof e=="boolean"?this.styleTo("filled",e):(this.styleTo("filled",!0),this.styleTo("fill",e)),this}stroke(e,t,r,n){return typeof e=="boolean"?this.styleTo("stroked",e):(this.styleTo("stroked",!0),this.styleTo("stroke",e),t&&this.styleTo("stroke-width",t),r&&this.styleTo("stroke-linejoin",r),n&&this.styleTo("stroke-linecap",n)),this}cls(e){return typeof e=="boolean"?this._ctx.currentClass="":this._ctx.currentClass=e,this}font(e,t,r,n,i){return typeof e=="number"?(this._font.size=e,i&&(this._font.face=i),t&&(this._font.weight=t),r&&(this._font.style=r),n&&(this._font.lineHeight=n)):this._font=e,this._ctx.style.font=this._font.value,this}reset(){return this._ctx.style=Object.assign({},this._style),this._font=new En(10,"sans-serif"),this._ctx.style.font=this._font.value,this}updateScope(e,t){return this._ctx.group=t,this._ctx.groupID=e,this._ctx.groupCount=0,this.nextID(),this._ctx}scope(e){if(!e||e.animateID==null)throw new Error("item not defined or not yet added to Space");return this.updateScope(he.scopeID(e),this.space.element)}nextID(){return this._ctx.groupCount++,this._ctx.currentID=`${this._ctx.groupID}-${this._ctx.groupCount}`,this._ctx.currentID}static getID(e){return e.currentID||`p-${he.domID++}`}static scopeID(e){return`item-${e.animateID}`}static style(e,t){let r=[];t.filled||r.push("fill: none"),t.stroked||r.push("stroke: none");for(let n in t)if(t.hasOwnProperty(n)&&n!="filled"&&n!="stroked"){let i=t[n];if(i){if(!t.filled&&n.indexOf("fill")===0)continue;if(!t.stroked&&n.indexOf("stroke")===0)continue;r.push(`${n}: ${i}`)}}return lt.setAttr(e,{style:r.join(";")})}static point(e,t,r=5,n="square"){return n==="circle"?he.circle(e,t,r):he.square(e,t,r)}point(e,t=5,r="square"){return this.nextID(),he.point(this._ctx,e,t,r),this}static circle(e,t,r=10){let n=Tt.svgElement(e.group,"circle",he.getID(e));return lt.setAttr(n,{cx:t[0],cy:t[1],r,class:`pts-svgform pts-circle ${e.currentClass}`}),he.style(n,e.style),n}circle(e){this.nextID();let t=T.iterToArray(e);return he.circle(this._ctx,t[0],t[1][0]),this}static arc(e,t,r,n,i,s){let o=Tt.svgElement(e.group,"path",he.getID(e));const a=new E(t).toAngle(n,r,!0),l=new E(t).toAngle(i,r,!0);let d=Q.boundAngle(i)-Q.boundAngle(n)>we.pi;s&&(d=!d);const h=s?"0":"1",f=`M ${a[0]} ${a[1]} A ${r} ${r} 0 ${d?"1":"0"} ${h} ${l[0]} ${l[1]}`;return lt.setAttr(o,{d:f,class:`pts-svgform pts-arc ${e.currentClass}`}),he.style(o,e.style),o}arc(e,t,r,n,i){return this.nextID(),he.arc(this._ctx,e,t,r,n,i),this}static square(e,t,r){let n=Tt.svgElement(e.group,"rect",he.getID(e));return lt.setAttr(n,{x:t[0]-r,y:t[1]-r,width:r*2,height:r*2,class:`pts-svgform pts-square ${e.currentClass}`}),he.style(n,e.style),n}square(e,t){return this.nextID(),he.square(this._ctx,e,t),this}static line(e,t){let r=he.pointsString(t);if(r.count<2)return;if(r.count>2)return he._poly(e,r.string,!1);let n=Tt.svgElement(e.group,"line",he.getID(e)),i=T.iterToArray(t);return lt.setAttr(n,{x1:i[0][0],y1:i[0][1],x2:i[1][0],y2:i[1][1],class:`pts-svgform pts-line ${e.currentClass}`}),he.style(n,e.style),n}line(e){return this.nextID(),he.line(this._ctx,e),this}static _poly(e,t,r=!0){let n=Tt.svgElement(e.group,r?"polygon":"polyline",he.getID(e));return lt.setAttr(n,{points:t,class:`pts-svgform pts-polygon ${e.currentClass}`}),he.style(n,e.style),n}static pointsString(e){let t="",r=0;for(let n of e)t+=`${n[0]},${n[1]} `,r++;return{string:t,count:r}}static polygon(e,t){let r=he.pointsString(t);return he._poly(e,r.string,!0)}polygon(e){return this.nextID(),he.polygon(this._ctx,e),this}static rect(e,t){if(!T.arrayCheck(t))return;let r=Tt.svgElement(e.group,"rect",he.getID(e)),n=k.fromArray(t).boundingBox(),i=ve.size(n);return lt.setAttr(r,{x:n[0][0],y:n[0][1],width:i[0],height:i[1],class:`pts-svgform pts-rect ${e.currentClass}`}),he.style(r,e.style),r}rect(e){return this.nextID(),he.rect(this._ctx,e),this}static text(e,t,r){let n=Tt.svgElement(e.group,"text",he.getID(e));return lt.setAttr(n,{"pointer-events":"none",x:t[0],y:t[1],dx:0,dy:0,class:`pts-svgform pts-text ${e.currentClass}`}),n.textContent=r,he.style(n,e.style),n}text(e,t){return this.nextID(),he.text(this._ctx,e,t),this}log(e){return this.fill("#000").stroke("#fff",.5).text([10,14],e),this}},vn=he;vn.groupID=0;vn.domID=0;/*! Pts.js is licensed under Apache License 2.0. Copyright © 2017-current William Ngan and contributors. (https://github.com/williamngan/pts) */const Ou=({currentSection:e})=>{const t=u.useRef(null),r=u.useRef(null),n=u.useRef(null),i=u.useRef(0);return u.useEffect(()=>{if(!t.current)return;r.current=new Vu(t.current).setup({bgcolor:"transparent",resize:!0,retina:!0,offscreen:!1});const s=r.current,o=s.getForm(),a=Ts.distributeRandom(s.innerBound,150);n.current=a;const l={hero:["#9ECFD0","#7A9E9F","#506C7F"].map(p=>`${p}CC`),"vision-solutions":["#7A9E9F","#9ECFD0","#506C7F"].map(p=>`${p}CC`),manifesto:["#506C7F","#7A9E9F","#9ECFD0"].map(p=>`${p}CC`)},c=p=>p.x<0||p.x>s.width||p.y<0||p.y>s.height;let d=!1;const h=(p,y)=>{if(d)return;const b=l[e]||l.hero,x=n.current;if(x){i.current+=.01,o.composite("screen"),e==="hero"?x.forEach((C,w)=>{const M=Ce.randomRange(-1,1),R=(M+i.current)*Math.PI*2;C.add(new E(Math.cos(R),Math.sin(R)).multiply(.8)),o.fillOnly(b[w%3]).point(C,2+Math.abs(M)),c(C)&&C.to(s.center)}):e==="vision-solutions"?x.forEach((C,w)=>{const M=C.$subtract(s.pointer).magnitude(),R=Ce.randomRange(-1,1),P=(R+i.current)*Math.PI;C.rotate2D(P*.15,s.center),M<100&&C.add(C.$subtract(s.pointer).normalize().multiply(1.5)),o.fillOnly(b[w%3]).point(C,2.5+Math.abs(R)),c(C)&&C.to(s.center)}):e==="manifesto"&&x.forEach((C,w)=>{const M=C.$subtract(s.center).magnitude();C.rotate2D(M*.003,s.center);const R=Ce.randomRange(-1,1);o.fillOnly(b[w%3]).point(C,2+Math.abs(R)*2),M>s.size.minValue()*.6&&C.to(s.center)}),o.composite("screen");for(let C=0;C<x.length;C++)for(let w=C+1;w<x.length;w++){const M=x[C].$subtract(x[w]).magnitude();if(M<100){const R=1-M/100;o.stroke(`rgba(158, 207, 208, ${R*.3})`).line([x[C],x[w]])}}}};s.add({animate:h});const f=()=>{d||(n.current=Ts.distributeRandom(s.innerBound,150))};return s.bindMouse().bindTouch().play(),window.addEventListener("resize",f),()=>{if(d=!0,window.removeEventListener("resize",f),n.current&&(n.current.length=0,n.current=null),r.current&&(r.current.removeAll(),r.current.stop(),r.current.dispose(),r.current=null),t.current){const p=t.current.getContext("2d");p&&p.clearRect(0,0,t.current.width,t.current.height)}}},[e]),m.jsx("canvas",{ref:t,className:"pts-canvas",style:{position:"absolute",inset:0,width:"100%",height:"100%",zIndex:2,mixBlendMode:"screen",opacity:.8,pointerEvents:"none"}})};var Hu=Object.defineProperty,ko=(e,t)=>{for(var r in t)Hu(e,r,{get:t[r],enumerable:!0,configurable:!0,set:n=>t[r]=()=>n})};if(typeof u.createContext!="function"){const e=['Remotion requires React.createContext, but it is "undefined".','If you are in a React Server Component, turn it into a client component by adding "use client" at the top of the file.',"","Before:",'  import {useCurrentFrame} from "remotion";',"","After:",'  "use client";','  import {useCurrentFrame} from "remotion";'];throw new Error(e.join(`
`))}function Ps(){return["NOD","E_EN","V"].join("")}var Ds=()=>["e","nv"].join(""),Ue=()=>{const e=typeof window<"u"&&window.remotion_isPlayer,t=typeof window<"u"&&typeof window.process<"u"&&typeof window.process.env<"u"&&(window.process[Ds()][Ps()]==="test"||window.process[Ds()][Ps()]==="production"&&typeof window<"u"&&typeof window.remotion_puppeteerTimeout<"u");return{isStudio:typeof window<"u"&&window.remotion_isStudio,isRendering:t,isPlayer:e}},Wu=J.createElement,Ao=[],$o=()=>{if(!Ue().isStudio)return;const e=new Proxy(Wu,{apply(t,r,n){if(Ao.includes(n[0])){const[i,s,...o]=n,a={...s??{},stack:new Error().stack};return Reflect.apply(t,r,[i,a,...o])}return Reflect.apply(t,r,n)}});J.createElement=e},zr=e=>{Ao.push(e),$o()},Fo=u.createContext(!1),qu=({children:e})=>m.jsx(Fo.Provider,{value:!0,children:e}),Ri=()=>u.useContext(Fo);function Ti(e){return!!e}var tn="4.0.230",Yu=()=>{if(typeof globalThis>"u")return;const e=globalThis.remotion_imported||typeof window<"u"&&window.remotion_imported;if(e){if(e===tn)return;throw new TypeError(`🚨 Multiple versions of Remotion detected: ${[tn,typeof e=="string"?e:"an older version"].filter(Ti).join(" and ")}. This will cause things to break in an unexpected way.
Check that all your Remotion packages are on the same version. If your dependencies depend on Remotion, make them peer dependencies. You can also run \`npx remotion versions\` from your terminal to see which versions are mismatching.`)}globalThis.remotion_imported=tn,typeof window<"u"&&(window.remotion_imported=tn)},Gu=(e,t)=>{const{style:r,...n}=e,i=u.useMemo(()=>({position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",...r}),[r]);return m.jsx("div",{ref:t,style:i,...n})},Pi=u.forwardRef(Gu),Ke=u.createContext(null),dr=J.createContext({registerSequence:()=>{throw new Error("SequenceManagerContext not initialized")},unregisterSequence:()=>{throw new Error("SequenceManagerContext not initialized")},sequences:[]}),Br=J.createContext({hidden:{},setHidden:()=>{throw new Error("SequenceVisibilityToggle not initialized")}}),Xu=({children:e})=>{const[t,r]=u.useState([]),[n,i]=u.useState({}),s=u.useCallback(c=>{r(d=>[...d,c])},[]),o=u.useCallback(c=>{r(d=>d.filter(h=>h.id!==c))},[]),a=u.useMemo(()=>({registerSequence:s,sequences:t,unregisterSequence:o}),[s,t,o]),l=u.useMemo(()=>({hidden:n,setHidden:i}),[n]);return m.jsx(dr.Provider,{value:a,children:m.jsx(Br.Provider,{value:l,children:e})})},hr=u.createContext({getNonce:()=>0,fastRefreshes:0}),Di=()=>{const e=u.useContext(hr),[t,r]=u.useState(()=>e.getNonce()),n=u.useRef(e);return u.useEffect(()=>{n.current!==e&&(n.current=e,r(e.getNonce))},[e]),t},Lo={};ko(Lo,{useTimelineSetFrame:()=>Xo,useTimelinePosition:()=>mr,usePlayingState:()=>Fi,persistCurrentFrame:()=>qo,getInitialFrameState:()=>Yo,getFrameForComposition:()=>Go,TimelineContext:()=>gt,SetTimelineContext:()=>fr});var jt=u.createContext({compositions:[],registerComposition:()=>{},unregisterComposition:()=>{},registerFolder:()=>{},unregisterFolder:()=>{},setCurrentCompositionMetadata:()=>{},updateCompositionDefaultProps:()=>{},folders:[],currentCompositionMetadata:null,canvasContent:null,setCanvasContent:()=>{}}),Sn=u.createContext({props:{},updateProps:()=>{throw new Error("Not implemented")},resetUnsaved:()=>{throw new Error("Not implemented")}}),Io=J.createRef(),jo=({children:e})=>{const[t,r]=J.useState({}),n=u.useCallback(({defaultProps:o,id:a,newProps:l})=>{r(c=>({...c,[a]:typeof l=="function"?l(c[a]??o):l}))},[]),i=u.useCallback(()=>{r({})},[]);u.useImperativeHandle(Io,()=>({getProps:()=>t,setProps:r}),[t]);const s=u.useMemo(()=>({props:t,updateProps:n,resetUnsaved:i}),[t,i,n]);return m.jsx(Sn.Provider,{value:s,children:e})},Zu={"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";"},ks={},Ku=e=>{ks[e]||(console.warn(e),ks[e]=!0)},Ju=e=>{for(const t of Object.keys(Zu))if(e.includes(t))return{containsHex:!0,hexCode:t};return{containsHex:!1}},ii=e=>e.startsWith("/")?ii(e.substring(1)):e,Qu=e=>{if(typeof window<"u"&&window.remotion_staticBase){if(e.startsWith(window.remotion_staticBase))throw new Error(`The value "${e}" is already prefixed with the static base ${window.remotion_staticBase}. You don't need to call staticFile() on it.`);return`${window.remotion_staticBase}/${ii(e)}`}return`/${ii(e)}`},ec=e=>e.split("/").map(i=>encodeURIComponent(i)).join("/"),tc=e=>{if(e===null)throw new TypeError("null was passed to staticFile()");if(typeof e>"u")throw new TypeError("undefined was passed to staticFile()");if(e.startsWith("http://")||e.startsWith("https://"))throw new TypeError(`staticFile() does not support remote URLs - got "${e}". Instead, pass the URL without wrapping it in staticFile(). See: https://remotion.dev/docs/staticfile-remote-urls`);if(e.startsWith("..")||e.startsWith("./"))throw new TypeError(`staticFile() does not support relative paths - got "${e}". Instead, pass the name of a file that is inside the public/ folder. See: https://remotion.dev/docs/staticfile-relative-paths`);if(e.startsWith("/Users")||e.startsWith("/home")||e.startsWith("/tmp")||e.startsWith("/etc")||e.startsWith("/opt")||e.startsWith("/var")||e.startsWith("C:")||e.startsWith("D:")||e.startsWith("E:"))throw new TypeError(`staticFile() does not support absolute paths - got "${e}". Instead, pass the name of a file that is inside the public/ folder. See: https://remotion.dev/docs/staticfile-relative-paths`);if(e.startsWith("public/"))throw new TypeError(`Do not include the public/ prefix when using staticFile() - got "${e}". See: https://remotion.dev/docs/staticfile-relative-paths`);const t=Ju(e);t.containsHex&&Ku(`WARNING: You seem to pass an already encoded path (path contains ${t.hexCode}). Since Remotion 4.0, the encoding is done by staticFile() itself. You may want to remove a encodeURIComponent() wrapping.`);const r=ec(e),n=Qu(r);return n.startsWith("/")?n:`/${n}`},si="remotion-date:",oi="remotion-file:",rc=({data:e,indent:t,staticBase:r})=>{let n=!1,i=!1,s=!1,o=!1;try{return{serializedString:JSON.stringify(e,function(l,c){const d=this[l];return d instanceof Date?(n=!0,`${si}${d.toISOString()}`):d instanceof Map?(s=!0,c):d instanceof Set?(o=!0,c):typeof d=="string"&&r!==null&&d.startsWith(r)?(i=!0,`${oi}${d.replace(r+"/","")}`):c},t),customDateUsed:n,customFileUsed:i,mapUsed:s,setUsed:o}}catch(a){throw new Error("Could not serialize the passed input props to JSON: "+a.message)}},No=e=>JSON.parse(e,(t,r)=>typeof r=="string"&&r.startsWith(si)?new Date(r.replace(si,"")):typeof r=="string"&&r.startsWith(oi)?tc(r.replace(oi,"")):r),Ut=e=>Ue().isStudio?No(rc({data:e,indent:2,staticBase:window.remotion_staticBase}).serializedString):e,As=!1,nc=()=>{As||(As=!0,console.warn("Called `getInputProps()` on the server. This function is not available server-side and has returned an empty object."),console.warn("To hide this warning, don't call this function on the server:"),console.warn("  typeof window === 'undefined' ? {} : getInputProps()"))},zo=()=>{if(typeof window>"u")return nc(),{};if(Ue().isPlayer)throw new Error("You cannot call `getInputProps()` from a <Player>. Instead, the props are available as React props from component that you passed as `component` prop.");const e=window.remotion_inputProps;return e?No(e):{}},$s=["h264","h265","vp8","vp9","mp3","aac","wav","prores","h264-mkv","h264-ts","gif"];function ic(e,t){if(!(typeof e>"u")){if(typeof e!="string")throw new TypeError(`The "defaultCodec" prop ${t} must be a string, but you passed a value of type ${typeof e}.`);if(!$s.includes(e))throw new Error(`The "defaultCodec" prop ${t} must be one of ${$s.join(", ")}, but you passed ${e}.`)}}function yn(e,t,r){if(typeof e!="number")throw new Error(`The "${t}" prop ${r} must be a number, but you passed a value of type ${typeof e}`);if(isNaN(e))throw new TypeError(`The "${t}" prop ${r} must not be NaN, but is NaN.`);if(!Number.isFinite(e))throw new TypeError(`The "${t}" prop ${r} must be finite, but is ${e}.`);if(e%1!==0)throw new TypeError(`The "${t}" prop ${r} must be an integer, but is ${e}.`);if(e<=0)throw new TypeError(`The "${t}" prop ${r} must be positive, but got ${e}.`)}function ki(e,t){const{allowFloats:r,component:n}=t;if(typeof e>"u")throw new Error(`The "durationInFrames" prop ${n} is missing.`);if(typeof e!="number")throw new Error(`The "durationInFrames" prop ${n} must be a number, but you passed a value of type ${typeof e}`);if(e<=0)throw new TypeError(`The "durationInFrames" prop ${n} must be positive, but got ${e}.`);if(!r&&e%1!==0)throw new TypeError(`The "durationInFrames" prop ${n} must be an integer, but got ${e}.`);if(!Number.isFinite(e))throw new TypeError(`The "durationInFrames" prop ${n} must be finite, but got ${e}.`)}function Bo(e,t,r){if(typeof e!="number")throw new Error(`"fps" must be a number, but you passed a value of type ${typeof e} ${t}`);if(!Number.isFinite(e))throw new Error(`"fps" must be a finite, but you passed ${e} ${t}`);if(isNaN(e))throw new Error(`"fps" must not be NaN, but got ${e} ${t}`);if(e<=0)throw new TypeError(`"fps" must be positive, but got ${e} ${t}`)}var Fs=({calculated:e,compositionId:t,compositionFps:r,compositionHeight:n,compositionWidth:i,compositionDurationInFrames:s})=>{const o=`calculated by calculateMetadata() for the composition "${t}"`,a=`of the "<Composition />" component with the id "${t}"`,l=e?.width??i??void 0;yn(l,"width",e?.width?o:a);const c=e?.height??n??void 0;yn(c,"height",e?.height?o:a);const d=e?.fps??r??null;Bo(d,e?.fps?o:a);const h=e?.durationInFrames??s??null;ki(h,{allowFloats:!1,component:`of the "<Composition />" component with the id "${t}"`});const f=e?.defaultCodec;return ic(f,o),{width:l,height:c,fps:d,durationInFrames:h,defaultCodec:f}},Vo=({calculateMetadata:e,signal:t,defaultProps:r,originalProps:n,compositionId:i,compositionDurationInFrames:s,compositionFps:o,compositionHeight:a,compositionWidth:l})=>{const c=e?e({defaultProps:r,props:n,abortSignal:t,compositionId:i}):null;if(c!==null&&typeof c=="object"&&"then"in c)return c.then(h=>{const{height:f,width:p,durationInFrames:y,fps:b,defaultCodec:x}=Fs({calculated:h,compositionDurationInFrames:s,compositionFps:o,compositionHeight:a,compositionWidth:l,compositionId:i});return{width:p,height:f,fps:b,durationInFrames:y,id:i,defaultProps:Ut(r),props:Ut(h.props??n),defaultCodec:x??null}});const d=Fs({calculated:c,compositionDurationInFrames:s,compositionFps:o,compositionHeight:a,compositionWidth:l,compositionId:i});return c===null?{...d,id:i,defaultProps:Ut(r??{}),props:Ut(n),defaultCodec:null}:{...d,id:i,defaultProps:Ut(r??{}),props:Ut(c.props??n),defaultCodec:c.defaultCodec??null}},sc=e=>{try{return{type:"success",result:Vo(e)}}catch(t){return{type:"error",error:t}}},Mn=u.createContext(null),Uo=u.createRef(),Oo=e=>!!e.calculateMetadata,Ho="remotion.propsUpdatedExternally",Wo=({children:e})=>{const[t,r]=u.useState(null),{compositions:n,canvasContent:i,currentCompositionMetadata:s}=u.useContext(jt),{fastRefreshes:o}=u.useContext(hr),a=u.useMemo(()=>n.find(D=>i&&i.type==="composition"&&i.compositionId===D.id),[i,n]),l=n.find(D=>D.id===t),{props:c}=u.useContext(Sn),d=u.useMemo(()=>typeof window>"u"||Ue().isPlayer?{}:zo()??{},[]),[h,f]=u.useState({}),p=u.useMemo(()=>a?c[a.id]??{}:{},[c,a]),y=u.useMemo(()=>l?c[l.id]??{}:{},[c,l]),b=!!s,x=u.useCallback(({calculateMetadata:D,combinedProps:F,compositionDurationInFrames:$,compositionFps:N,compositionHeight:L,compositionId:j,compositionWidth:H,defaultProps:ne})=>{const V=new AbortController;if(b)return V;const{signal:Z}=V,ge=sc({compositionId:j,calculateMetadata:D,originalProps:F,signal:Z,defaultProps:ne,compositionDurationInFrames:$,compositionFps:N,compositionHeight:L,compositionWidth:H});if(ge.type==="error")return f(ie=>({...ie,[j]:{type:"error",error:ge.error}})),V;const X=ge.result;return typeof X=="object"&&"then"in X?(f(ie=>{const ee=ie[j];return ee?.type==="success"||ee?.type==="success-and-refreshing"?{...ie,[j]:{type:"success-and-refreshing",result:ee.result}}:{...ie,[j]:{type:"loading"}}}),X.then(ie=>{V.signal.aborted||f(ee=>({...ee,[j]:{type:"success",result:ie}}))}).catch(ie=>{V.signal.aborted||f(ee=>({...ee,[j]:{type:"error",error:ie}}))})):f(ie=>({...ie,[j]:{type:"success",result:X}})),V},[b]),C=i?.type==="composition"?i.compositionId:null;u.useImperativeHandle(Uo,()=>({setCurrentRenderModalComposition:D=>{r(D)},reloadCurrentlySelectedComposition:()=>{if(!C)return;const D=n.find(L=>L.id===C);if(!D)throw new Error(`Could not find composition with id ${C}`);const F=c[C]??{},$={...D.defaultProps??{},...F??{}},N={...$,...d??{}};x({defaultProps:$,calculateMetadata:D.calculateMetadata,combinedProps:N,compositionDurationInFrames:D.durationInFrames??null,compositionFps:D.fps??null,compositionHeight:D.height??null,compositionWidth:D.width??null,compositionId:D.id})}}),[c,n,C,x,d]);const w=a?.id===l?.id,M=u.useMemo(()=>({...a?.defaultProps??{},...p??{}}),[a?.defaultProps,p]),R=u.useMemo(()=>({...M,...d??{}}),[M,d]),P=a&&Oo(a),v=typeof window<"u"&&window.remotion_ignoreFastRefreshUpdate&&o<=window.remotion_ignoreFastRefreshUpdate;u.useEffect(()=>{if(!v&&P){const D=x({calculateMetadata:a.calculateMetadata,combinedProps:R,compositionDurationInFrames:a.durationInFrames??null,compositionFps:a.fps??null,compositionHeight:a.height??null,compositionWidth:a.width??null,defaultProps:M,compositionId:a.id});return()=>{D.abort()}}},[P,M,x,R,a?.calculateMetadata,a?.durationInFrames,a?.fps,a?.height,a?.id,a?.width,v]),u.useEffect(()=>{v||window.dispatchEvent(new CustomEvent(Ho,{detail:{resetUnsaved:!0}}))},[o]),u.useEffect(()=>{if(l&&!w){const D={...l.defaultProps??{},...y??{},...d??{}},F=x({calculateMetadata:l.calculateMetadata,compositionDurationInFrames:l.durationInFrames??null,compositionFps:l.fps??null,compositionHeight:l.height??null,compositionId:l.id,compositionWidth:l.width??null,defaultProps:M,combinedProps:D});return()=>{F.abort()}}},[M,x,d,w,l,y]);const I=u.useMemo(()=>{const D=n.filter(F=>F.calculateMetadata===null);return{...h,...D.reduce((F,$)=>({...F,[$.id]:{type:"success",result:{...$,defaultProps:$.defaultProps??{}}}}),{})}},[n,h]);return m.jsx(Mn.Provider,{value:I,children:e})},Ai=e=>{const t=u.useContext(Mn),{props:r}=u.useContext(Sn),{compositions:n,canvasContent:i,currentCompositionMetadata:s}=u.useContext(jt),o=i?.type==="composition"?i.compositionId:null,a=e??o,l=n.find(d=>d.id===a),c=u.useMemo(()=>l?r[l.id]??{}:{},[r,l]);return u.useMemo(()=>l?s?{type:"success",result:{...s,id:l.id,props:s.props,defaultProps:l.defaultProps??{},defaultCodec:s.defaultCodec}}:Oo(l)?t[l.id]?t[l.id]:null:(ki(l.durationInFrames,{allowFloats:!1,component:`in <Composition id="${l.id}">`}),Bo(l.fps,`in <Composition id="${l.id}">`),yn(l.width,"width",`in <Composition id="${l.id}">`),yn(l.height,"height",`in <Composition id="${l.id}">`),{type:"success",result:{width:l.width,height:l.height,fps:l.fps,id:l.id,durationInFrames:l.durationInFrames,defaultProps:l.defaultProps??{},props:{...l.defaultProps??{},...c??{},...typeof window>"u"||Ue().isPlayer?{}:zo()??{}},defaultCodec:null}}):null,[l,t,s,c])},Rn=()=>{const{canvasContent:e,compositions:t,currentCompositionMetadata:r}=u.useContext(jt),n=t.find(s=>e?.type==="composition"&&s.id===e.compositionId),i=Ai(n?.id??null);return u.useMemo(()=>!i||i.type==="error"||i.type==="loading"||!n?null:{...i.result,defaultProps:n.defaultProps??{},id:n.id,...r??{},component:n.component},[r,i,n])},gt=u.createContext({frame:{},playing:!1,playbackRate:1,rootId:"",imperativePlaying:{current:!1},setPlaybackRate:()=>{throw new Error("default")},audioAndVideoTags:{current:[]}}),fr=u.createContext({setFrame:()=>{throw new Error("default")},setPlaying:()=>{throw new Error("default")}}),$i=()=>"remotion.time-all",qo=e=>{localStorage.setItem($i(),JSON.stringify(e))},Yo=()=>{const e=localStorage.getItem($i())??"{}";return JSON.parse(e)},Go=e=>{const t=localStorage.getItem($i())??"{}",r=JSON.parse(t);return r[e]!==void 0?Number(r[e]):typeof window>"u"?0:window.remotion_initialFrame??0},mr=()=>{const e=Rn(),t=u.useContext(gt);if(!e)return typeof window>"u"?0:window.remotion_initialFrame??0;const r=t.frame[e.id]??(Ue().isPlayer?0:Go(e.id));return Math.min(e.durationInFrames-1,r)},Xo=()=>{const{setFrame:e}=u.useContext(fr);return e},Fi=()=>{const{playing:e,imperativePlaying:t}=u.useContext(gt),{setPlaying:r}=u.useContext(fr);return u.useMemo(()=>[e,r,t],[t,e,r])},Jt=u.createContext(!1),ai=({children:e})=>m.jsx(Jt.Provider,{value:!0,children:e}),Li=()=>{const e=u.useContext(Ke),t=e?.width??null,r=e?.height??null,n=e?.durationInFrames??null,i=Rn();return u.useMemo(()=>{if(!i)return null;const{id:s,durationInFrames:o,fps:a,height:l,width:c,defaultProps:d,props:h,defaultCodec:f}=i;return{id:s,width:t??c,height:r??l,fps:a,durationInFrames:n??o,defaultProps:d,props:h,defaultCodec:f}},[n,r,t,i])},Nt=()=>{const e=Li(),t=u.useContext(Jt),r=Ri();if(!e)throw typeof window<"u"&&window.remotion_isPlayer||r?new Error(["No video config found. Likely reasons:","- You are probably calling useVideoConfig() from outside the component passed to <Player />. See https://www.remotion.dev/docs/player/examples for how to set up the Player correctly.","- You have multiple versions of Remotion installed which causes the React context to get lost."].join("-")):new Error("No video config found. You are probably calling useVideoConfig() from a component which has not been registered as a <Composition />. See https://www.remotion.dev/docs/the-fundamentals#defining-compositions for more information.");if(!t)throw new Error("Called useVideoConfig() outside a Remotion composition.");return e},Qt=()=>{if(!u.useContext(Jt))throw Ue().isPlayer?new Error("useCurrentFrame can only be called inside a component that was passed to <Player>. See: https://www.remotion.dev/docs/player/examples"):new Error("useCurrentFrame() can only be called inside a component that was registered as a composition. See https://www.remotion.dev/docs/the-fundamentals#defining-compositions");const t=mr(),r=u.useContext(Ke),n=r?r.cumulatedFrom+r.relativeFrom:0;return t-n},oc=({frame:e,children:t,active:r=!0})=>{const n=Qt(),i=Nt();if(typeof e>"u")throw new Error("The <Freeze /> component requires a 'frame' prop, but none was passed.");if(typeof e!="number")throw new Error(`The 'frame' prop of <Freeze /> must be a number, but is of type ${typeof e}`);if(Number.isNaN(e))throw new Error("The 'frame' prop of <Freeze /> must be a real number, but it is NaN.");if(!Number.isFinite(e))throw new Error(`The 'frame' prop of <Freeze /> must be a finite number, but it is ${e}.`);const s=u.useMemo(()=>{if(typeof r=="boolean")return r;if(typeof r=="function")return r(n)},[r,n]),o=u.useContext(gt),l=u.useContext(Ke)?.relativeFrom??0,c=u.useMemo(()=>s?{...o,playing:!1,imperativePlaying:{current:!1},frame:{[i.id]:e+l}}:o,[s,o,i.id,e,l]);return m.jsx(gt.Provider,{value:c,children:t})},ac=({from:e=0,durationInFrames:t=1/0,children:r,name:n,height:i,width:s,showInTimeline:o=!0,_remotionInternalLoopDisplay:a,_remotionInternalStack:l,_remotionInternalPremountDisplay:c,...d},h)=>{const{layout:f="absolute-fill"}=d,[p]=u.useState(()=>String(Math.random())),y=u.useContext(Ke),{rootId:b}=u.useContext(gt),x=y?y.cumulatedFrom+y.relativeFrom:0,C=Di();if(f!=="absolute-fill"&&f!=="none")throw new TypeError(`The layout prop of <Sequence /> expects either "absolute-fill" or "none", but you passed: ${f}`);if(f==="none"&&typeof d.style<"u")throw new TypeError('If layout="none", you may not pass a style.');if(typeof t!="number")throw new TypeError(`You passed to durationInFrames an argument of type ${typeof t}, but it must be a number.`);if(t<=0)throw new TypeError(`durationInFrames must be positive, but got ${t}`);if(typeof e!="number")throw new TypeError(`You passed to the "from" props of your <Sequence> an argument of type ${typeof e}, but it must be a number.`);if(!Number.isFinite(e))throw new TypeError(`The "from" prop of a sequence must be finite, but got ${e}.`);const w=mr(),M=Nt(),R=y?Math.min(y.durationInFrames-e,t):t,P=Math.max(0,Math.min(M.durationInFrames-e,R)),{registerSequence:v,unregisterSequence:I}=u.useContext(dr),{hidden:D}=u.useContext(Br),F=u.useMemo(()=>y?.premounting??!!d._remotionInternalIsPremounting,[d._remotionInternalIsPremounting,y?.premounting]),$=u.useMemo(()=>({cumulatedFrom:x,relativeFrom:e,durationInFrames:P,parentFrom:y?.relativeFrom??0,id:p,height:i??y?.height??null,width:s??y?.width??null,premounting:F}),[x,e,P,y,p,i,s,F]),N=u.useMemo(()=>n??"",[n]);u.useEffect(()=>{if(Ue().isStudio)return v({from:e,duration:P,id:p,displayName:N,parent:y?.id??null,type:"sequence",rootId:b,showInTimeline:o,nonce:C,loopDisplay:a,stack:l??null,premountDisplay:c??null}),()=>{I(p)}},[t,p,n,v,N,I,y?.id,P,b,e,o,C,a,l,c]);const L=Math.ceil(x+e+t-1),j=w<x+e||w>L?null:r,H=d.layout==="none"?void 0:d.style,ne=u.useMemo(()=>({flexDirection:void 0,...s?{width:s}:{},...i?{height:i}:{},...H??{}}),[i,H,s]);if(h!==null&&f==="none")throw new TypeError('It is not supported to pass both a `ref` and `layout="none"` to <Sequence />.');return D[p]??!1?null:m.jsx(Ke.Provider,{value:$,children:j===null?null:d.layout==="none"?j:m.jsx(Pi,{ref:h,style:ne,className:d.className,children:j})})},lc=u.forwardRef(ac),uc=(e,t)=>{const r=Qt();if(e.layout==="none")throw new Error('`<Sequence>` with `premountFor` prop does not support layout="none"');const{style:n,from:i=0,premountFor:s=0,...o}=e,a=r<i&&r>=i-s,l=u.useMemo(()=>({...n,opacity:a?0:1,pointerEvents:a?"none":n?.pointerEvents??void 0}),[a,n]);return m.jsx(oc,{frame:i,active:a,children:m.jsx(Vr,{ref:t,from:i,style:l,_remotionInternalPremountDisplay:s,_remotionInternalIsPremounting:a,...o})})},cc=u.forwardRef(uc),dc=(e,t)=>e.layout!=="none"&&e.premountFor&&!Ue().isRendering?m.jsx(cc,{...e,ref:t}):m.jsx(lc,{...e,ref:t}),Vr=u.forwardRef(dc),hc=e=>{if(typeof e!="string")throw new TypeError(`The "filename" must be a string, but you passed a value of type ${typeof e}`);if(e.trim()==="")throw new Error("The `filename` must not be empty");if(!e.match(/^([0-9a-zA-Z-!_.*'()/:&$@=;+,?]+)/g))throw new Error('The `filename` must match "/^([0-9a-zA-Z-!_.*\'()/:&$@=;+,?]+)/g". Use forward slashes only, even on Windows.')},fc=e=>{if(typeof e!="string"&&!(e instanceof Uint8Array))throw new TypeError(`The "content" must be a string or Uint8Array, but you passed a value of type ${typeof e}`);if(typeof e=="string"&&e.trim()==="")throw new Error("The `content` must not be empty")},Zo=e=>{e.type==="artifact"&&(hc(e.filename),fc(e.content))},pr=u.createContext({registerRenderAsset:()=>{},unregisterRenderAsset:()=>{},renderAssets:[]}),mc=({children:e})=>{const[t,r]=u.useState([]),n=u.useCallback(o=>{Zo(o),r(a=>[...a,o])},[]),i=u.useCallback(o=>{r(a=>a.filter(l=>l.id!==o))},[]);u.useLayoutEffect(()=>{typeof window<"u"&&(window.remotion_collectAssets=()=>(r([]),t))},[t]);const s=u.useMemo(()=>({registerRenderAsset:n,unregisterRenderAsset:i,renderAssets:t}),[t,n,i]);return m.jsx(pr.Provider,{value:s,children:e})},Zt=e=>typeof window>"u"?e:new URL(e,window.origin).href,Ko=({endAt:e,mediaDuration:t,playbackRate:r,startFrom:n})=>{let i=t;typeof e<"u"&&(i=e),typeof n<"u"&&(i-=n);const s=i/r;return Math.floor(s)};function Ii(e){let t;throw pc(e)?(t=e,t.stack||(t.stack=new Error(t.message).stack)):typeof e=="string"?t=Error(e):t=Error("Rendering was cancelled"),window.remotion_cancelledError=t.stack,t}var pc=e=>e instanceof Error?!0:!(e===null||typeof e!="object"||!("stack"in e)||typeof e.stack!="string"||!("message"in e)||typeof e.message!="string"),Jo=u.createContext(null),gc=()=>J.useContext(Jo),Tn=({durationInFrames:e,times:t=1/0,children:r,name:n,...i})=>{const s=Qt(),{durationInFrames:o}=Nt();if(ki(e,{component:"of the <Loop /> component",allowFloats:!0}),typeof t!="number")throw new TypeError(`You passed to "times" an argument of type ${typeof t}, but it must be a number.`);if(t!==1/0&&t%1!==0)throw new TypeError(`The "times" prop of a loop must be an integer, but got ${t}.`);if(t<0)throw new TypeError(`The "times" prop of a loop must be at least 0, but got ${t}`);const a=Math.ceil(o/e),l=Math.min(a,t),c=i.layout==="none"?void 0:i.style,d=e*(l-1),f=Math.floor(s/e)*e,p=Math.min(f,d),y=u.useMemo(()=>({numberOfTimes:l,startOffset:-p,durationInFrames:e}),[l,e,p]),b=u.useMemo(()=>({iteration:Math.floor(s/e),durationInFrames:e}),[s,e]);return m.jsx(Jo.Provider,{value:b,children:m.jsx(Vr,{durationInFrames:e,from:p,name:n??"<Loop>",_remotionInternalLoopDisplay:y,layout:i.layout,style:c,children:r})})};Tn.useLoop=gc;var Pn=u.createContext({}),Ls={},Hn=[],Qo=({children:e})=>{const[t,r]=u.useState(()=>Ls);return u.useEffect(()=>{const n=()=>{r(Ls)};return Hn.push(n),()=>{Hn=Hn.filter(i=>i!==n)}},[]),m.jsx(Pn.Provider,{value:t,children:e})},gr=e=>u.useContext(Pn)[e]??e,ea=(e,t)=>{if(typeof e.volume!="number"&&typeof e.volume!="function"&&typeof e.volume<"u")throw new TypeError(`You have passed a volume of type ${typeof e.volume} to your <${t} /> component. Volume must be a number or a function with the signature '(frame: number) => number' undefined.`);if(typeof e.volume=="number"&&e.volume<0)throw new TypeError(`You have passed a volume below 0 to your <${t} /> component. Volume must be between 0 and 1`);if(typeof e.playbackRate!="number"&&typeof e.playbackRate<"u")throw new TypeError(`You have passed a playbackRate of type ${typeof e.playbackRate} to your <${t} /> component. Playback rate must a real number or undefined.`);if(typeof e.playbackRate=="number"&&(isNaN(e.playbackRate)||!Number.isFinite(e.playbackRate)||e.playbackRate<=0))throw new TypeError(`You have passed a playbackRate of ${e.playbackRate} to your <${t} /> component. Playback rate must be a real number above 0.`)},ta=(e,t)=>{if(typeof e<"u"){if(typeof e!="number")throw new TypeError(`type of startFrom prop must be a number, instead got type ${typeof e}.`);if(isNaN(e)||e===1/0)throw new TypeError("startFrom prop can not be NaN or Infinity.");if(e<0)throw new TypeError(`startFrom must be greater than equal to 0 instead got ${e}.`)}if(typeof t<"u"){if(typeof t!="number")throw new TypeError(`type of endAt prop must be a number, instead got type ${typeof t}.`);if(isNaN(t))throw new TypeError("endAt prop can not be NaN.");if(t<=0)throw new TypeError(`endAt must be a positive number, instead got ${t}.`)}if(t<e)throw new TypeError("endAt prop must be greater than startFrom prop.")},vc=(e,t)=>{switch(t.type){case"got-duration":{const r=Zt(t.src);return e[r]===t.durationInSeconds?e:{...e,[r]:t.durationInSeconds}}default:return e}},ji=u.createContext({durations:{},setDurations:()=>{throw new Error("context missing")}}),ra=({children:e})=>{const[t,r]=u.useReducer(vc,{}),n=u.useMemo(()=>({durations:t,setDurations:r}),[t]);return m.jsx(ji.Provider,{value:n,children:e})};function Is(e){let t=e+1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function yc(e){let t=0,r=0,n=0;for(t=0;t<e.length;t++)r=e.charCodeAt(t),n=(n<<5)-n+r,n|=0;return n}var vr=(e,t)=>{if(e===null)return Math.random();if(typeof e=="string")return Is(yc(e));if(typeof e=="number")return Is(e*1e10);throw new Error("random() argument must be a number or a string")},Ur=()=>{const e=u.useContext(Ke);return Math.min(0,e?.relativeFrom??0)},Dn=e=>{const t=Tn.useLoop(),r=Qt(),n=Ur();return e==="repeat"||t===null?r+n:r+n+t.durationInFrames*t.iteration},wc=e=>{if(/data:|blob:/.test(e.substring(0,5)))return"Data URL";const t=e.split("/").map(r=>r.split("\\")).flat(1);return t[t.length-1]},wn=(e,t,r)=>{const{current:n}=e;if(!n)return;const i=n.play();i.catch&&i.catch(s=>{if(n&&!s.message.includes("request was interrupted by a call to pause")&&!s.message.includes("The operation was aborted.")&&!s.message.includes("The fetching process for the media resource was aborted by the user agent")&&!s.message.includes("request was interrupted by a new load request")&&!s.message.includes("because the media was removed from the document")&&!(s.message.includes("user didn't interact with the document")&&n.muted)&&(console.log(`Could not play ${t} due to following error: `,s),!n.muted)){if(r){r();return}console.log("The video will be muted and we'll retry playing it."),t==="video"&&Ue().isPlayer&&console.log("Use onAutoPlayError() to handle this error yourself."),n.muted=!0,n.play()}})},Or=({frame:e,volume:t,mediaVolume:r=1,allowAmplificationDuringRender:n})=>{const i=n?1/0:1;if(typeof t=="number")return Math.min(i,t*r);if(typeof t>"u")return Number(r);const s=t(e)*r;if(typeof s!="number")throw new TypeError(`You passed in a a function to the volume prop but it did not return a number but a value of type ${typeof s} for frame ${e}`);if(Number.isNaN(s))throw new TypeError(`You passed in a function to the volume prop but it returned NaN for frame ${e}.`);if(!Number.isFinite(s))throw new TypeError(`You passed in a function to the volume prop but it returned a non-finite number for frame ${e}.`);return Math.max(0,Math.min(i,s))},js={},bc=e=>{js[e]||(console.warn(e),js[e]=!0)},na=({volume:e,mediaVolume:t,mediaRef:r,src:n,mediaType:i,playbackRate:s,displayName:o,id:a,stack:l,showInTimeline:c,premountDisplay:d,onAutoPlayError:h})=>{const f=Nt(),{rootId:p,audioAndVideoTags:y}=u.useContext(gt),b=u.useContext(Ke),x=b?b.relativeFrom+b.cumulatedFrom:0,[C]=Fi(),w=Ur(),{registerSequence:M,unregisterSequence:R}=u.useContext(dr),[P]=u.useState(()=>e),v=Di(),I=b?Math.min(b.durationInFrames,f.durationInFrames):f.durationInFrames,D=typeof e=="function",F=u.useMemo(()=>typeof e=="number"?e:new Array(Math.floor(Math.max(0,I+w))).fill(!0).map(($,N)=>Or({frame:N+w,volume:e,mediaVolume:t,allowAmplificationDuringRender:!1})).join(","),[I,w,e,t]);u.useEffect(()=>{typeof e=="number"&&e!==P&&bc(`Remotion: The ${i} with src ${n} has changed it's volume. Prefer the callback syntax for setting volume to get better timeline display: https://www.remotion.dev/docs/using-audio/#controlling-volume`)},[P,i,n,e]),u.useEffect(()=>{if(r.current){if(!n)throw new Error("No src passed");if(!(!Ue().isStudio&&window.process?.env?.NODE_ENV!=="test")&&c)return M({type:i,src:n,id:a,duration:I,from:0,parent:b?.id??null,displayName:o??wc(n),rootId:p,volume:F,showInTimeline:!0,nonce:v,startMediaFrom:0-w,doesVolumeChange:D,loopDisplay:void 0,playbackRate:s,stack:l,premountDisplay:d}),()=>{R(a)}}},[x,I,a,b,n,M,p,R,f,F,D,v,r,i,w,s,o,l,c,d]),u.useEffect(()=>{const $={id:a,play:()=>{if(C)return wn(r,i,h)}};return y.current.push($),()=>{y.current=y.current.filter(N=>N.id!==a)}},[y,a,r,i,h,C])},xc=()=>{const[e,t]=u.useState([]),[r,n]=u.useState([]),[i,s]=u.useState([]),o=u.useRef(!1),a=u.useCallback(d=>(t(h=>[...h,d]),{unblock:()=>{t(h=>{const f=h.filter(p=>p!==d);return f.length===h.length?h:f})}}),[]),l=u.useCallback(d=>(n(h=>[...h,d]),{remove:()=>{n(h=>h.filter(f=>f!==d))}}),[]),c=u.useCallback(d=>(s(h=>[...h,d]),{remove:()=>{s(h=>h.filter(f=>f!==d))}}),[]);return u.useEffect(()=>{e.length>0&&r.forEach(d=>d())},[e]),u.useEffect(()=>{e.length===0&&i.forEach(d=>d())},[e]),u.useMemo(()=>({addBlock:a,listenForBuffering:l,listenForResume:c,buffering:o}),[a,o,l,c])},yr=J.createContext(null),ia=({children:e})=>{const t=xc();return m.jsx(yr.Provider,{value:t,children:e})},_c=e=>{const[t,r]=u.useState(e.buffering.current);return u.useEffect(()=>{const n=()=>{r(!0)},i=()=>{r(!1)};return e.listenForBuffering(n),e.listenForResume(i),()=>{e.listenForBuffering(()=>{}),e.listenForResume(()=>{})}},[e]),t},Ni=()=>{const e=u.useContext(yr),t=e?e.addBlock:null;return u.useMemo(()=>({delayPlayback:()=>{if(!t)throw new Error("Tried to enable the buffering state, but a Remotion context was not found. This API can only be called in a component that was passed to the Remotion Player or a <Composition>. Or you might have experienced a version mismatch - run `npx remotion versions` and ensure all packages have the same version. This error is thrown by the buffer state https://remotion.dev/docs/player/buffer-state");const{unblock:r}=t({id:String(Math.random())});return{unblock:r}}}),[t])},Cc=({mediaRef:e,mediaType:t,onVariableFpsVideoDetected:r,pauseWhenBuffering:n})=>{const i=u.useRef(!1),{delayPlayback:s}=Ni(),o=u.useCallback(a=>{if(t!=="video"||!n)return;const l=e.current;if(!l||!l.requestVideoFrameCallback)return;i.current=!0;const c=s(),d=()=>{c.unblock(),l.removeEventListener("ended",d,{once:!0}),l.removeEventListener("pause",d,{once:!0}),i.current=!1},h=()=>{d()};l.requestVideoFrameCallback((f,p)=>{Math.abs(p.mediaTime-a)>.5&&r(),d()}),l.addEventListener("ended",h,{once:!0}),l.addEventListener("pause",h,{once:!0}),l.addEventListener("canplay",h,{once:!0})},[s,e,t,r,n]);return u.useMemo(()=>({isBuffering:()=>i.current,bufferUntilFirstFrame:o}),[o])},Ec=({element:e,shouldBuffer:t,isPremounting:r})=>{const n=Ni(),[i,s]=u.useState(!1);return u.useEffect(()=>{let o=[];const{current:a}=e;if(!a||!t||r)return;const l=()=>{o.forEach(h=>h()),o=[],s(!1)},c=()=>{s(!0);const{unblock:h}=n.delayPlayback(),f=()=>{l(),d()},p=()=>{l(),d()};a.addEventListener("canplay",f,{once:!0}),o.push(()=>{a.removeEventListener("canplay",f)}),a.addEventListener("error",p,{once:!0}),o.push(()=>{a.removeEventListener("error",p)}),o.push(()=>{h()})},d=()=>{a.readyState<a.HAVE_FUTURE_DATA?(c(),navigator.userAgent.includes("Firefox/")||a.load()):(a.addEventListener("waiting",c),o.push(()=>{a.removeEventListener("waiting",c)}))};return d(),()=>{l()}},[n,e,r,t]),i},Sc=({mediaRef:e,mediaType:t,lastSeek:r,onVariableFpsVideoDetected:n})=>{const i=u.useRef(null);return u.useEffect(()=>{const{current:s}=e;if(s)i.current=s.currentTime;else{i.current=null;return}if(t!=="video"){i.current=null;return}const o=s;if(!o.requestVideoFrameCallback)return;let a=()=>{};const l=()=>{if(!o)return;const c=o.requestVideoFrameCallback((d,h)=>{if(i.current!==null){const f=Math.abs(i.current-h.mediaTime),p=Math.abs(r.current===null?1/0:h.mediaTime-r.current);f>.5&&p>.5&&h.mediaTime>i.current&&n()}i.current=h.mediaTime,l()});a=()=>{o.cancelVideoFrameCallback(c),a=()=>{}}};return l(),()=>{a()}},[r,e,t,n]),i};function Mc(e,t,r,n){const{extrapolateLeft:i,extrapolateRight:s,easing:o}=n;let a=e;const[l,c]=t,[d,h]=r;if(a<l){if(i==="identity")return a;if(i==="clamp")a=l;else if(i==="wrap"){const f=c-l;a=((a-l)%f+f)%f+l}}if(a>c){if(s==="identity")return a;if(s==="clamp")a=c;else if(s==="wrap"){const f=c-l;a=((a-l)%f+f)%f+l}}return d===h?d:(a=(a-l)/(c-l),a=o(a),a=a*(h-d)+d,a)}function Rc(e,t){let r;for(r=1;r<t.length-1&&!(t[r]>=e);++r);return r-1}function Tc(e){for(let t=1;t<e.length;++t)if(!(e[t]>e[t-1]))throw new Error(`inputRange must be strictly monotonically increasing but got [${e.join(",")}]`)}function Ns(e,t){if(t.length<2)throw new Error(e+" must have at least 2 elements");for(const r of t){if(typeof r!="number")throw new Error(`${e} must contain only numbers`);if(!Number.isFinite(r))throw new Error(`${e} must contain only finite numbers, but got [${t.join(",")}]`)}}function sa(e,t,r,n){if(typeof e>"u")throw new Error("input can not be undefined");if(typeof t>"u")throw new Error("inputRange can not be undefined");if(typeof r>"u")throw new Error("outputRange can not be undefined");if(t.length!==r.length)throw new Error("inputRange ("+t.length+") and outputRange ("+r.length+") must have the same length");Ns("inputRange",t),Ns("outputRange",r),Tc(t);const i=n?.easing??(l=>l);let s="extend";n?.extrapolateLeft!==void 0&&(s=n.extrapolateLeft);let o="extend";if(n?.extrapolateRight!==void 0&&(o=n.extrapolateRight),typeof e!="number")throw new TypeError("Cannot interpolate an input which is not a number");const a=Rc(e,t);return Mc(e,[t[a],t[a+1]],[r[a],r[a+1]],{easing:i,extrapolateLeft:s,extrapolateRight:o})}var Pc=({frame:e,playbackRate:t,startFrom:r})=>sa(e,[-1,r,r+1],[-1,r,r+t]),oa=({fps:e,frame:t,playbackRate:r,startFrom:n})=>{const i=Pc({frame:t,playbackRate:r,startFrom:n}),s=1e3/e;return i*s/1e3},aa=(e,t)=>Math.round(e/t*100)/100,kn=()=>{if(typeof window>"u")return!1;const e=/iP(ad|od|hone)/i.test(window.navigator.userAgent),t=/AppleWebKit/.test(window.navigator.userAgent);return e&&t},Dc=e=>kn()&&e.startsWith("blob:"),li=({actualFrom:e,fps:t})=>aa(Math.max(0,-e),t),ui=({duration:e,fps:t})=>aa(e,t),kc=({actualSrc:e,actualFrom:t,duration:r,fps:n})=>{if(Dc(e)||e.startsWith("data:")||!!new URL(e,(typeof window>"u"?null:window.location.href)??"http://localhost:3000").hash||!Number.isFinite(t))return e;const s=`${e}#t=${li({actualFrom:t,fps:n})}`;return Number.isFinite(r)?`${s},${ui({duration:r,fps:n})}`:s},Ac=({prevStartFrom:e,newStartFrom:t,prevDuration:r,newDuration:n,fps:i})=>{const s=li({actualFrom:e,fps:i}),o=li({actualFrom:t,fps:i}),a=ui({duration:r,fps:i}),l=ui({duration:n,fps:i});return!(o<s||l>a)},$c=({actualSrc:e,actualFrom:t,duration:r,fps:n})=>{const i=u.useRef(t),s=u.useRef(r),o=u.useRef(e);return(!Ac({prevStartFrom:i.current,newStartFrom:t,prevDuration:s.current,newDuration:r,fps:n})||e!==o.current)&&(i.current=t,s.current=r,o.current=e),kc({actualSrc:o.current,actualFrom:i.current,duration:s.current,fps:n})},zs={},Fc=(e,t)=>{if(e===null||e.seekable.length===0||e.seekable.length>1||zs[e.src])return;const r={start:e.seekable.start(0),end:e.seekable.end(0)};if(r.start===0&&r.end===0){const n=[`The media ${e.src} cannot be seeked. This could be one of few reasons:`,"1) The media resource was replaced while the video is playing but it was not loaded yet.","2) The media does not support seeking.","3) The media was loaded with security headers prventing it from being included.","Please see https://remotion.dev/docs/non-seekable-media for assistance."].join(`
`);if(t==="console-error")console.error(n);else if(t==="console-warning")console.warn(`The media ${e.src} does not support seeking. The video will render fine, but may not play correctly in the Remotion Studio and in the <Player>. See https://remotion.dev/docs/non-seekable-media for an explanation.`);else throw new Error(n);zs[e.src]=!0}},zi=.45,Wn=(e,t)=>{if(!e.current)return;const r=kn()?Number(t.toFixed(1)):t;e.current.currentTime=r},la=({mediaRef:e,src:t,mediaType:r,playbackRate:n,onlyWarnForMediaSeekingError:i,acceptableTimeshift:s,pauseWhenBuffering:o,isPremounting:a,debugSeeking:l,onAutoPlayError:c})=>{const{playbackRate:d}=u.useContext(gt),h=Qt(),f=mr(),[p]=Fi(),y=u.useContext(yr),{fps:b}=Nt(),x=Ur(),C=u.useRef(null),w=u.useRef(null);if(!y)throw new Error("useMediaPlayback must be used inside a <BufferingContext>");const M=u.useRef({}),R=u.useCallback(()=>{t&&(l&&console.log(`Detected ${t} as a variable FPS video. Disabling buffering while seeking.`),M.current[t]=!0)},[l,t]),P=Sc({mediaRef:e,mediaType:r,lastSeek:w,onVariableFpsVideoDetected:R}),v=oa({frame:h,playbackRate:n,startFrom:-x,fps:b}),I=Ec({element:e,shouldBuffer:o,isPremounting:a}),{bufferUntilFirstFrame:D,isBuffering:F}=Cc({mediaRef:e,mediaType:r,onVariableFpsVideoDetected:R,pauseWhenBuffering:o}),$=n*d,N=e.current?.duration?Math.min(e.current.duration,s??zi):s,L=_c(y);u.useEffect(()=>{if(!p){e.current?.pause();return}const j=I||F();L&&!j&&e.current?.pause()},[F,I,L,e,p]),u.useEffect(()=>{const j=r==="audio"?"<Audio>":"<Video>";if(!e.current)throw new Error(`No ${r} ref found`);if(!t)throw new Error(`No 'src' attribute was passed to the ${j} element.`);const H=Math.max(0,$);e.current.playbackRate!==H&&(e.current.playbackRate=H);const{duration:ne}=e.current,V=!Number.isNaN(ne)&&Number.isFinite(ne)?Math.min(ne,v):v,Z=e.current.currentTime,ge=P.current??null,X=M.current[t],ie=Math.abs(V-Z),ee=ge?Math.abs(V-ge):null,fe=ee&&!X?ee:ie;if(l&&console.log({mediaTagTime:Z,rvcTime:ge,shouldBeTime:V,state:e.current.readyState,playing:!e.current.paused,isVariableFpsVideo:X}),fe>N&&C.current!==V){l&&console.log("Seeking",{shouldBeTime:V,isTime:Z,rvcTime:ge,timeShift:fe,isVariableFpsVideo:X}),Wn(e,V),w.current=V,C.current=V,p&&!X&&($>0&&D(V),e.current.paused&&wn(e,r,c)),i||Fc(e.current,i?"console-warning":"console-error");return}const Ae=p?.15:1e-5,be=Math.abs(e.current.currentTime-V)>Ae,re=I||F(),se=y.buffering.current&&!re;if(!p||se){be&&(Wn(e,V),w.current=V);return}(e.current.paused&&!e.current.ended||f===0)&&(be&&(Wn(e,V),w.current=V),wn(e,r,c),X||$>0&&D(V))},[f,N,D,y.buffering,P,l,v,F,I,e,r,i,$,p,t,c])},ua=e=>{const[t,r]=u.useState(1);return u.useEffect(()=>{const n=e.current;if(!n)return;const i=()=>{r(n.volume)};return n.addEventListener("volumechange",i),()=>n.removeEventListener("volumechange",i)},[e]),u.useEffect(()=>{const n=e.current;n&&n.volume!==t&&r(n.volume)},[t,e]),t},Lc=1e-5,Bi=(e,t)=>Math.abs(e-t)<Lc,ca=({volumePropFrame:e,actualVolume:t,volume:r,mediaVolume:n,mediaRef:i})=>{u.useEffect(()=>{const s=Or({frame:e,volume:r,mediaVolume:n,allowAmplificationDuringRender:!1});!Bi(s,t)&&i.current&&(i.current.volume=s)},[t,e,i,r,n])},Vi=u.createContext({mediaMuted:!1,mediaVolume:1}),Ui=u.createContext({setMediaMuted:()=>{throw new Error("default")},setMediaVolume:()=>{throw new Error("default")}}),Oi=()=>{const{mediaVolume:e}=u.useContext(Vi),{setMediaVolume:t}=u.useContext(Ui);return u.useMemo(()=>[e,t],[e,t])},Hi=()=>{const{mediaMuted:e}=u.useContext(Vi),{setMediaMuted:t}=u.useContext(Ui);return u.useMemo(()=>[e,t],[e,t])},Bs="data:audio/mp3;base64,/+MYxAAJcAV8AAgAABn//////+/gQ5BAMA+D4Pg+BAQBAEAwD4Pg+D4EBAEAQDAPg++hYBH///hUFQVBUFREDQNHmf///////+MYxBUGkAGIMAAAAP/29Xt6lUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV/+MYxDUAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",Ic=(e,t)=>{const r=Object.keys(e).sort(),n=Object.keys(t).sort();if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i]!==n[i]||e[r[i]]!==t[n[i]])return!1;return!0},jc=(e,t,r)=>e==="src"&&!r.startsWith("data:")&&!t.startsWith("data:")?new URL(r,window.origin).toString()!==new URL(t,window.origin).toString():r!==t,An=u.createContext(null),da=({children:e,numberOfAudioTags:t,component:r})=>{const n=u.useRef([]),[i]=u.useState(t);if(t!==i)throw new Error("The number of shared audio tags has changed dynamically. Once you have set this property, you cannot change it afterwards.");const s=u.useMemo(()=>new Array(t).fill(!0).map(()=>({id:Math.random(),ref:u.createRef()})),[t]),o=u.useRef(new Array(t).fill(!1)),a=u.useCallback(()=>{s.forEach(({ref:y,id:b})=>{const x=n.current?.find(w=>w.id===b),{current:C}=y;if(C){if(x===void 0){C.src=Bs;return}if(!x)throw new TypeError("Expected audio data to be there");Object.keys(x.props).forEach(w=>{jc(w,x.props[w],C[w])&&(C[w]=x.props[w])})}})},[s]),l=u.useCallback((y,b)=>{const x=n.current?.find(v=>v.audioId===b);if(x)return x;const C=o.current.findIndex(v=>v===!1);if(C===-1)throw new Error(`Tried to simultaneously mount ${t+1} <Audio /> tags at the same time. With the current settings, the maximum amount of <Audio /> tags is limited to ${t} at the same time. Remotion pre-mounts silent audio tags to help avoid browser autoplay restrictions. See https://remotion.dev/docs/player/autoplay#use-the-numberofsharedaudiotags-property for more information on how to increase this limit.`);const{id:w,ref:M}=s[C],R=[...o.current];R[C]=w,o.current=R;const P={props:y,id:w,el:M,audioId:b};return n.current?.push(P),a(),P},[t,s,a]),c=u.useCallback(y=>{const b=[...o.current],x=s.findIndex(C=>C.id===y);if(x===-1)throw new TypeError("Error occured in ");b[x]=!1,o.current=b,n.current=n.current?.filter(C=>C.id!==y),a()},[s,a]),d=u.useCallback(({aud:y,audioId:b,id:x})=>{let C=!1;n.current=n.current?.map(w=>w.id===x?Ic(y,w.props)?w:(C=!0,{...w,props:y,audioId:b}):w),C&&a()},[a]),h=u.useCallback(()=>{s.forEach(y=>{wn(y.ref,"audio",null)})},[s]),f=u.useMemo(()=>({registerAudio:l,unregisterAudio:c,updateAudio:d,playAllAudios:h,numberOfAudioTags:t}),[t,h,l,c,d]),p=u.useCallback(()=>{o.current=new Array(t).fill(!1),n.current=[],a()},[t,a]);return u.useEffect(()=>()=>{p()},[r,p]),m.jsxs(An.Provider,{value:f,children:[s.map(({id:y,ref:b})=>m.jsx("audio",{ref:b,preload:"metadata",src:Bs},y)),e]})},Nc=(e,t)=>{const r=u.useContext(An),[n]=u.useState(()=>r&&r.numberOfAudioTags>0?r.registerAudio(e,t):{el:J.createRef(),id:Math.random(),props:e,audioId:t}),i=J.useInsertionEffect??J.useLayoutEffect;return typeof document<"u"&&(i(()=>{r&&r.numberOfAudioTags>0&&r.updateAudio({id:n.id,aud:e,audioId:t})},[e,r,n.id,t]),i(()=>()=>{r&&r.numberOfAudioTags>0&&r.unregisterAudio(n.id)},[r,n.id])),n},zc=(e,t)=>{const[r]=u.useState(e.shouldPreMountAudioTags);if(e.shouldPreMountAudioTags!==r)throw new Error("Cannot change the behavior for pre-mounting audio tags dynamically.");const{volume:n,muted:i,playbackRate:s,shouldPreMountAudioTags:o,src:a,onDuration:l,acceptableTimeShiftInSeconds:c,_remotionInternalNeedsDurationCalculation:d,_remotionInternalNativeLoopPassed:h,_remotionInternalStack:f,_remotionDebugSeeking:p,allowAmplificationDuringRender:y,name:b,pauseWhenBuffering:x,showInTimeline:C,loopVolumeCurveBehavior:w,stack:M,...R}=e,[P]=Oi(),[v]=Hi(),I=Dn(w??"repeat"),{hidden:D}=u.useContext(Br);if(!a)throw new TypeError("No 'src' was passed to <Audio>.");const F=gr(a),$=u.useContext(Ke),[N]=u.useState(()=>String(Math.random())),L=D[N]??!1,j=Or({frame:I,volume:n,mediaVolume:P,allowAmplificationDuringRender:!1}),H=u.useMemo(()=>({muted:i||v||L||j<=0,src:F,loop:h,...R}),[h,L,v,i,R,F,j]),ne=u.useMemo(()=>`audio-${vr(a??"")}-${$?.relativeFrom}-${$?.cumulatedFrom}-${$?.durationInFrames}-muted:${e.muted}-loop:${e.loop}`,[a,$?.relativeFrom,$?.cumulatedFrom,$?.durationInFrames,e.muted,e.loop]),V=Nc(H,ne).el,Z=ua(V);ca({volumePropFrame:I,actualVolume:Z,volume:n,mediaVolume:P,mediaRef:V}),na({volume:n,mediaVolume:P,mediaRef:V,src:a,mediaType:"audio",playbackRate:s??1,displayName:b??null,id:N,stack:f,showInTimeline:C,premountDisplay:null,onAutoPlayError:null}),la({mediaRef:V,src:a,mediaType:"audio",playbackRate:s??1,onlyWarnForMediaSeekingError:!1,acceptableTimeshift:c??zi,isPremounting:!!$?.premounting,pauseWhenBuffering:x,debugSeeking:p,onAutoPlayError:null}),u.useImperativeHandle(t,()=>V.current,[V]);const ge=u.useRef();return ge.current=l,u.useEffect(()=>{const{current:X}=V;if(!X)return;if(X.duration){ge.current?.(X.src,X.duration);return}const ie=()=>{ge.current?.(X.src,X.duration)};return X.addEventListener("loadedmetadata",ie),()=>{X.removeEventListener("loadedmetadata",ie)}},[V,a]),r?null:m.jsx("audio",{ref:V,preload:"metadata",...H})},Bc=u.forwardRef(zc);typeof window<"u"&&(window.remotion_renderReady=!1);var un=[];typeof window<"u"&&(window.remotion_delayRenderTimeouts={});var Vc="The delayRender was called:",Uc="Retries left: ",Oc="- Rendering the frame will be retried.",Vs=3e4,Kt=(e,t)=>{if(typeof e!="string"&&typeof e<"u")throw new Error("The label parameter of delayRender() must be a string or undefined, got: "+JSON.stringify(e));const r=Math.random();un.push(r);const n=Error().stack?.replace(/^Error/g,"")??"";if(Ue().isRendering){const i=(t?.timeoutInMilliseconds??(typeof window>"u"?Vs:window.remotion_puppeteerTimeout??Vs))-2e3;if(typeof window<"u"){const s=(t?.retries??0)-(window.remotion_attempt-1);window.remotion_delayRenderTimeouts[r]={label:e??null,timeout:setTimeout(()=>{const o=["A delayRender()",e?`"${e}"`:null,`was called but not cleared after ${i}ms. See https://remotion.dev/docs/timeout for help.`,s>0?Uc+s:null,s>0?Oc:null,Vc,n].filter(Ti).join(" ");Ii(Error(o))},i)}}}return typeof window<"u"&&(window.remotion_renderReady=!1),r},Ve=e=>{if(typeof e>"u")throw new TypeError("The continueRender() method must be called with a parameter that is the return value of delayRender(). No value was passed.");if(typeof e!="number")throw new TypeError("The parameter passed into continueRender() must be the return value of delayRender() which is a number. Got: "+JSON.stringify(e));un=un.filter(t=>t===e?(Ue().isRendering&&(clearTimeout(window.remotion_delayRenderTimeouts[e].timeout),delete window.remotion_delayRenderTimeouts[e]),!1):!0),un.length===0&&typeof window<"u"&&(window.remotion_renderReady=!0)},Hc=(e,t)=>{const r=u.useRef(null),{volume:n,playbackRate:i,allowAmplificationDuringRender:s,onDuration:o,toneFrequency:a,_remotionInternalNeedsDurationCalculation:l,_remotionInternalNativeLoopPassed:c,acceptableTimeShiftInSeconds:d,name:h,onError:f,delayRenderRetries:p,delayRenderTimeoutInMilliseconds:y,loopVolumeCurveBehavior:b,pauseWhenBuffering:x,...C}=e,w=mr(),M=Dn(b??"repeat"),R=Qt(),P=u.useContext(Ke),{registerRenderAsset:v,unregisterRenderAsset:I}=u.useContext(pr),D=u.useMemo(()=>`audio-${vr(e.src??"")}-${P?.relativeFrom}-${P?.cumulatedFrom}-${P?.durationInFrames}`,[e.src,P?.relativeFrom,P?.cumulatedFrom,P?.durationInFrames]),F=Or({volume:n,frame:M,mediaVolume:1,allowAmplificationDuringRender:s??!1});u.useImperativeHandle(t,()=>r.current,[]),u.useEffect(()=>{if(!e.src)throw new Error("No src passed");if(window.remotion_audioEnabled&&!e.muted&&!(F<=0))return v({type:"audio",src:Zt(e.src),id:D,frame:w,volume:F,mediaFrame:R,playbackRate:e.playbackRate??1,allowAmplificationDuringRender:s??!1,toneFrequency:a??null,audioStartFrame:Math.max(0,-(P?.relativeFrom??0))}),()=>I(D)},[e.muted,e.src,v,w,D,I,F,M,R,i,e.playbackRate,s,a,P?.relativeFrom]);const{src:$}=e,N=t||l;return u.useLayoutEffect(()=>{if(window.process?.env?.NODE_ENV==="test"||!N)return;const L=Kt("Loading <Audio> duration with src="+$,{retries:p??void 0,timeoutInMilliseconds:y??void 0}),{current:j}=r,H=()=>{j?.duration&&o(j.src,j.duration),Ve(L)};return j?.duration?(o(j.src,j.duration),Ve(L)):j?.addEventListener("loadedmetadata",H,{once:!0}),()=>{j?.removeEventListener("loadedmetadata",H),Ve(L)}},[$,o,N,p,y]),N?m.jsx("audio",{ref:r,...C}):null},Wc=u.forwardRef(Hc),qc=(e,t)=>{const r=u.useContext(An),{startFrom:n,endAt:i,name:s,stack:o,pauseWhenBuffering:a,showInTimeline:l,_remotionDebugSeeking:c,...d}=e,{loop:h,...f}=e,{fps:p}=Nt(),y=Ue(),{durations:b,setDurations:x}=u.useContext(ji);if(typeof e.src!="string")throw new TypeError(`The \`<Audio>\` tag requires a string for \`src\`, but got ${JSON.stringify(e.src)} instead.`);const C=gr(e.src),w=u.useCallback(P=>{console.log(P.currentTarget.error);const v=`Could not play audio with src ${C}: ${P.currentTarget.error}. See https://remotion.dev/docs/media-playback-error for help.`;h?Ii(new Error(v)):console.warn(v)},[h,C]),M=u.useCallback((P,v)=>{x({type:"got-duration",durationInSeconds:v,src:P})},[x]),R=b[Zt(C)]??b[Zt(e.src)];if(h&&R!==void 0){if(!Number.isFinite(R))return m.jsx(cn,{...f,ref:t,_remotionInternalNativeLoopPassed:!0});const P=R*p;return m.jsx(Tn,{layout:"none",durationInFrames:Ko({endAt:i,mediaDuration:P,playbackRate:e.playbackRate??1,startFrom:n}),children:m.jsx(cn,{...f,ref:t,_remotionInternalNativeLoopPassed:!0})})}if(typeof n<"u"||typeof i<"u"){ta(n,i);const P=n??0,v=i??1/0;return m.jsx(Vr,{layout:"none",from:0-P,showInTimeline:!1,durationInFrames:v,name:s,children:m.jsx(cn,{_remotionInternalNeedsDurationCalculation:!!h,pauseWhenBuffering:a??!1,...d,ref:t})})}return ea(e,"Audio"),y.isRendering?m.jsx(Wc,{onDuration:M,...e,ref:t,onError:w,_remotionInternalNeedsDurationCalculation:!!h}):m.jsx(Bc,{_remotionInternalNativeLoopPassed:e._remotionInternalNativeLoopPassed??!1,_remotionDebugSeeking:c??!1,_remotionInternalStack:o??null,shouldPreMountAudioTags:r!==null&&r.numberOfAudioTags>0,...e,ref:t,onError:w,onDuration:M,pauseWhenBuffering:a??!1,_remotionInternalNeedsDurationCalculation:!!h,showInTimeline:l??!0})},cn=u.forwardRef(qc);zr(cn);var Yc=u.createContext({folderName:null,parentName:null}),Gc={transform:"rotate(90deg)"},Us=40,Xc={color:"white",fontSize:14,fontFamily:"sans-serif"},Zc={justifyContent:"center",alignItems:"center"},Kc=()=>m.jsxs(Pi,{style:Zc,id:"remotion-comp-loading",children:[m.jsx("style",{type:"text/css",children:`
				@keyframes anim {
					from {
						opacity: 0
					}
					to {
						opacity: 1
					}
				}
				#remotion-comp-loading {
					animation: anim 2s;
					animation-fill-mode: forwards;
				}
			`}),m.jsx("svg",{width:Us,height:Us,viewBox:"-100 -100 400 400",style:Gc,children:m.jsx("path",{fill:"#555",stroke:"#555",strokeWidth:"100",strokeLinejoin:"round",d:"M 2 172 a 196 100 0 0 0 195 5 A 196 240 0 0 0 100 2.259 A 196 240 0 0 0 2 172 z"})}),m.jsxs("p",{style:Xc,children:["Resolving ","<Suspense>","..."]})]}),rt=null,ci=()=>{if(!rt){if(typeof document>"u")throw new Error("Tried to call an API that only works in the browser from outside the browser");rt=document.createElement("div"),rt.style.position="absolute",rt.style.top="0px",rt.style.left="0px",rt.style.right="0px",rt.style.bottom="0px",rt.style.width="100%",rt.style.height="100%",rt.style.display="flex",rt.style.flexDirection="column";const e=document.createElement("div");e.style.position="fixed",e.style.top="-999999px",e.appendChild(rt),document.body.appendChild(e)}return rt},ha=e=>u.useMemo(()=>{if("lazyComponent"in e&&typeof e.lazyComponent<"u")return J.lazy(e.lazyComponent);if("component"in e)return typeof document>"u"?e.component:J.lazy(()=>Promise.resolve({default:e.component}));throw new Error("You must pass either 'component' or 'lazyComponent'")},[e.component,e.lazyComponent]),fa=()=>/^([a-zA-Z0-9-\u4E00-\u9FFF])+$/g,ma=e=>e.match(fa()),Jc=e=>{if(!ma(e))throw new Error(`Composition id can only contain a-z, A-Z, 0-9, CJK characters and -. You passed ${e}`)},Qc=`Composition ID must match ${String(fa())}`,ed=(e,t,r)=>{if(e){if(typeof e!="object")throw new Error(`"${t}" must be an object, but you passed a value of type ${typeof e}`);if(Array.isArray(e))throw new Error(`"${t}" must be an object, an array was passed ${r?`for composition "${r}"`:""}`)}},td=()=>(u.useEffect(()=>{const e=Kt("Waiting for Root component to unsuspend");return()=>Ve(e)},[]),null),Os=({width:e,height:t,fps:r,durationInFrames:n,id:i,defaultProps:s,schema:o,...a})=>{const{registerComposition:l,unregisterComposition:c}=u.useContext(jt),d=Rn(),h=ha(a),f=Di(),p=Ri(),y=Ue();if(u.useContext(Jt))throw p?new Error("<Composition> was mounted inside the `component` that was passed to the <Player>. See https://remotion.dev/docs/wrong-composition-mount for help."):new Error("<Composition> mounted inside another composition. See https://remotion.dev/docs/wrong-composition-mount for help.");const{folderName:x,parentName:C}=u.useContext(Yc);u.useEffect(()=>{if(!i)throw new Error("No id for composition passed.");return Jc(i),ed(s,"defaultProps",i),l({durationInFrames:n??void 0,fps:r??void 0,height:t??void 0,width:e??void 0,id:i,folderName:x,component:h,defaultProps:Ut(s??{}),nonce:f,parentFolderName:C,schema:o??null,calculateMetadata:a.calculateMetadata??null}),()=>{c(i)}},[n,r,t,h,i,x,s,l,c,e,f,C,o,a.calculateMetadata]);const w=Ai(i);if(y.isStudio&&d&&d.component===h){const M=h;return w===null||w.type!=="success"?null:Kn.createPortal(m.jsx(ai,{children:m.jsx(u.Suspense,{fallback:m.jsx(Kc,{}),children:m.jsx(M,{...w.result.props??{}})})}),ci())}if(y.isRendering&&d&&d.component===h){const M=h;return w===null||w.type!=="success"?null:Kn.createPortal(m.jsx(ai,{children:m.jsx(u.Suspense,{fallback:m.jsx(td,{}),children:m.jsx(M,{...w.result.props??{}})})}),ci())}return null},pa=J.createRef(),rd=({children:e,numberOfAudioTags:t})=>{const[r,n]=u.useState([]),i=u.useRef(r),[s,o]=u.useState([]),[a,l]=u.useState(null),[c,d]=u.useState(null),h=u.useCallback(M=>{n(R=>{const P=M(R);return i.current=P,P})},[]),f=u.useCallback(M=>{h(R=>{if(R.find(v=>v.id===M.id))throw new Error(`Multiple composition with id ${M.id} are registered.`);return[...R,M].slice().sort((v,I)=>v.nonce-I.nonce)})},[h]),p=u.useCallback(M=>{n(R=>R.filter(P=>P.id!==M))},[]),y=u.useCallback((M,R)=>{o(P=>[...P,{name:M,parent:R}])},[]),b=u.useCallback((M,R)=>{o(P=>P.filter(v=>!(v.name===M&&v.parent===R)))},[]);u.useImperativeHandle(pa,()=>({getCompositions:()=>i.current}),[]);const x=r.find(M=>a?.type==="composition"?M.id===a.compositionId:null),C=u.useCallback((M,R)=>{n(P=>P.map(I=>I.id===M?{...I,defaultProps:R}:I))},[]),w=u.useMemo(()=>({compositions:r,registerComposition:f,unregisterComposition:p,folders:s,registerFolder:y,unregisterFolder:b,currentCompositionMetadata:c,setCurrentCompositionMetadata:d,canvasContent:a,setCanvasContent:l,updateCompositionDefaultProps:C}),[r,f,p,s,y,b,c,a,C]);return m.jsx(jt.Provider,{value:w,children:m.jsx(Xu,{children:m.jsx(mc,{children:m.jsx(Wo,{children:m.jsx(da,{numberOfAudioTags:t,component:x?.component??null,children:e})})})})})},nd=({onLoad:e,onError:t,delayRenderRetries:r,delayRenderTimeoutInMilliseconds:n,...i},s)=>{const[o]=u.useState(()=>Kt(`Loading <IFrame> with source ${i.src}`,{retries:r??void 0,timeoutInMilliseconds:n??void 0})),a=u.useCallback(c=>{Ve(o),e?.(c)},[o,e]),l=u.useCallback(c=>{Ve(o),t?t(c):console.error("Error loading iframe:",c,"Handle the event using the onError() prop to make this message disappear.")},[o,t]);return m.jsx("iframe",{...i,ref:s,onError:l,onLoad:a})};u.forwardRef(nd);function id(e){return 1e3*2**(e-1)}var sd=({onError:e,maxRetries:t=2,src:r,pauseWhenLoading:n,delayRenderRetries:i,delayRenderTimeoutInMilliseconds:s,onImageFrame:o,...a},l)=>{const c=u.useRef(null),d=u.useRef({}),{delayPlayback:h}=Ni(),f=u.useContext(Ke);if(!r)throw new Error('No "src" prop was passed to <Img>.');u.useImperativeHandle(l,()=>c.current,[]);const p=gr(r),y=u.useCallback(x=>{if(!c.current)return;const C=c.current.src;setTimeout(()=>{if(!c.current)return;const w=c.current?.src;w===C&&(c.current.removeAttribute("src"),c.current.setAttribute("src",w))},x)},[]),b=u.useCallback(x=>{if(d.current){if(d.current[c.current?.src]=(d.current[c.current?.src]??0)+1,e&&(d.current[c.current?.src]??0)>t){e(x);return}if((d.current[c.current?.src]??0)<=t){const C=id(d.current[c.current?.src]??0);console.warn(`Could not load image with source ${c.current?.src}, retrying again in ${C}ms`),y(C);return}Ii("Error loading image with src: "+c.current?.src)}},[t,e,y]);if(typeof window<"u"){const x=!!f?.premounting;u.useLayoutEffect(()=>{if(window.process?.env?.NODE_ENV==="test"){c.current&&(c.current.src=p);return}const C=Kt("Loading <Img> with src="+p,{retries:i??void 0,timeoutInMilliseconds:s??void 0}),w=n&&!x?h().unblock:()=>{},{current:M}=c;let R=!1;const P=()=>{R||((d.current[c.current?.src]??0)>0&&(delete d.current[c.current?.src],console.info(`Retry successful - ${c.current?.src} is now loaded`)),M&&(M.src=p,o?.(M)),w(),Ve(C))},v=new Image;return v.src=p,v.decode().then(P).catch(I=>{console.warn(I),v.complete?P():v.addEventListener("load",P)}),()=>{R=!0,v.removeEventListener("load",P),w(),Ve(C)}},[p,h,i,s,n,x,o])}return m.jsx("img",{...a,ref:c,onError:b})};u.forwardRef(sd);var ga={};ko(ga,{makeDefaultPreviewCSS:()=>ad,injectCSS:()=>od,OFFTHREAD_VIDEO_CLASS_NAME:()=>di});var Hs={},od=e=>{if(typeof document>"u"||Hs[e])return;const t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.appendChild(document.createTextNode(e)),t.prepend(r),Hs[e]=!0},di="__remotion_offthreadvideo",ad=(e,t)=>e?`
    ${e} * {
      box-sizing: border-box;
    }
    ${e} *:-webkit-full-screen {
      width: 100%;
      height: 100%;
    }
    ${e} .${di} {
      object-fit: contain;
    }
  `:`
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
	    background-color: ${t};
    }
    .${di} {
      object-fit: contain;
    }
    `,va="__remotion-studio-container",ld=()=>document.getElementById(va),ud=null,qn=[],cd=()=>ud,dd=e=>(qn.push(e),()=>{qn=qn.filter(t=>t!==e)}),hd=({children:e,numberOfAudioTags:t})=>{const[r]=u.useState(()=>String(vr(null))),[n,i]=u.useState(()=>Yo()),[s,o]=u.useState(!1),a=u.useRef(!1),[l,c]=u.useState(0),[d,h]=u.useState(1),f=u.useRef([]);typeof window<"u"&&u.useLayoutEffect(()=>{window.remotion_setFrame=(x,C,w)=>{window.remotion_attempt=w;const M=Kt(`Setting the current frame to ${x}`);let R=!0;i(P=>(P[C]??window.remotion_initialFrame)===x?(R=!1,P):{...P,[C]:x}),R?requestAnimationFrame(()=>Ve(M)):Ve(M)},window.remotion_isPlayer=!1},[]);const p=u.useMemo(()=>({frame:n,playing:s,imperativePlaying:a,rootId:r,playbackRate:d,setPlaybackRate:h,audioAndVideoTags:f}),[n,d,s,r]),y=u.useMemo(()=>({setFrame:i,setPlaying:o}),[]),b=u.useMemo(()=>{let x=0;return{getNonce:()=>x++,fastRefreshes:l}},[l]);return u.useEffect(()=>{typeof __webpack_module__<"u"&&__webpack_module__.hot&&__webpack_module__.hot.addStatusHandler(x=>{x==="idle"&&c(C=>C+1)})},[]),m.jsx(hr.Provider,{value:b,children:m.jsx(gt.Provider,{value:p,children:m.jsx(fr.Provider,{value:y,children:m.jsx(jo,{children:m.jsx(Qo,{children:m.jsx(rd,{numberOfAudioTags:t,children:m.jsx(ra,{children:m.jsx(ia,{children:e})})})})})})})})},fd=()=>{if(Ue().isRendering){const e=window.remotion_envVariables;return e?{...JSON.parse(e),NODE_ENV:"production"}:{}}return{NODE_ENV:"production"}},md=()=>{const e=fd();window.process||(window.process={}),window.process.env||(window.process.env={}),Object.keys(e).forEach(t=>{window.process.env[t]=e[t]})},pd=J.createContext(null),gd=u.createContext({setSize:()=>{},size:{size:"auto",translation:{x:0,y:0}}}),vd=({canvasSize:e,compositionHeight:t,compositionWidth:r,previewSize:n})=>{const i=e.height/t,s=e.width/r,o=Math.min(i,s);return n==="auto"?o:Number(n)},yd="remotion_staticFilesChanged";function wd(){const e=J.useContext(jt),t=J.useContext(gt),r=J.useContext(fr),n=J.useContext(Ke),i=J.useContext(hr),s=J.useContext(Jt),o=J.useContext(Pn),a=J.useContext(Mn),l=J.useContext(pr),c=J.useContext(dr),d=J.useContext(yr);return u.useMemo(()=>({compositionManagerCtx:e,timelineContext:t,setTimelineContext:r,sequenceContext:n,nonceContext:i,canUseRemotionHooksContext:s,preloadContext:o,resolveCompositionContext:a,renderAssetManagerContext:l,sequenceManagerContext:c,bufferManagerContext:d}),[e,i,n,r,t,s,o,a,l,c,d])}var bd=e=>{const{children:t,contexts:r}=e;return m.jsx(Jt.Provider,{value:r.canUseRemotionHooksContext,children:m.jsx(hr.Provider,{value:r.nonceContext,children:m.jsx(Pn.Provider,{value:r.preloadContext,children:m.jsx(jt.Provider,{value:r.compositionManagerCtx,children:m.jsx(dr.Provider,{value:r.sequenceManagerContext,children:m.jsx(pr.Provider,{value:r.renderAssetManagerContext,children:m.jsx(Mn.Provider,{value:r.resolveCompositionContext,children:m.jsx(gt.Provider,{value:r.timelineContext,children:m.jsx(fr.Provider,{value:r.setTimelineContext,children:m.jsx(Ke.Provider,{value:r.sequenceContext,children:m.jsx(yr.Provider,{value:r.bufferManagerContext,children:t})})})})})})})})})})})},K={useUnsafeVideoConfig:Li,Timeline:Lo,CompositionManager:jt,SequenceManager:dr,SequenceVisibilityToggleContext:Br,RemotionRoot:hd,useVideo:Rn,getRoot:cd,useMediaVolumeState:Oi,useMediaMutedState:Hi,useLazyComponent:ha,truthy:Ti,SequenceContext:Ke,useRemotionContexts:wd,RemotionContextProvider:bd,CSSUtils:ga,setupEnvVariables:md,MediaVolumeContext:Vi,SetMediaVolumeContext:Ui,getRemotionEnvironment:Ue,SharedAudioContext:An,SharedAudioContextProvider:da,invalidCompositionErrorMessage:Qc,isCompositionIdValid:ma,getPreviewDomElement:ld,compositionsRef:pa,portalNode:ci,waitForRoot:dd,CanUseRemotionHooksProvider:ai,CanUseRemotionHooks:Jt,PrefetchProvider:Qo,DurationsContextProvider:ra,IsPlayerContextProvider:qu,useIsPlayer:Ri,EditorPropsProvider:jo,EditorPropsContext:Sn,usePreload:gr,NonceContext:hr,resolveVideoConfig:Vo,useResolvedVideoConfig:Ai,resolveCompositionsRef:Uo,ResolveCompositionConfig:Wo,REMOTION_STUDIO_CONTAINER_ELEMENT:va,RenderAssetManager:pr,persistCurrentFrame:qo,useTimelineSetFrame:Xo,isIosSafari:kn,WATCH_REMOTION_STATIC_FILES:yd,addSequenceStackTraces:zr,useMediaStartsAt:Ur,BufferingProvider:ia,BufferingContextReact:yr,enableSequenceStackTraces:$o,CurrentScaleContext:pd,PreviewSizeContext:gd,calculateScale:vd,editorPropsProviderRef:Io,PROPS_UPDATED_EXTERNALLY:Ho,validateRenderAsset:Zo},ya=u.createContext(!1),xd=({children:e})=>m.jsx(ya.Provider,{value:!1,children:e}),_d=()=>{if(!J.useContext(ya))throw new Error("This component must be inside a <Series /> component.")},Cd=({children:e},t)=>(_d(),m.jsx(xd,{children:e})),Ed=u.forwardRef(Cd);zr(Ed);var Sd=({ref:e,onVideoFrame:t})=>{u.useEffect(()=>{const{current:r}=e;if(!r||!t)return;let n=0;const i=()=>{e.current&&(t(e.current),n=e.current.requestVideoFrameCallback(i))};return i(),()=>{r.cancelVideoFrameCallback(n)}},[t,e])},Md=(e,t)=>{const r=u.useRef(null),{volume:n,muted:i,playbackRate:s,onlyWarnForMediaSeekingError:o,src:a,onDuration:l,acceptableTimeShift:c,acceptableTimeShiftInSeconds:d,toneFrequency:h,name:f,_remotionInternalNativeLoopPassed:p,_remotionInternalStack:y,_remotionDebugSeeking:b,style:x,pauseWhenBuffering:C,showInTimeline:w,loopVolumeCurveBehavior:M,onError:R,onAutoPlayError:P,onVideoFrame:v,crossOrigin:I,...D}=e,F=Dn(M??"repeat"),{fps:$,durationInFrames:N}=Nt(),L=u.useContext(Ke),{hidden:j}=u.useContext(Br),[H]=u.useState(()=>String(Math.random())),ne=j[H]??!1;if(typeof c<"u")throw new Error("acceptableTimeShift has been removed. Use acceptableTimeShiftInSeconds instead.");const V=ua(r),[Z]=Oi(),[ge]=Hi();na({mediaRef:r,volume:n,mediaVolume:Z,mediaType:"video",src:a,playbackRate:e.playbackRate??1,displayName:f??null,id:H,stack:y,showInTimeline:w,premountDisplay:null,onAutoPlayError:P??null}),ca({volumePropFrame:F,actualVolume:V,volume:n,mediaVolume:Z,mediaRef:r}),la({mediaRef:r,src:a,mediaType:"video",playbackRate:e.playbackRate??1,onlyWarnForMediaSeekingError:o,acceptableTimeshift:d??zi,isPremounting:!!L?.premounting,pauseWhenBuffering:C,debugSeeking:b,onAutoPlayError:P??null});const X=L?L.relativeFrom:0,ie=L?Math.min(L.durationInFrames,N):N,ee=$c({actualSrc:gr(a),actualFrom:X,duration:ie,fps:$});u.useImperativeHandle(t,()=>r.current,[]),u.useEffect(()=>{const{current:re}=r;if(!re)return;const se=()=>{if(re.error){if(console.error("Error occurred in video",re?.error),R){const $e=new Error(`Code ${re.error.code}: ${re.error.message}`);R($e);return}throw new Error(`The browser threw an error while playing the video ${a}: Code ${re.error.code} - ${re?.error?.message}. See https://remotion.dev/docs/media-playback-error for help. Pass an onError() prop to handle the error.`)}else{if(R){const $e=new Error(`The browser threw an error while playing the video ${a}`);R($e);return}throw new Error("The browser threw an error while playing the video")}};return re.addEventListener("error",se,{once:!0}),()=>{re.removeEventListener("error",se)}},[R,a]);const fe=u.useRef();fe.current=l,Sd({ref:r,onVideoFrame:v}),u.useEffect(()=>{const{current:re}=r;if(!re)return;if(re.duration){fe.current?.(a,re.duration);return}const se=()=>{fe.current?.(a,re.duration)};return re.addEventListener("loadedmetadata",se),()=>{re.removeEventListener("loadedmetadata",se)}},[a]),u.useEffect(()=>{const{current:re}=r;re&&(kn()?re.preload="metadata":re.preload="auto")},[]);const Ae=u.useMemo(()=>({...x,opacity:ne?0:x?.opacity??1}),[ne,x]),be=I??(v?"anonymous":void 0);return m.jsx("video",{ref:r,muted:i||ge,playsInline:!0,src:ee,loop:p,style:Ae,disableRemotePlayback:!0,crossOrigin:be,...D})},Rd=u.forwardRef(Md),Ws=e=>Math.round(e*1e5)/1e5,Yn=(e,t)=>{if(Bi(e.currentTime,t))return{wait:Promise.resolve(t),cancel:()=>{}};e.currentTime=t;let r,n=null;const i=new Promise(o=>{r=e.requestVideoFrameCallback((a,l)=>{const c=l.expectedDisplayTime-a;if(c<=0){o(l.mediaTime);return}setTimeout(()=>{o(l.mediaTime)},c+150)})}),s=new Promise(o=>{const a=()=>{o()};e.addEventListener("seeked",a,{once:!0}),n=()=>{e.removeEventListener("seeked",a)}});return{wait:Promise.all([i,s]).then(([o])=>o),cancel:()=>{n?.(),e.cancelVideoFrameCallback(r)}}},Td=(e,t,r)=>{const n=1/r/2;let i=()=>{};return Number.isFinite(e.duration)&&e.currentTime>=e.duration&&t>=e.duration?{prom:Promise.resolve(),cancel:()=>{}}:{prom:new Promise((o,a)=>{const l=Yn(e,t+n);l.wait.then(c=>{if(Math.abs(t-c)<=n)return o();const h=t>c?1:-1,f=Yn(e,c+n*h);i=f.cancel,f.wait.then(p=>{const y=Math.abs(t-p);if(Ws(y)<=Ws(n))return o();const b=Yn(e,t+n);return i=b.cancel,b.wait.then(()=>{o()}).catch(x=>{a(x)})}).catch(p=>{a(p)})}),i=l.cancel}),cancel:()=>{i()}}},Pd=({onError:e,volume:t,allowAmplificationDuringRender:r,playbackRate:n,onDuration:i,toneFrequency:s,name:o,acceptableTimeShiftInSeconds:a,delayRenderRetries:l,delayRenderTimeoutInMilliseconds:c,loopVolumeCurveBehavior:d,...h},f)=>{const p=mr(),y=Qt(),b=Dn(d??"repeat"),x=Li(),C=u.useRef(null),w=u.useContext(Ke),M=Ur(),R=Ue(),{registerRenderAsset:P,unregisterRenderAsset:v}=u.useContext(pr),I=u.useMemo(()=>`video-${vr(h.src??"")}-${w?.cumulatedFrom}-${w?.relativeFrom}-${w?.durationInFrames}`,[h.src,w?.cumulatedFrom,w?.relativeFrom,w?.durationInFrames]);if(!x)throw new Error("No video config found");const D=Or({volume:t,frame:b,mediaVolume:1,allowAmplificationDuringRender:r??!1});u.useEffect(()=>{if(!h.src)throw new Error("No src passed");if(!h.muted&&!(D<=0)&&window.remotion_audioEnabled)return P({type:"video",src:Zt(h.src),id:I,frame:p,volume:D,mediaFrame:y,playbackRate:n??1,allowAmplificationDuringRender:r??!1,toneFrequency:s??null,audioStartFrame:Math.max(0,-(w?.relativeFrom??0))}),()=>v(I)},[h.muted,h.src,P,I,v,D,y,p,n,r,s,w?.relativeFrom]),u.useImperativeHandle(f,()=>C.current,[]),u.useEffect(()=>{if(!window.remotion_videoEnabled)return;const{current:$}=C;if(!$)return;const N=oa({frame:y,playbackRate:n||1,startFrom:-M,fps:x.fps}),L=Kt(`Rendering <Video /> with src="${h.src}" at time ${N}`,{retries:l??void 0,timeoutInMilliseconds:c??void 0});if(window.process?.env?.NODE_ENV==="test"){Ve(L);return}if(Bi($.currentTime,N)){if($.readyState>=2){Ve(L);return}const V=()=>{Ve(L)};return $.addEventListener("loadeddata",V,{once:!0}),()=>{$.removeEventListener("loadeddata",V)}}const j=()=>{Ve(L)},H=Td($,N,x.fps);H.prom.then(()=>{Ve(L)}),$.addEventListener("ended",j,{once:!0});const ne=()=>{if($?.error){if(console.error("Error occurred in video",$?.error),e)return;throw new Error(`The browser threw an error while playing the video ${h.src}: Code ${$.error.code} - ${$?.error?.message}. See https://remotion.dev/docs/media-playback-error for help. Pass an onError() prop to handle the error.`)}else throw new Error("The browser threw an error")};return $.addEventListener("error",ne,{once:!0}),()=>{H.cancel(),$.removeEventListener("ended",j),$.removeEventListener("error",ne),Ve(L)}},[b,h.src,n,x.fps,y,M,e,l,c]);const{src:F}=h;return R.isRendering&&u.useLayoutEffect(()=>{if(window.process?.env?.NODE_ENV==="test")return;const $=Kt("Loading <Video> duration with src="+F,{retries:l??void 0,timeoutInMilliseconds:c??void 0}),{current:N}=C,L=()=>{N?.duration&&i(F,N.duration),Ve($)};return N?.duration?(i(F,N.duration),Ve($)):N?.addEventListener("loadedmetadata",L,{once:!0}),()=>{N?.removeEventListener("loadedmetadata",L),Ve($)}},[F,i,l,c]),m.jsx("video",{ref:C,disableRemotePlayback:!0,...h})},Dd=u.forwardRef(Pd),kd=(e,t)=>{const{startFrom:r,endAt:n,name:i,pauseWhenBuffering:s,stack:o,_remotionInternalNativeLoopPassed:a,showInTimeline:l,onAutoPlayError:c,...d}=e,{loop:h,_remotionDebugSeeking:f,...p}=e,{fps:y}=Nt(),b=Ue(),{durations:x,setDurations:C}=u.useContext(ji);if(typeof t=="string")throw new Error("string refs are not supported");if(typeof e.src!="string")throw new TypeError(`The \`<Video>\` tag requires a string for \`src\`, but got ${JSON.stringify(e.src)} instead.`);const w=gr(e.src),M=u.useCallback((v,I)=>{C({type:"got-duration",durationInSeconds:I,src:v})},[C]),R=u.useCallback(()=>{},[]),P=x[Zt(w)]??x[Zt(e.src)];if(h&&P!==void 0){if(!Number.isFinite(P))return m.jsx(dn,{...p,ref:t,_remotionInternalNativeLoopPassed:!0});const v=P*y;return m.jsx(Tn,{durationInFrames:Ko({endAt:n,mediaDuration:v,playbackRate:e.playbackRate??1,startFrom:r}),layout:"none",name:i,children:m.jsx(dn,{...p,ref:t,_remotionInternalNativeLoopPassed:!0})})}if(typeof r<"u"||typeof n<"u"){ta(r,n);const v=r??0,I=n??1/0;return m.jsx(Vr,{layout:"none",from:0-v,showInTimeline:!1,durationInFrames:I,name:i,children:m.jsx(dn,{pauseWhenBuffering:s??!1,...d,ref:t})})}return ea(e,"Video"),b.isRendering?m.jsx(Dd,{onDuration:M,onVideoFrame:R??null,...d,ref:t}):m.jsx(Rd,{onlyWarnForMediaSeekingError:!1,...d,ref:t,onVideoFrame:null,pauseWhenBuffering:s??!1,onDuration:M,_remotionInternalStack:o??null,_remotionInternalNativeLoopPassed:a??!1,_remotionDebugSeeking:f??!1,showInTimeline:l??!0,onAutoPlayError:c??void 0})},dn=u.forwardRef(kd);zr(dn);Yu();var Ad={},$d=new Proxy(Ad,{get(e,t){return t==="Bundling"||t==="Rendering"||t==="Log"||t==="Puppeteer"||t==="Output"?$d:()=>{console.warn("⚠️  The CLI configuration has been extracted from Remotion Core."),console.warn("Update the import from the config file:"),console.warn(),console.warn("- Delete:"),console.warn('import {Config} from "remotion";'),console.warn("+ Replace:"),console.warn('import {Config} from "@remotion/cli/config";'),console.warn(),console.warn("For more information, see https://www.remotion.dev/docs/4-0-migration."),process.exit(1)}}});zr(Vr);function Fd(e,t,r,n){const{extrapolateLeft:i,extrapolateRight:s,easing:o}=n;let a=e;const[l,c]=t,[d,h]=r;if(a<l){if(i==="identity")return a;if(i==="clamp")a=l;else if(i==="wrap"){const f=c-l;a=((a-l)%f+f)%f+l}}if(a>c){if(s==="identity")return a;if(s==="clamp")a=c;else if(s==="wrap"){const f=c-l;a=((a-l)%f+f)%f+l}}return d===h?d:(a=(a-l)/(c-l),a=o(a),a=a*(h-d)+d,a)}function Ld(e,t){let r;for(r=1;r<t.length-1&&!(t[r]>=e);++r);return r-1}function Id(e){for(let t=1;t<e.length;++t)if(!(e[t]>e[t-1]))throw new Error(`inputRange must be strictly monotonically increasing but got [${e.join(",")}]`)}function qs(e,t){if(t.length<2)throw new Error(e+" must have at least 2 elements");for(const r of t){if(typeof r!="number")throw new Error(`${e} must contain only numbers`);if(!Number.isFinite(r))throw new Error(`${e} must contain only finite numbers, but got [${t.join(",")}]`)}}function jd(e,t,r,n){if(typeof e>"u")throw new Error("input can not be undefined");if(typeof t>"u")throw new Error("inputRange can not be undefined");if(typeof r>"u")throw new Error("outputRange can not be undefined");if(t.length!==r.length)throw new Error("inputRange ("+t.length+") and outputRange ("+r.length+") must have the same length");qs("inputRange",t),qs("outputRange",r),Id(t);const i=l=>l;let s="extend",o="extend";if(typeof e!="number")throw new TypeError("Cannot interpolate an input which is not a number");const a=Ld(e,t);return Fd(e,[t[a],t[a+1]],[r[a],r[a+1]],{easing:i,extrapolateLeft:s,extrapolateRight:o})}function Nd(e){return!!e}typeof window<"u"&&(window.remotion_renderReady=!1);typeof window<"u"&&(window.remotion_delayRenderTimeouts={});var zd="The delayRender was called:",Bd="Retries left: ",Vd="- Rendering the frame will be retried.",Ud={"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";"},Ys={},Od=e=>{Ys[e]||(console.warn(e),Ys[e]=!0)},Hd=e=>{for(const t of Object.keys(Ud))if(e.includes(t))return{containsHex:!0,hexCode:t};return{containsHex:!1}},hi=e=>e.startsWith("/")?hi(e.substring(1)):e,Wd=e=>{if(typeof window<"u"&&window.remotion_staticBase){if(e.startsWith(window.remotion_staticBase))throw new Error(`The value "${e}" is already prefixed with the static base ${window.remotion_staticBase}. You don't need to call staticFile() on it.`);return`${window.remotion_staticBase}/${hi(e)}`}return`/${hi(e)}`},qd=e=>e.split("/").map(i=>encodeURIComponent(i)).join("/"),Yd=e=>{if(e===null)throw new TypeError("null was passed to staticFile()");if(typeof e>"u")throw new TypeError("undefined was passed to staticFile()");if(e.startsWith("http://")||e.startsWith("https://"))throw new TypeError(`staticFile() does not support remote URLs - got "${e}". Instead, pass the URL without wrapping it in staticFile(). See: https://remotion.dev/docs/staticfile-remote-urls`);if(e.startsWith("..")||e.startsWith("./"))throw new TypeError(`staticFile() does not support relative paths - got "${e}". Instead, pass the name of a file that is inside the public/ folder. See: https://remotion.dev/docs/staticfile-relative-paths`);if(e.startsWith("/Users")||e.startsWith("/home")||e.startsWith("/tmp")||e.startsWith("/etc")||e.startsWith("/opt")||e.startsWith("/var")||e.startsWith("C:")||e.startsWith("D:")||e.startsWith("E:"))throw new TypeError(`staticFile() does not support absolute paths - got "${e}". Instead, pass the name of a file that is inside the public/ folder. See: https://remotion.dev/docs/staticfile-relative-paths`);if(e.startsWith("public/"))throw new TypeError(`Do not include the public/ prefix when using staticFile() - got "${e}". See: https://remotion.dev/docs/staticfile-relative-paths`);const t=Hd(e);t.containsHex&&Od(`WARNING: You seem to pass an already encoded path (path contains ${t.hexCode}). Since Remotion 4.0, the encoding is done by staticFile() itself. You may want to remove a encodeURIComponent() wrapping.`);const r=qd(e),n=Wd(r);return n.startsWith("/")?n:`/${n}`},bn="remotion-date:",xn="remotion-file:",Gd=({data:e,indent:t,staticBase:r})=>{let n=!1,i=!1,s=!1,o=!1;try{return{serializedString:JSON.stringify(e,function(l,c){const d=this[l];return d instanceof Date?(n=!0,`${bn}${d.toISOString()}`):d instanceof Map?(s=!0,c):d instanceof Set?(o=!0,c):typeof d=="string"&&r!==null&&d.startsWith(r)?(i=!0,`${xn}${d.replace(r+"/","")}`):c},t),customDateUsed:n,customFileUsed:i,mapUsed:s,setUsed:o}}catch(a){throw new Error("Could not serialize the passed input props to JSON: "+a.message)}},Xd=e=>JSON.parse(e,(t,r)=>typeof r=="string"&&r.startsWith(bn)?new Date(r.replace(bn,"")):typeof r=="string"&&r.startsWith(xn)?Yd(r.replace(xn,"")):r);function rn(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}function Zd(){const e={rgb:void 0,rgba:void 0,hsl:void 0,hsla:void 0,hex3:void 0,hex4:void 0,hex5:void 0,hex6:void 0,hex8:void 0};return e.rgb===void 0&&(e.rgb=new RegExp("rgb"+rn(ht,ht,ht)),e.rgba=new RegExp("rgba"+rn(ht,ht,ht,ht)),e.hsl=new RegExp("hsl"+rn(ht,sn,sn)),e.hsla=new RegExp("hsla"+rn(ht,sn,sn,ht)),e.hex3=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,e.hex4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,e.hex6=/^#([0-9a-fA-F]{6})$/,e.hex8=/^#([0-9a-fA-F]{8})$/),e}function Gn(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Gs(e,t,r){const n=r<.5?r*(1+t):r+t-r*t,i=2*r-n,s=Gn(i,n,e+1/3),o=Gn(i,n,e),a=Gn(i,n,e-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function or(e){const t=Number.parseInt(e,10);return t<0?0:t>255?255:t}function Xs(e){return(Number.parseFloat(e)%360+360)%360/360}function Zs(e){const t=Number.parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function nn(e){const t=Number.parseFloat(e);return t<0?0:t>100?1:t/100}function Kd(e){const t=Zd();let r;if(t.hex6&&(r=t.hex6.exec(e)))return Number.parseInt(r[1]+"ff",16)>>>0;if(fi[e]!==void 0)return fi[e];if(t.rgb&&(r=t.rgb.exec(e)))return(or(r[1])<<24|or(r[2])<<16|or(r[3])<<8|255)>>>0;if(t.rgba&&(r=t.rgba.exec(e)))return(or(r[1])<<24|or(r[2])<<16|or(r[3])<<8|Zs(r[4]))>>>0;if(t.hex3&&(r=t.hex3.exec(e)))return Number.parseInt(r[1]+r[1]+r[2]+r[2]+r[3]+r[3]+"ff",16)>>>0;if(t.hex8&&(r=t.hex8.exec(e)))return Number.parseInt(r[1],16)>>>0;if(t.hex4&&(r=t.hex4.exec(e)))return Number.parseInt(r[1]+r[1]+r[2]+r[2]+r[3]+r[3]+r[4]+r[4],16)>>>0;if(t.hsl&&(r=t.hsl.exec(e)))return(Gs(Xs(r[1]),nn(r[2]),nn(r[3]))|255)>>>0;if(t.hsla&&(r=t.hsla.exec(e)))return(Gs(Xs(r[1]),nn(r[2]),nn(r[3]))|Zs(r[4]))>>>0;throw new Error(`invalid color string ${e} provided`)}function Jd(e){const t=Kd(e);return(t<<24|t>>>8)>>>0}var ht="[-+]?\\d*\\.?\\d+",sn=ht+"%",fi={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Qd=!1,eh=({allowFloats:e,durationInFrames:t,frame:r})=>{if(typeof r>"u")throw new TypeError('Argument missing for parameter "frame"');if(typeof r!="number")throw new TypeError(`Argument passed for "frame" is not a number: ${r}`);if(!Number.isFinite(r))throw new RangeError(`Frame ${r} is not finite`);if(r%1!==0&&!e)throw new RangeError(`Argument for frame must be an integer, but got ${r}`);if(r<0&&r<-t)throw new RangeError(`Cannot use frame ${r}: Duration of composition is ${t}, therefore the lowest frame that can be rendered is ${-t}`);if(r>t-1)throw new RangeError(`Cannot use frame ${r}: Duration of composition is ${t}, therefore the highest frame that can be rendered is ${t-1}`)},th=(e,t,r)=>{if(e){if(typeof e!="object")throw new Error(`"${t}" must be an object, but you passed a value of type ${typeof e}`);if(Array.isArray(e))throw new Error(`"${t}" must be an object, an array was passed ${r?`for composition "${r}"`:""}`)}};function rh(e,t,r){if(typeof e!="number")throw new Error(`The "${t}" prop ${r} must be a number, but you passed a value of type ${typeof e}`);if(isNaN(e))throw new TypeError(`The "${t}" prop ${r} must not be NaN, but is NaN.`);if(!Number.isFinite(e))throw new TypeError(`The "${t}" prop ${r} must be finite, but is ${e}.`);if(e%1!==0)throw new TypeError(`The "${t}" prop ${r} must be an integer, but is ${e}.`);if(e<=0)throw new TypeError(`The "${t}" prop ${r} must be positive, but got ${e}.`)}function nh(e,t){const{allowFloats:r,component:n}=t;if(typeof e>"u")throw new Error(`The "durationInFrames" prop ${n} is missing.`);if(typeof e!="number")throw new Error(`The "durationInFrames" prop ${n} must be a number, but you passed a value of type ${typeof e}`);if(e<=0)throw new TypeError(`The "durationInFrames" prop ${n} must be positive, but got ${e}.`);if(!r&&e%1!==0)throw new TypeError(`The "durationInFrames" prop ${n} must be an integer, but got ${e}.`);if(!Number.isFinite(e))throw new TypeError(`The "durationInFrames" prop ${n} must be finite, but got ${e}.`)}function ih(e,t,r){if(typeof e!="number")throw new Error(`"fps" must be a number, but you passed a value of type ${typeof e} ${t}`);if(!Number.isFinite(e))throw new Error(`"fps" must be a finite, but you passed ${e} ${t}`);if(isNaN(e))throw new Error(`"fps" must not be NaN, but got ${e} ${t}`);if(e<=0)throw new TypeError(`"fps" must be positive, but got ${e} ${t}`);if(r&&e>50)throw new TypeError("The FPS for a GIF cannot be higher than 50. Use the --every-nth-frame option to lower the FPS: https://remotion.dev/docs/render-as-gif")}var sh=({frame:e,playbackRate:t,startFrom:r})=>jd(e,[-1,r,r+1],[-1,r,r+t]),oh=e=>typeof window>"u"?e:new URL(e,window.origin).href,ah=({src:e,transparent:t,currentTime:r,toneMapped:n})=>`http://localhost:${window.remotion_proxyPort}/proxy?src=${encodeURIComponent(oh(e))}&time=${encodeURIComponent(r)}&transparent=${String(t)}&toneMapped=${String(n)}`,$n={processColor:Jd,truthy:Nd,validateFps:ih,validateDimension:rh,validateDurationInFrames:nh,validateDefaultAndInputProps:th,validateFrame:eh,serializeJSONWithDate:Gd,bundleName:"bundle.js",bundleMapName:"bundle.js.map",deserializeJSONWithCustomFields:Xd,DELAY_RENDER_CALLSTACK_TOKEN:zd,DELAY_RENDER_RETRY_TOKEN:Vd,DELAY_RENDER_ATTEMPT_TOKEN:Bd,getOffthreadVideoSource:ah,getExpectedMediaFrameUncorrected:sh,ENABLE_V5_BREAKING_CHANGES:Qd,MIN_NODE_VERSION:16,MIN_BUN_VERSION:"1.0.3",colorNames:fi,DATE_TOKEN:bn,FILE_TOKEN:xn},Ye=25,mi=16,lh=()=>m.jsx("svg",{width:Ye,height:Ye,viewBox:"0 0 25 25",fill:"none",children:m.jsx("path",{d:"M8 6.375C7.40904 8.17576 7.06921 10.2486 7.01438 12.3871C6.95955 14.5255 7.19163 16.6547 7.6875 18.5625C9.95364 18.2995 12.116 17.6164 14.009 16.5655C15.902 15.5147 17.4755 14.124 18.6088 12.5C17.5158 10.8949 15.9949 9.51103 14.1585 8.45082C12.3222 7.3906 10.2174 6.68116 8 6.375Z",fill:"white",stroke:"white",strokeWidth:"6.25",strokeLinejoin:"round"})}),uh=()=>m.jsxs("svg",{viewBox:"0 0 100 100",width:Ye,height:Ye,children:[m.jsx("rect",{x:"25",y:"20",width:"20",height:"60",fill:"#fff",ry:"5",rx:"5"}),m.jsx("rect",{x:"55",y:"20",width:"20",height:"60",fill:"#fff",ry:"5",rx:"5"})]}),ch=({isFullscreen:e})=>{const n=e?0:3,i=e?6*1.6:6/2,s=e?6*1.6:6*2;return m.jsxs("svg",{viewBox:"0 0 32 32",height:mi,width:mi,children:[m.jsx("path",{d:`
				M ${n} ${s}
				L ${i} ${i}
				L ${s} ${n}
				`,stroke:"#fff",strokeWidth:6,fill:"none"}),m.jsx("path",{d:`
				M ${32-n} ${s}
				L ${32-i} ${i}
				L ${32-s} ${n}
				`,stroke:"#fff",strokeWidth:6,fill:"none"}),m.jsx("path",{d:`
				M ${n} ${32-s}
				L ${i} ${32-i}
				L ${s} ${32-n}
				`,stroke:"#fff",strokeWidth:6,fill:"none"}),m.jsx("path",{d:`
				M ${32-n} ${32-s}
				L ${32-i} ${32-i}
				L ${32-s} ${32-n}
				`,stroke:"#fff",strokeWidth:6,fill:"none"})]})},dh=()=>m.jsx("svg",{width:Ye,height:Ye,viewBox:"0 0 24 24",children:m.jsx("path",{d:"M3.63 3.63a.996.996 0 000 1.41L7.29 8.7 7 9H4c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71v-4.17l4.18 4.18c-.49.37-1.02.68-1.6.91-.36.15-.58.53-.58.92 0 .72.73 1.18 1.39.91.8-.33 1.55-.77 2.22-1.31l1.34 1.34a.996.996 0 101.41-1.41L5.05 3.63c-.39-.39-1.02-.39-1.42 0zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-3.83-2.4-7.11-5.78-8.4-.59-.23-1.22.23-1.22.86v.19c0 .38.25.71.61.85C17.18 6.54 19 9.06 19 12zm-8.71-6.29l-.17.17L12 7.76V6.41c0-.89-1.08-1.33-1.71-.7zM16.5 12A4.5 4.5 0 0014 7.97v1.79l2.48 2.48c.01-.08.02-.16.02-.24z",fill:"#fff"})}),hh=()=>m.jsx("svg",{width:Ye,height:Ye,viewBox:"0 0 24 24",children:m.jsx("path",{d:"M3 10v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L7 9H4c-.55 0-1 .45-1 1zm13.5 2A4.5 4.5 0 0014 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 4.45v.2c0 .38.25.71.6.85C17.18 6.53 19 9.06 19 12s-1.82 5.47-4.4 6.5c-.36.14-.6.47-.6.85v.2c0 .63.63 1.07 1.21.85C18.6 19.11 21 15.84 21 12s-2.4-7.11-5.79-8.4c-.58-.23-1.21.22-1.21.85z",fill:"#fff"})}),Ks="__remotion_buffering_indicator",Js="__remotion_buffering_animation",fh={width:Ye,height:Ye,overflow:"hidden",lineHeight:"normal",fontSize:"inherit"},mh={width:14,height:14,overflow:"hidden",lineHeight:"normal",fontSize:"inherit"},ph=({type:e})=>{const t=e==="player"?fh:mh;return m.jsxs(m.Fragment,{children:[m.jsx("style",{type:"text/css",children:`
				@keyframes ${Js} {
          0% {
            rotate: 0deg;
          }
          100% {
            rotate: 360deg;
          }
        }
        
        .${Ks} {
            animation: ${Js} 1s linear infinite;
        }        
			`}),m.jsx("div",{style:t,children:m.jsx("svg",{viewBox:e==="player"?"0 0 22 22":"0 0 18 18",style:t,className:Ks,children:m.jsx("path",{d:e==="player"?"M 11 4 A 7 7 0 0 1 15.1145 16.66312":"M 9 2 A 7 7 0 0 1 13.1145 14.66312",stroke:"white",strokeLinecap:"round",fill:"none",strokeWidth:3})})})]})},gh=({currentSize:e,width:t,height:r,compositionWidth:n,compositionHeight:i})=>t!==void 0&&r===void 0?{aspectRatio:[n,i].join("/")}:r!==void 0&&t===void 0?{aspectRatio:[n,i].join("/")}:e?{width:n,height:i}:{width:n,height:i},wa=({previewSize:e,compositionWidth:t,compositionHeight:r,canvasSize:n})=>{const i=K.calculateScale({canvasSize:n,compositionHeight:r,compositionWidth:t,previewSize:e}),s=0-(1-i)/2,o=s*t,a=s*r,l=t*i,c=r*i,d=n.width/2-l/2,h=n.height/2-c/2;return{centerX:d,centerY:h,xCorrection:o,yCorrection:a,scale:i}},ba=({config:e,style:t,canvasSize:r,overflowVisible:n,layout:i})=>e?{position:"relative",overflow:n?"visible":"hidden",...gh({compositionHeight:e.height,compositionWidth:e.width,currentSize:r,height:t?.height,width:t?.width}),opacity:i?1:0,...t}:{},xa=({config:e,canvasSize:t,layout:r,scale:n,overflowVisible:i})=>!e||!t||!r?{}:{position:"absolute",width:e.width,height:e.height,display:"flex",transform:`scale(${n})`,marginLeft:r.xCorrection,marginTop:r.yCorrection,overflow:i?"visible":"hidden"},_a=({layout:e,scale:t,config:r,overflowVisible:n})=>{if(!e||!r)return{};const{centerX:i,centerY:s}=e;return{width:r.width*t,height:r.height*t,display:"flex",flexDirection:"column",position:"absolute",left:i,top:s,overflow:n?"visible":"hidden"}},Ca=J.createContext(void 0),Ea=J.createContext(void 0);class vh{listeners={ended:[],error:[],pause:[],play:[],ratechange:[],scalechange:[],seeked:[],timeupdate:[],frameupdate:[],fullscreenchange:[],volumechange:[],mutechange:[],waiting:[],resume:[]};addEventListener(t,r){this.listeners[t].push(r)}removeEventListener(t,r){this.listeners[t]=this.listeners[t].filter(n=>n!==r)}dispatchEvent(t,r){this.listeners[t].forEach(n=>{n({detail:r})})}dispatchSeek(t){this.dispatchEvent("seeked",{frame:t})}dispatchVolumeChange(t){this.dispatchEvent("volumechange",{volume:t})}dispatchPause(){this.dispatchEvent("pause",void 0)}dispatchPlay(){this.dispatchEvent("play",void 0)}dispatchEnded(){this.dispatchEvent("ended",void 0)}dispatchRateChange(t){this.dispatchEvent("ratechange",{playbackRate:t})}dispatchScaleChange(t){this.dispatchEvent("scalechange",{scale:t})}dispatchError(t){this.dispatchEvent("error",{error:t})}dispatchTimeUpdate(t){this.dispatchEvent("timeupdate",t)}dispatchFrameUpdate(t){this.dispatchEvent("frameupdate",t)}dispatchFullscreenChange(t){this.dispatchEvent("fullscreenchange",t)}dispatchMuteChange(t){this.dispatchEvent("mutechange",t)}dispatchWaiting(t){this.dispatchEvent("waiting",t)}dispatchResume(t){this.dispatchEvent("resume",t)}}class yh{listeners={error:[],waiting:[],resume:[]};addEventListener(t,r){this.listeners[t].push(r)}removeEventListener(t,r){this.listeners[t]=this.listeners[t].filter(n=>n!==r)}dispatchEvent(t,r){this.listeners[t].forEach(n=>{n({detail:r})})}dispatchError(t){this.dispatchEvent("error",{error:t})}dispatchWaiting(t){this.dispatchEvent("waiting",t)}dispatchResume(t){this.dispatchEvent("resume",t)}}var Sa=e=>{const t=u.useContext(K.BufferingContextReact);if(!t)throw new Error("BufferingContextReact not found");u.useEffect(()=>{const r=t.listenForBuffering(()=>{t.buffering.current=!0,e.dispatchWaiting({})}),n=t.listenForResume(()=>{t.buffering.current=!1,e.dispatchResume({})});return()=>{r.remove(),n.remove()}},[t,e])},wh=({children:e,currentPlaybackRate:t})=>{const[r]=u.useState(()=>new vh);if(!u.useContext(K.BufferingContextReact))throw new Error("BufferingContextReact not found");return u.useEffect(()=>{t&&r.dispatchRateChange(t)},[r,t]),Sa(r),m.jsx(Ca.Provider,{value:r,children:e})},Wi=(e,t)=>{const[r,n]=u.useState(!1);return u.useEffect(()=>{const{current:i}=e;if(!i)return;let s;const o=()=>{t&&(clearTimeout(s),s=setTimeout(()=>{n(!1)},t===!0?3e3:t))},a=()=>{n(!0),o()},l=()=>{n(!1),clearTimeout(s)},c=()=>{n(!0),o()};return i.addEventListener("mouseenter",a),i.addEventListener("mouseleave",l),i.addEventListener("mousemove",c),()=>{i.removeEventListener("mouseenter",a),i.removeEventListener("mouseleave",l),i.removeEventListener("mousemove",c),clearTimeout(s)}},[t,e]),r},Fn=()=>{const[e,t,r]=K.Timeline.usePlayingState(),[n,i]=u.useState(!1),s=K.Timeline.useTimelinePosition(),o=u.useRef(s),a=K.Timeline.useTimelineSetFrame(),l=K.Timeline.useTimelineSetFrame(),c=u.useContext(K.SharedAudioContext),{audioAndVideoTags:d}=u.useContext(K.Timeline.TimelineContext),h=u.useRef(s);h.current=s;const f=K.useVideo(),p=K.useUnsafeVideoConfig(),y=u.useContext(Ca),b=(p?.durationInFrames??1)-1,x=s===b,C=s===0;if(!y)throw new TypeError("Expected Player event emitter context");const w=u.useContext(K.BufferingContextReact);if(!w)throw new Error("Missing the buffering context. Most likely you have a Remotion version mismatch.");const{buffering:M}=w,R=u.useCallback(L=>{f?.id&&l(j=>({...j,[f.id]:L})),h.current=L,y.dispatchSeek(L)},[y,l,f?.id]),P=u.useCallback(L=>{r.current||(i(!0),x&&R(0),c&&c.numberOfAudioTags>0&&L&&c.playAllAudios(),d.current.forEach(j=>j.play()),r.current=!0,t(!0),o.current=h.current,y.dispatchPlay())},[r,x,c,t,y,R,d]),v=u.useCallback(()=>{r.current&&(r.current=!1,t(!1),y.dispatchPause())},[y,r,t]),I=u.useCallback(()=>{r.current&&(r.current=!1,h.current=o.current,p&&(l(L=>({...L,[p.id]:o.current})),t(!1),y.dispatchPause()))},[p,y,r,t,l]),D=f?.id,F=u.useCallback(L=>{if(!D)return null;r.current||a(j=>{const H=j[D]??window.remotion_initialFrame??0;return{...j,[D]:Math.max(0,H-L)}})},[r,a,D]),$=u.useCallback(L=>{if(!D)return null;r.current||a(j=>{const H=j[D]??window.remotion_initialFrame??0;return{...j,[D]:Math.min(b,H+L)}})},[D,r,b,a]);return u.useMemo(()=>({frameBack:F,frameForward:$,isLastFrame:x,emitter:y,playing:e,play:P,pause:v,seek:R,isFirstFrame:C,getCurrentFrame:()=>h.current,isPlaying:()=>r.current,isBuffering:()=>M.current,pauseAndReturnToPlayStart:I,hasPlayed:n,remotionInternal_currentFrameRef:h}),[F,$,x,y,e,P,v,R,C,I,n,r,M])},bh=({browserMediaControlsBehavior:e,videoConfig:t,playbackRate:r})=>{const{playing:n,pause:i,play:s,emitter:o,getCurrentFrame:a,seek:l}=Fn();u.useEffect(()=>{navigator.mediaSession&&e.mode!=="do-nothing"&&(n?navigator.mediaSession.playbackState="playing":navigator.mediaSession.playbackState="paused")},[e.mode,n]),u.useEffect(()=>{if(!navigator.mediaSession||e.mode==="do-nothing")return;const c=()=>{t&&navigator.mediaSession&&navigator.mediaSession.setPositionState({duration:t.durationInFrames/t.fps,playbackRate:r,position:a()/t.fps})};return o.addEventListener("timeupdate",c),()=>{o.removeEventListener("timeupdate",c)}},[e.mode,o,a,r,t]),u.useEffect(()=>{if(navigator.mediaSession&&e.mode!=="do-nothing")return navigator.mediaSession.setActionHandler("play",()=>{e.mode==="register-media-session"&&s()}),navigator.mediaSession.setActionHandler("pause",()=>{e.mode==="register-media-session"&&i()}),navigator.mediaSession.setActionHandler("seekto",c=>{e.mode==="register-media-session"&&c.seekTime!==void 0&&t&&l(Math.round(c.seekTime*t.fps))}),navigator.mediaSession.setActionHandler("seekbackward",()=>{e.mode==="register-media-session"&&t&&l(Math.max(0,Math.round((a()-10)*t.fps)))}),navigator.mediaSession.setActionHandler("seekforward",()=>{e.mode==="register-media-session"&&t&&l(Math.max(t.durationInFrames-1,Math.round((a()+10)*t.fps)))}),navigator.mediaSession.setActionHandler("previoustrack",()=>{e.mode==="register-media-session"&&l(0)}),()=>{navigator.mediaSession.metadata=null,navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.setActionHandler("seekto",null),navigator.mediaSession.setActionHandler("seekbackward",null),navigator.mediaSession.setActionHandler("seekforward",null),navigator.mediaSession.setActionHandler("previoustrack",null)}},[e.mode,a,i,s,l,t])},xh=({time:e,currentFrame:t,playbackSpeed:r,fps:n,actualLastFrame:i,actualFirstFrame:s,framesAdvanced:o,shouldLoop:a})=>{const c=(r<0?Math.ceil:Math.floor)(e*r/(1e3/n))-o,d=c+t,h=t>i||t<s,f=d>i||d<s,p=!a&&f&&!h;return r>0?f?{nextFrame:s,framesToAdvance:c,hasEnded:p}:{nextFrame:d,framesToAdvance:c,hasEnded:p}:f?{nextFrame:i,framesToAdvance:c,hasEnded:p}:{nextFrame:d,framesToAdvance:c,hasEnded:p}},Qs=()=>typeof document>"u"?!1:document.visibilityState==="hidden",_h=()=>{const e=u.useRef(Qs());return u.useEffect(()=>{const t=()=>{e.current=Qs()};return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}},[]),e},Ch=({loop:e,playbackRate:t,moveToBeginningWhenEnded:r,inFrame:n,outFrame:i,frameRef:s,browserMediaControlsBehavior:o})=>{const a=K.useUnsafeVideoConfig(),l=K.Timeline.useTimelinePosition(),{playing:c,pause:d,emitter:h}=Fn(),f=K.Timeline.useTimelineSetFrame(),p=u.useRef(null),y=_h(),b=u.useRef(null),x=u.useContext(K.BufferingContextReact);if(!x)throw new Error("Missing the buffering context. Most likely you have a Remotion version mismatch.");bh({browserMediaControlsBehavior:o,playbackRate:t,videoConfig:a}),u.useEffect(()=>{const C=x.listenForBuffering(()=>{p.current=performance.now()}),w=x.listenForResume(()=>{p.current=null});return()=>{C.remove(),w.remove()}},[x]),u.useEffect(()=>{if(!a||!c)return;let C=!1,w=null,M=performance.now(),R=0;const P=()=>{w!==null&&(w.type==="raf"?cancelAnimationFrame(w.id):clearTimeout(w.id))},v=()=>{C=!0,P()},I=()=>{const $=performance.now()-M,N=i??a.durationInFrames-1,L=n??0,j=s.current,{nextFrame:H,framesToAdvance:ne,hasEnded:V}=xh({time:$,currentFrame:j,playbackSpeed:t,fps:a.fps,actualFirstFrame:L,actualLastFrame:N,framesAdvanced:R,shouldLoop:e});if(R+=ne,H!==s.current&&(!V||r)&&f(Z=>({...Z,[a.id]:H})),V){v(),d(),h.dispatchEnded();return}C||D()},D=()=>{if(p.current){const $=x.listenForResume(()=>{$.remove(),!C&&(M=performance.now(),R=0,I())});return}y.current?w={type:"timeout",id:setTimeout(I,1e3/a.fps)}:w={type:"raf",id:requestAnimationFrame(I)}};D();const F=()=>{document.visibilityState!=="visible"&&(P(),I())};return window.addEventListener("visibilitychange",F),()=>{window.removeEventListener("visibilitychange",F),v()}},[a,e,d,c,f,h,t,n,i,r,y,s,p,x]),u.useEffect(()=>{const C=setInterval(()=>{b.current!==s.current&&(h.dispatchTimeUpdate({frame:s.current}),b.current=s.current)},250);return()=>clearInterval(C)},[h,s]),u.useEffect(()=>{h.dispatchFrameUpdate({frame:l})},[h,l])},Xn=[],qi=(e,t)=>{const[r,n]=u.useState(()=>{if(!e.current)return null;const o=e.current.getClientRects();return o[0]?{width:o[0].width,height:o[0].height,left:o[0].x,top:o[0].y,windowSize:{height:window.innerHeight,width:window.innerWidth}}:null}),i=u.useMemo(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const{contentRect:a,target:l}=o[0],c=l.getClientRects();if(!c?.[0]){n(null);return}const d=a.width===0?1:c[0].width/a.width,h=t.shouldApplyCssTransforms?c[0].width:c[0].width*(1/d),f=t.shouldApplyCssTransforms?c[0].height:c[0].height*(1/d);n({width:h,height:f,left:c[0].x,top:c[0].y,windowSize:{height:window.innerHeight,width:window.innerWidth}})}),[t.shouldApplyCssTransforms]),s=u.useCallback(()=>{if(!e.current)return;const o=e.current.getClientRects();if(!o[0]){n(null);return}n(a=>a&&a.width===o[0].width&&a.height===o[0].height&&a.left===o[0].x&&a.top===o[0].y&&a.windowSize.height===window.innerHeight&&a.windowSize.width===window.innerWidth?a:{width:o[0].width,height:o[0].height,left:o[0].x,top:o[0].y,windowSize:{height:window.innerHeight,width:window.innerWidth}})},[e]);return u.useEffect(()=>{if(!i)return;const{current:o}=e;return o&&i.observe(o),()=>{o&&i.unobserve(o)}},[i,e,s]),u.useEffect(()=>{if(t.triggerOnWindowResize)return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[t.triggerOnWindowResize,s]),u.useEffect(()=>(Xn.push(s),()=>{Xn=Xn.filter(o=>o!==s)}),[s]),u.useMemo(()=>r?{...r,refresh:s}:null,[r,s])},eo=({playing:e,buffering:t})=>e&&t?m.jsx(ph,{type:"player"}):e?m.jsx(uh,{}):m.jsx(lh,{}),ar=12,to=5,Eh=({volume:e,isVertical:t,onBlur:r,inputRef:n,setVolume:i})=>{const s=u.useMemo(()=>{const f={paddingLeft:5,height:Ye,width:Yt,display:"inline-flex",alignItems:"center"};return t?{...f,position:"absolute",transform:`rotate(-90deg) translateX(${Yt/2+Ye/2}px)`}:{...f}},[t]),o=typeof J.useId>"u"?"volume-slider":J.useId(),[a]=u.useState(()=>`__remotion-volume-slider-${vr(o)}`.replace(".","")),l=u.useCallback(h=>{i(parseFloat(h.target.value))},[i]),c=u.useMemo(()=>{const h={WebkitAppearance:"none",backgroundColor:"rgba(255, 255, 255, 0.5)",borderRadius:to/2,cursor:"pointer",height:to,width:Yt,backgroundImage:`linear-gradient(
				to right,
				white ${e*100}%, rgba(255, 255, 255, 0) ${e*100}%
			)`};return t?{...h,bottom:Ye+Yt/2}:h},[t,e]),d=`
	.${a}::-webkit-slider-thumb {
		-webkit-appearance: none;
		background-color: white;
		border-radius: ${ar/2}px;
		box-shadow: 0 0 2px black;
		height: ${ar}px;
		width: ${ar}px;
	}

	.${a}::-moz-range-thumb {
		-webkit-appearance: none;
		background-color: white;
		border-radius: ${ar/2}px;
		box-shadow: 0 0 2px black;
		height: ${ar}px;
		width: ${ar}px;
	}
`;return m.jsxs("div",{style:s,children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:d}}),m.jsx("input",{ref:n,"aria-label":"Change volume",className:a,max:1,min:0,onBlur:r,onChange:l,step:.01,type:"range",value:e,style:c})]})},Sh=e=>m.jsx(Eh,{...e}),Yt=100,Mh=({displayVerticalVolumeSlider:e,renderMuteButton:t,renderVolumeSlider:r})=>{const[n,i]=K.useMediaMutedState(),[s,o]=K.useMediaVolumeState(),[a,l]=u.useState(!1),c=u.useRef(null),d=u.useRef(null),h=Wi(c,!1),f=u.useCallback(()=>{setTimeout(()=>{d.current&&document.activeElement!==d.current&&l(!1)},10)},[]),p=s===0,y=u.useCallback(()=>{if(p){o(1),i(!1);return}i(R=>!R)},[p,i,o]),b=u.useMemo(()=>({display:"inline-flex",background:"none",border:"none",justifyContent:"center",alignItems:"center",touchAction:"none",...e&&{position:"relative"}}),[e]),x=u.useMemo(()=>({display:"inline",width:Ye,height:Ye,cursor:"pointer",appearance:"none",background:"none",border:"none",padding:0}),[]),C=u.useCallback(({muted:R,volume:P})=>{const v=R||P===0;return m.jsx("button",{"aria-label":v?"Unmute sound":"Mute sound",title:v?"Unmute sound":"Mute sound",onClick:y,onBlur:f,onFocus:()=>l(!0),style:x,type:"button",children:v?m.jsx(dh,{}):m.jsx(hh,{})})},[f,y,x]),w=u.useMemo(()=>t?t({muted:n,volume:s}):C({muted:n,volume:s}),[n,s,C,t]),M=u.useMemo(()=>(a||h)&&!n&&!K.isIosSafari()?(r??Sh)({isVertical:e,volume:s,onBlur:()=>l(!1),inputRef:d,setVolume:o}):null,[e,a,h,n,s,r,o]);return m.jsxs("div",{ref:c,style:b,children:[w,M]})};function Rh(e){const[t,r]=u.useState(e),n=u.useRef(null);return u.useEffect(()=>{const i=s=>{n.current&&!n.current.contains(s.target)&&r(!1)};return document.addEventListener("pointerup",i,!0),()=>{document.removeEventListener("pointerup",i,!0)}},[]),{ref:n,isComponentVisible:t,setIsComponentVisible:r}}var Th=35,Ph=70,Dh={height:30,paddingRight:15,paddingLeft:12,display:"flex",flexDirection:"row",alignItems:"center"},kh={width:22,display:"flex",alignItems:"center"},Ah={width:14,height:14,color:"black"},$h=()=>m.jsx("svg",{viewBox:"0 0 512 512",style:Ah,children:m.jsx("path",{fill:"currentColor",d:"M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z"})}),Fh=({rate:e,onSelect:t,selectedRate:r,keyboardSelectedRate:n})=>{const i=u.useCallback(h=>{h.stopPropagation(),h.preventDefault(),t(e)},[t,e]),[s,o]=u.useState(!1),a=u.useCallback(()=>{o(!0)},[]),l=u.useCallback(()=>{o(!1)},[]),c=n===e,d=u.useMemo(()=>({...Dh,backgroundColor:s||c?"#eee":"transparent"}),[s,c]);return m.jsxs("div",{onMouseEnter:a,onMouseLeave:l,tabIndex:0,style:d,onClick:i,children:[m.jsx("div",{style:kh,children:e===r?m.jsx($h,{}):null}),e.toFixed(1),"x"]},e)},Lh=({setIsComponentVisible:e,playbackRates:t,canvasSize:r})=>{const{setPlaybackRate:n,playbackRate:i}=u.useContext(K.Timeline.TimelineContext),[s,o]=u.useState(i);u.useEffect(()=>{const c=d=>{if(d.preventDefault(),d.key==="ArrowUp"){const h=t.findIndex(f=>f===s);if(h===0)return;o(h===-1?t[0]:t[h-1])}else if(d.key==="ArrowDown"){const h=t.findIndex(f=>f===s);if(h===t.length-1)return;o(h===-1?t[t.length-1]:t[h+1])}else d.key==="Enter"&&(n(s),e(!1))};return window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}},[t,s,n,e]);const a=u.useCallback(c=>{n(c),e(!1)},[e,n]),l=u.useMemo(()=>({position:"absolute",right:0,width:125,maxHeight:r.height-Ph-Th,bottom:35,background:"#fff",borderRadius:4,overflow:"auto",color:"black",textAlign:"left"}),[r.height]);return m.jsx("div",{style:l,children:t.map(c=>m.jsx(Fh,{selectedRate:i,onSelect:a,rate:c,keyboardSelectedRate:s},c))})},Ih={fontSize:13,fontWeight:"bold",color:"white",border:"2px solid white",borderRadius:20,paddingLeft:8,paddingRight:8,paddingTop:2,paddingBottom:2},pi={appearance:"none",backgroundColor:"transparent",border:"none",cursor:"pointer",paddingLeft:0,paddingRight:0,paddingTop:6,paddingBottom:6,height:37,display:"inline-flex",marginBottom:0,marginTop:0,alignItems:"center"},jh={...pi,position:"relative"},Nh=({playbackRates:e,canvasSize:t})=>{const{ref:r,isComponentVisible:n,setIsComponentVisible:i}=Rh(!1),{playbackRate:s}=u.useContext(K.Timeline.TimelineContext),o=u.useCallback(a=>{a.stopPropagation(),a.preventDefault(),i(l=>!l)},[i]);return m.jsx("div",{ref:r,children:m.jsxs("button",{type:"button","aria-label":"Change playback rate",style:jh,onClick:o,children:[m.jsxs("div",{style:Ih,children:[s,"x"]}),n&&m.jsx(Lh,{canvasSize:t,playbackRates:e,setIsComponentVisible:i})]})})},ro=(e,t,r)=>Math.round(sa(e,[0,r],[0,t-1],{extrapolateLeft:"clamp",extrapolateRight:"clamp"})),lr=5,Ar=12,gi=4,zh={userSelect:"none",WebkitUserSelect:"none",paddingTop:gi,paddingBottom:gi,boxSizing:"border-box",cursor:"pointer",position:"relative",touchAction:"none"},Bh={height:lr,backgroundColor:"rgba(255, 255, 255, 0.25)",width:"100%",borderRadius:lr/2},Vh=e=>{let t=e;for(;t.parentElement;)t=t.parentElement;return t},Uh=({durationInFrames:e,onSeekEnd:t,onSeekStart:r,inFrame:n,outFrame:i})=>{const s=u.useRef(null),o=Wi(s,!1),a=qi(s,{triggerOnWindowResize:!0,shouldApplyCssTransforms:!0}),{seek:l,play:c,pause:d,playing:h}=Fn(),f=K.Timeline.useTimelinePosition(),[p,y]=u.useState({dragging:!1}),b=a?.width??0,x=u.useCallback(v=>{if(v.button!==0)return;const I=s.current?.getBoundingClientRect().left,D=ro(v.clientX-I,e,b);d(),l(D),y({dragging:!0,wasPlaying:h}),r()},[e,b,d,l,h,r]),C=u.useCallback(v=>{if(!a)throw new Error("Player has no size");if(!p.dragging)return;const I=s.current?.getBoundingClientRect().left,D=ro(v.clientX-I,e,a.width);l(D)},[p.dragging,e,l,a]),w=u.useCallback(()=>{y({dragging:!1}),p.dragging&&(p.wasPlaying?c():d(),t())},[p,t,d,c]);u.useEffect(()=>{if(!p.dragging)return;const v=Vh(s.current);return v.addEventListener("pointermove",C),v.addEventListener("pointerup",w),()=>{v.removeEventListener("pointermove",C),v.removeEventListener("pointerup",w)}},[p.dragging,C,w]);const M=u.useMemo(()=>({height:Ar,width:Ar,borderRadius:Ar/2,position:"absolute",top:gi-Ar/2+5/2,backgroundColor:"white",left:Math.max(0,f/Math.max(1,e-1)*b-Ar/2),boxShadow:"0 0 2px black",opacity:Number(o)}),[o,e,f,b]),R=u.useMemo(()=>({height:lr,backgroundColor:"rgba(255, 255, 255, 1)",width:(f-(n??0))/(e-1)*100+"%",marginLeft:(n??0)/(e-1)*100+"%",borderRadius:lr/2}),[e,f,n]),P=u.useMemo(()=>({height:lr,backgroundColor:"rgba(255, 255, 255, 0.25)",width:((i??e-1)-(n??0))/(e-1)*100+"%",marginLeft:(n??0)/(e-1)*100+"%",borderRadius:lr/2,position:"absolute"}),[e,n,i]);return m.jsxs("div",{ref:s,onPointerDown:x,style:zh,children:[m.jsxs("div",{style:Bh,children:[m.jsx("div",{style:P}),m.jsx("div",{style:R})]}),m.jsx("div",{style:M})]})},no=e=>{const t=Math.floor(e/60),r=Math.floor(e-t*60);return`${String(t)}:${String(r).padStart(2,"0")}`},Oh=10,vi=12,Hh=({allowFullscreen:e,playerWidth:t})=>u.useMemo(()=>{const n=Ye,i=Ye,s=e?mi:0,o=i+n+s+vi*2+Oh*2,a=t-o,l=Math.max(a,0),c=l-Yt,h=(c<Yt?l:c)+o+Yt,f=t<h;return{maxTimeLabelWidth:l===0?null:l,displayVerticalVolumeSlider:f}},[e,t]),Wh=[0,.013,.049,.104,.175,.259,.352,.45,.55,.648,.741,.825,.896,.951,.987],qh=[0,8.1,15.5,22.5,29,35.3,41.2,47.1,52.9,58.8,64.7,71,77.5,84.5,91.9],Yh=1/.7,Gh={boxSizing:"border-box",position:"absolute",bottom:0,width:"100%",paddingTop:40,paddingBottom:10,backgroundImage:`linear-gradient(to bottom,${Wh.map((e,t)=>`hsla(0, 0%, 0%, ${e}) ${qh[t]*Yh}%`).join(", ")}, hsl(0, 0%, 0%) 100%)`,backgroundSize:"auto 145px",display:"flex",paddingRight:vi,paddingLeft:vi,flexDirection:"column",transition:"opacity 0.3s"},Xh={display:"flex",flexDirection:"row",width:"100%",alignItems:"center",justifyContent:"center",userSelect:"none",WebkitUserSelect:"none"},Zh={display:"flex",flexDirection:"row",userSelect:"none",WebkitUserSelect:"none",alignItems:"center"},on={width:12},Kh={height:8},Jh={flex:1},Qh={},ef=({durationInFrames:e,isFullscreen:t,fps:r,player:n,showVolumeControls:i,onFullscreenButtonClick:s,allowFullscreen:o,onExitFullscreenButtonClick:a,spaceKeyToPlayOrPause:l,onSeekEnd:c,onSeekStart:d,inFrame:h,outFrame:f,initiallyShowControls:p,canvasSize:y,renderPlayPauseButton:b,renderFullscreenButton:x,alwaysShowControls:C,showPlaybackRateControl:w,containerRef:M,buffering:R,hideControlsWhenPointerDoesntMove:P,onPointerDown:v,onDoubleClick:I,renderMuteButton:D,renderVolumeSlider:F})=>{const $=u.useRef(null),N=K.Timeline.useTimelinePosition(),[L,j]=u.useState(!1),H=Wi(M,P),{maxTimeLabelWidth:ne,displayVerticalVolumeSlider:V}=Hh({allowFullscreen:o,playerWidth:y?.width??0}),[Z,ge]=u.useState(()=>{if(typeof p=="boolean")return p;if(typeof p=="number"){if(p%1!==0)throw new Error("initiallyShowControls must be an integer or a boolean");if(Number.isNaN(p))throw new Error("initiallyShowControls must not be NaN");if(!Number.isFinite(p))throw new Error("initiallyShowControls must be finite");if(p<=0)throw new Error("initiallyShowControls must be a positive integer");return p}throw new TypeError("initiallyShowControls must be a number or a boolean")}),X=u.useMemo(()=>{const se=H||!n.playing||Z||C;return{...Gh,opacity:Number(se)}},[H,Z,n.playing,C]);u.useEffect(()=>{$.current&&l&&$.current.focus({preventScroll:!0})},[n.playing,l]),u.useEffect(()=>{j((typeof document<"u"&&(document.fullscreenEnabled||document.webkitFullscreenEnabled))??!1)},[]),u.useEffect(()=>{if(Z===!1)return;const $e=setTimeout(()=>{ge(!1)},Z===!0?2e3:Z);return()=>{clearInterval($e)}},[Z]);const ie=u.useMemo(()=>({color:"white",fontFamily:"sans-serif",fontSize:14,maxWidth:ne===null?void 0:ne,overflow:"hidden",textOverflow:"ellipsis"}),[ne]),ee=u.useMemo(()=>{if(w===!0)return[.5,.8,1,1.2,1.5,1.8,2,2.5,3];if(Array.isArray(w)){for(const se of w){if(typeof se!="number")throw new Error("Every item in showPlaybackRateControl must be a number");if(se<=0)throw new Error("Every item in showPlaybackRateControl must be positive")}return w}return null},[w]),fe=u.useRef(null),Ae=u.useRef(null),be=u.useCallback(se=>{(se.target===fe.current||se.target===Ae.current)&&v?.(se)},[v]),re=u.useCallback(se=>{(se.target===fe.current||se.target===Ae.current)&&I?.(se)},[I]);return m.jsxs("div",{ref:fe,style:X,onPointerDown:be,onDoubleClick:re,children:[m.jsxs("div",{ref:Ae,style:Xh,children:[m.jsxs("div",{style:Zh,children:[m.jsx("button",{ref:$,type:"button",style:pi,onClick:n.playing?n.pause:n.play,"aria-label":n.playing?"Pause video":"Play video",title:n.playing?"Pause video":"Play video",children:b===null?m.jsx(eo,{buffering:R,playing:n.playing}):b({playing:n.playing,isBuffering:R})??m.jsx(eo,{buffering:R,playing:n.playing})}),i?m.jsxs(m.Fragment,{children:[m.jsx("div",{style:on}),m.jsx(Mh,{renderMuteButton:D,renderVolumeSlider:F,displayVerticalVolumeSlider:V})]}):null,m.jsx("div",{style:on}),m.jsxs("div",{style:ie,children:[no(N/r)," / ",no(e/r)]}),m.jsx("div",{style:on})]}),m.jsx("div",{style:Jh}),ee&&y&&m.jsx(Nh,{canvasSize:y,playbackRates:ee}),ee&&L&&o?m.jsx("div",{style:on}):null,m.jsx("div",{style:Qh,children:L&&o?m.jsx("button",{type:"button","aria-label":t?"Exit fullscreen":"Enter Fullscreen",title:t?"Exit fullscreen":"Enter Fullscreen",style:pi,onClick:t?a:s,children:x===null?m.jsx(ch,{isFullscreen:t}):x({isFullscreen:t})}):null})]}),m.jsx("div",{style:Kh}),m.jsx(Uh,{onSeekEnd:c,onSeekStart:d,durationInFrames:e,inFrame:h,outFrame:f})]})},tf={display:"flex",justifyContent:"center",alignItems:"center",flex:1,height:"100%",width:"100%"};class Ma extends J.Component{state={hasError:null};static getDerivedStateFromError(t){return{hasError:t}}componentDidCatch(t){this.props.onError(t)}render(){return this.state.hasError?m.jsx("div",{style:tf,children:this.props.errorFallback({error:this.state.hasError})}):this.props.children}}var Yi="__remotion-player",Ra=typeof document>"u",rf=e=>{let t=!1;return{promise:new Promise((n,i)=>{e.then(s=>{if(t){i({isCanceled:t,value:s});return}n(s)}).catch(s=>{i({isCanceled:t,error:s})})}),cancel:()=>{t=!0}}},nf=e=>new Promise(t=>setTimeout(t,e)),sf=()=>{const e=u.useRef([]),t=u.useCallback(s=>{e.current=[...e.current,s]},[]),r=u.useCallback(s=>{e.current=e.current.filter(o=>o!==s)},[]),n=u.useCallback(()=>e.current.map(s=>s.cancel()),[]);return u.useMemo(()=>({appendPendingPromise:t,removePendingPromise:r,clearPendingPromises:n}),[t,n,r])},of=(e,t,r)=>{const n=sf(),i=u.useCallback(async l=>{if(l instanceof PointerEvent?l.pointerType==="touch":l.nativeEvent.pointerType==="touch"){e(l);return}n.clearPendingPromises();const c=rf(nf(200));n.appendPendingPromise(c);try{await c.promise,n.removePendingPromise(c),e(l)}catch(d){const h=d;if(n.removePendingPromise(c),!h.isCanceled)throw h.error}},[n,e]),s=u.useCallback(()=>{document.addEventListener("pointerup",l=>{i(l)},{once:!0})},[i]),o=u.useCallback(()=>{n.clearPendingPromises(),t()},[n,t]);return u.useMemo(()=>r?{handlePointerDown:s,handleDoubleClick:o}:{handlePointerDown:e,handleDoubleClick:()=>{}},[r,o,s,e])},yi=J.version.split(".")[0];if(yi==="0")throw new Error(`Version ${yi} of "react" is not supported by Remotion`);var af=parseInt(yi,10)>=18,lf=({controls:e,style:t,loop:r,autoPlay:n,allowFullscreen:i,inputProps:s,clickToPlay:o,showVolumeControls:a,doubleClickToFullscreen:l,spaceKeyToPlayOrPause:c,errorFallback:d,playbackRate:h,renderLoading:f,renderPoster:p,className:y,moveToBeginningWhenEnded:b,showPosterWhenUnplayed:x,showPosterWhenEnded:C,showPosterWhenPaused:w,showPosterWhenBuffering:M,inFrame:R,outFrame:P,initiallyShowControls:v,renderFullscreen:I,renderPlayPauseButton:D,renderMuteButton:F,renderVolumeSlider:$,alwaysShowControls:N,showPlaybackRateControl:L,posterFillMode:j,bufferStateDelayInMilliseconds:H,hideControlsWhenPointerDoesntMove:ne,overflowVisible:V,browserMediaControlsBehavior:Z},ge)=>{const X=K.useUnsafeVideoConfig(),ie=K.useVideo(),ee=u.useRef(null),fe=qi(ee,{triggerOnWindowResize:!1,shouldApplyCssTransforms:!1}),[Ae,be]=u.useState(!1),[re,se]=u.useState(n),[$e,Dt]=u.useState(()=>!1),[Ct,ut]=u.useState(!1),xe=u.useMemo(()=>typeof document>"u"?!1:!!(document.fullscreenEnabled||document.webkitFullscreenEnabled),[]),W=Fn();Ch({loop:r,playbackRate:h,moveToBeginningWhenEnded:b,inFrame:R,outFrame:P,frameRef:W.remotionInternal_currentFrameRef,browserMediaControlsBehavior:Z}),u.useEffect(()=>{Ae&&!W.playing&&(be(!1),W.play())},[Ae,W]),u.useEffect(()=>{const{current:g}=ee;if(!g)return;const _=()=>{const S=document.fullscreenElement===g||document.webkitFullscreenElement===g;Dt(S)};return document.addEventListener("fullscreenchange",_),document.addEventListener("webkitfullscreenchange",_),()=>{document.removeEventListener("fullscreenchange",_),document.removeEventListener("webkitfullscreenchange",_)}},[]);const Je=u.useCallback(g=>{W.isPlaying()?W.pause():W.play(g)},[W]),Xe=u.useCallback(()=>{if(!i)throw new Error("allowFullscreen is false");if(!xe)throw new Error("Browser doesnt support fullscreen");if(!ee.current)throw new Error("No player ref found");ee.current.webkitRequestFullScreen?ee.current.webkitRequestFullScreen():ee.current.requestFullscreen()},[i,xe]),Fe=u.useCallback(()=>{document.webkitExitFullscreen?document.webkitExitFullscreen():document.exitFullscreen()},[]);u.useEffect(()=>{const{current:g}=ee;if(!g)return;const _=()=>{const S=document.webkitFullscreenElement??document.fullscreenElement;S&&S===ee.current?W.emitter.dispatchFullscreenChange({isFullscreen:!0}):W.emitter.dispatchFullscreenChange({isFullscreen:!1})};return g.addEventListener("webkitfullscreenchange",_),g.addEventListener("fullscreenchange",_),()=>{g.removeEventListener("webkitfullscreenchange",_),g.removeEventListener("fullscreenchange",_)}},[W.emitter]);const vt=X?.durationInFrames??1,ze=u.useMemo(()=>!X||!fe?null:wa({canvasSize:fe,compositionHeight:X.height,compositionWidth:X.width,previewSize:"auto"}),[fe,X]),Le=ze?.scale??1,yt=u.useRef(!1);u.useEffect(()=>{if(!yt.current){yt.current=!0;return}W.emitter.dispatchScaleChange(Le)},[W.emitter,Le]);const{setMediaVolume:wt,setMediaMuted:ct}=u.useContext(K.SetMediaVolumeContext),{mediaMuted:dt,mediaVolume:Be}=u.useContext(K.MediaVolumeContext);u.useEffect(()=>{W.emitter.dispatchVolumeChange(Be)},[W.emitter,Be]);const Qe=dt||Be===0;u.useEffect(()=>{W.emitter.dispatchMuteChange({isMuted:Qe})},[W.emitter,Qe]);const[st,et]=u.useState(!1);u.useEffect(()=>{let g=null,_=!1;const S=()=>{_=!1,requestAnimationFrame(()=>{H===0?et(!0):g=setTimeout(()=>{_||et(!0)},H)})},A=()=>{requestAnimationFrame(()=>{_=!0,et(!1),g&&clearTimeout(g)})};return W.emitter.addEventListener("waiting",S),W.emitter.addEventListener("resume",A),()=>{W.emitter.removeEventListener("waiting",S),W.emitter.removeEventListener("resume",A),et(!1),g&&clearTimeout(g),_=!0}},[H,W.emitter]),u.useImperativeHandle(ge,()=>{const g={play:W.play,pause:()=>{be(!1),W.pause()},toggle:Je,getContainerNode:()=>ee.current,getCurrentFrame:W.getCurrentFrame,isPlaying:W.isPlaying,seekTo:_=>{const S=vt-1,A=Math.max(0,Math.min(S,_));W.isPlaying()&&(be(A!==S||r),W.pause()),A===S&&!r&&W.emitter.dispatchEnded(),W.seek(A)},isFullscreen:()=>{const{current:_}=ee;return _?document.fullscreenElement===_||document.webkitFullscreenElement===_:!1},requestFullscreen:Xe,exitFullscreen:Fe,getVolume:()=>dt?0:Be,setVolume:_=>{if(typeof _!="number")throw new TypeError(`setVolume() takes a number, got value of type ${typeof _}`);if(isNaN(_))throw new TypeError("setVolume() got a number that is NaN. Volume must be between 0 and 1.");if(_<0||_>1)throw new TypeError(`setVolume() got a number that is out of range. Must be between 0 and 1, got ${typeof _}`);wt(_)},isMuted:()=>Qe,mute:()=>{ct(!0)},unmute:()=>{ct(!1)},getScale:()=>Le,pauseAndReturnToPlayStart:()=>{W.pauseAndReturnToPlayStart()}};return Object.assign(W.emitter,g)},[vt,Fe,r,dt,Qe,Be,W,Xe,ct,wt,Je,Le]);const Oe=ie?ie.component:null,Ee=u.useMemo(()=>ba({canvasSize:fe,config:X,style:t,overflowVisible:V,layout:ze}),[fe,X,ze,V,t]),ot=u.useMemo(()=>_a({config:X,layout:ze,scale:Le,overflowVisible:V}),[X,ze,V,Le]),at=u.useMemo(()=>xa({canvasSize:fe,config:X,layout:ze,scale:Le,overflowVisible:V}),[fe,X,ze,V,Le]),Et=u.useCallback(g=>{W.pause(),W.emitter.dispatchError(g)},[W]),Ge=u.useCallback(g=>{g.stopPropagation(),Xe()},[Xe]),bt=u.useCallback(g=>{g.stopPropagation(),Fe()},[Fe]),xt=u.useCallback(g=>{(g instanceof MouseEvent?g.button===2:g.nativeEvent.button)||Je(g)},[Je]),pe=u.useCallback(()=>{ut(!0)},[]),Ln=u.useCallback(()=>{ut(!1)},[]),Hr=u.useCallback(()=>{$e?Fe():Xe()},[Fe,$e,Xe]),{handlePointerDown:St,handleDoubleClick:zt}=of(xt,Hr,l&&i&&xe);u.useEffect(()=>{re&&(W.play(),se(!1))},[re,W]);const br=u.useMemo(()=>f?f({height:Ee.height,width:Ee.width,isBuffering:st}):null,[Ee.height,Ee.width,f,st]),xr=u.useMemo(()=>({type:"scale",scale:Le}),[Le]);if(!X)return null;const er=p?p({height:j==="player-size"?Ee.height:X.height,width:j==="player-size"?Ee.width:X.width,isBuffering:st}):null;if(er===void 0)throw new TypeError("renderPoster() must return a React element, but undefined was returned");const _r=er&&[w&&!W.isPlaying()&&!Ct,C&&W.isLastFrame&&!W.isPlaying(),x&&!W.hasPlayed&&!W.isPlaying(),M&&st&&W.isPlaying()].some(Boolean),{left:Zi,top:In,width:Cr,height:Er,...jn}=ot,Wr=m.jsxs(m.Fragment,{children:[m.jsx("div",{style:ot,onPointerDown:o?St:void 0,onDoubleClick:l?zt:void 0,children:m.jsxs("div",{style:at,className:Yi,children:[Oe?m.jsx(Ma,{onError:Et,errorFallback:d,children:m.jsx(K.CurrentScaleContext.Provider,{value:xr,children:m.jsx(Oe,{...ie?.props??{},...s??{}})})}):null,_r&&j==="composition-size"?m.jsx("div",{style:{...jn,width:X.width,height:X.height},onPointerDown:o?St:void 0,onDoubleClick:l?zt:void 0,children:er}):null]})}),_r&&j==="player-size"?m.jsx("div",{style:ot,onPointerDown:o?St:void 0,onDoubleClick:l?zt:void 0,children:er}):null,e?m.jsx(ef,{fps:X.fps,durationInFrames:X.durationInFrames,player:W,containerRef:ee,onFullscreenButtonClick:Ge,isFullscreen:$e,allowFullscreen:i,showVolumeControls:a,onExitFullscreenButtonClick:bt,spaceKeyToPlayOrPause:c,onSeekEnd:Ln,onSeekStart:pe,inFrame:R,outFrame:P,initiallyShowControls:v,canvasSize:fe,renderFullscreenButton:I,renderPlayPauseButton:D,alwaysShowControls:N,showPlaybackRateControl:L,buffering:st,hideControlsWhenPointerDoesntMove:ne,onDoubleClick:l?zt:void 0,onPointerDown:o?St:void 0,renderMuteButton:F,renderVolumeSlider:$}):null]});return Ra&&!af?m.jsx("div",{ref:ee,style:Ee,className:y,children:Wr}):m.jsx("div",{ref:ee,style:Ee,className:y,children:m.jsx(u.Suspense,{fallback:br,children:Wr})})},uf=u.forwardRef(lf),Ta="remotion.volumePreference",cf=e=>{if(!(typeof window>"u"))try{window.localStorage.setItem(Ta,String(e))}catch(t){console.log("Could not persist volume",t)}},df=()=>{if(typeof window>"u")return 1;try{const e=window.localStorage.getItem(Ta);return e?Number(e):1}catch{return 1}},Gi="player-comp",Pa=({children:e,timelineContext:t,fps:r,compositionHeight:n,compositionWidth:i,durationInFrames:s,component:o,numberOfSharedAudioTags:a,initiallyMuted:l})=>{const c=u.useMemo(()=>({compositions:[{component:o,durationInFrames:s,height:n,width:i,fps:r,id:Gi,nonce:777,folderName:null,parentFolderName:null,schema:null,calculateMetadata:null}],folders:[],registerFolder:()=>{},unregisterFolder:()=>{},registerComposition:()=>{},unregisterComposition:()=>{},currentCompositionMetadata:null,setCurrentCompositionMetadata:()=>{},canvasContent:{type:"composition",compositionId:"player-comp"},setCanvasContent:()=>{},updateCompositionDefaultProps:()=>{}}),[o,s,n,i,r]),[d,h]=u.useState(()=>l),[f,p]=u.useState(()=>df()),y=u.useMemo(()=>({mediaMuted:d,mediaVolume:f}),[d,f]),b=u.useCallback(C=>{p(C),cf(C)},[]),x=u.useMemo(()=>({setMediaMuted:h,setMediaVolume:b}),[b]);return m.jsx(K.CanUseRemotionHooksProvider,{children:m.jsx(K.Timeline.TimelineContext.Provider,{value:t,children:m.jsx(K.CompositionManager.Provider,{value:c,children:m.jsx(K.ResolveCompositionConfig,{children:m.jsx(K.PrefetchProvider,{children:m.jsx(K.DurationsContextProvider,{children:m.jsx(K.MediaVolumeContext.Provider,{value:y,children:m.jsx(K.SetMediaVolumeContext.Provider,{value:x,children:m.jsx(K.SharedAudioContextProvider,{numberOfAudioTags:a,component:o,children:m.jsx(K.BufferingProvider,{children:e})})})})})})})})})})},io=(e,t)=>{if(typeof e>"u"||e===null)return e??null;if(typeof e!="number")throw new TypeError(`"${t}" must be a number, but is ${JSON.stringify(e)}`);if(Number.isNaN(e))throw new TypeError(`"${t}" must not be NaN, but is ${JSON.stringify(e)}`);if(!Number.isFinite(e))throw new TypeError(`"${t}" must be finite, but is ${JSON.stringify(e)}`);if(e%1!==0)throw new TypeError(`"${t}" must be an integer, but is ${JSON.stringify(e)}`);return e},hf=({inFrame:e,durationInFrames:t,outFrame:r})=>{const n=io(e,"inFrame"),i=io(r,"outFrame");if(!(n===null&&i===null)){if(n!==null&&n>t-1)throw new Error("inFrame must be less than (durationInFrames - 1), but is "+n);if(i!==null&&i>t-1)throw new Error("outFrame must be less than (durationInFrames - 1), but is "+i);if(n!==null&&n<0)throw new Error("inFrame must be greater than 0, but is "+n);if(i!==null&&i<=0)throw new Error(`outFrame must be greater than 0, but is ${i}. If you want to render a single frame, use <Thumbnail /> instead.`);if(i!==null&&n!==null&&i<=n)throw new Error("outFrame must be greater than inFrame, but is "+i+" <= "+n)}},ff=({initialFrame:e,durationInFrames:t})=>{if(typeof t!="number")throw new Error(`\`durationInFrames\` must be a number, but is ${JSON.stringify(t)}`);if(!(typeof e>"u")){if(typeof e!="number")throw new Error(`\`initialFrame\` must be a number, but is ${JSON.stringify(e)}`);if(Number.isNaN(e))throw new Error("`initialFrame` must be a number, but is NaN");if(!Number.isFinite(e))throw new Error("`initialFrame` must be a number, but is Infinity");if(e%1!==0)throw new Error(`\`initialFrame\` must be an integer, but is ${JSON.stringify(e)}`);if(e>t-1)throw new Error(`\`initialFrame\` must be less or equal than \`durationInFrames - 1\`, but is ${JSON.stringify(e)}`)}},mf=e=>{if(e!==void 0){if(e>4)throw new Error(`The highest possible playback rate is 4. You passed: ${e}`);if(e<-4)throw new Error(`The lowest possible playback rate is -4. You passed: ${e}`);if(e===0)throw new Error("A playback rate of 0 is not supported.")}},pf=$n.validateFps,so=$n.validateDimension,gf=$n.validateDurationInFrames,vf=$n.validateDefaultAndInputProps,yf=e=>"component"in e?e.component:null,wf=({durationInFrames:e,compositionHeight:t,compositionWidth:r,fps:n,inputProps:i,style:s,controls:o=!1,loop:a=!1,autoPlay:l=!1,showVolumeControls:c=!0,allowFullscreen:d=!0,clickToPlay:h,doubleClickToFullscreen:f=!1,spaceKeyToPlayOrPause:p=!0,moveToBeginningWhenEnded:y=!0,numberOfSharedAudioTags:b=5,errorFallback:x=()=>"⚠️",playbackRate:C=1,renderLoading:w,className:M,showPosterWhenUnplayed:R,showPosterWhenEnded:P,showPosterWhenPaused:v,showPosterWhenBuffering:I,initialFrame:D,renderPoster:F,inFrame:$,outFrame:N,initiallyShowControls:L,renderFullscreenButton:j,renderPlayPauseButton:H,renderVolumeSlider:ne,alwaysShowControls:V=!1,initiallyMuted:Z=!1,showPlaybackRateControl:ge=!1,posterFillMode:X="player-size",bufferStateDelayInMilliseconds:ie,hideControlsWhenPointerDoesntMove:ee=!0,overflowVisible:fe=!1,renderMuteButton:Ae,browserMediaControlsBehavior:be,...re},se)=>{if(typeof window<"u"&&u.useLayoutEffect(()=>{window.remotion_isPlayer=!0},[]),re.defaultProps!==void 0)throw new Error("The <Player /> component does not accept `defaultProps`, but some were passed. Use `inputProps` instead.");const $e=yf(re);if($e?.type===Os)throw new TypeError("'component' should not be an instance of <Composition/>. Pass the React component directly, and set the duration, fps and dimensions as separate props. See https://www.remotion.dev/docs/player/examples for an example.");if($e===Os)throw new TypeError("'component' must not be the 'Composition' component. Pass your own React component directly, and set the duration, fps and dimensions as separate props. See https://www.remotion.dev/docs/player/examples for an example.");const Dt=K.useLazyComponent(re);ff({initialFrame:D,durationInFrames:e});const[Ct,ut]=u.useState(()=>({[Gi]:D??0})),[xe,W]=u.useState(!1),[Je]=u.useState("player-comp"),Xe=u.useRef(null),Fe=u.useRef([]),vt=u.useRef(!1),[ze,Le]=u.useState(C);if(typeof t!="number")throw new TypeError(`'compositionHeight' must be a number but got '${typeof t}' instead`);if(typeof r!="number")throw new TypeError(`'compositionWidth' must be a number but got '${typeof r}' instead`);if(so(t,"compositionHeight","of the <Player /> component"),so(r,"compositionWidth","of the <Player /> component"),gf(e,{component:"of the <Player/> component",allowFloats:!1}),pf(n,"as a prop of the <Player/> component",!1),vf(i,"inputProps",null),hf({durationInFrames:e,inFrame:$,outFrame:N}),typeof o!="boolean"&&typeof o<"u")throw new TypeError(`'controls' must be a boolean or undefined but got '${typeof o}' instead`);if(typeof l!="boolean"&&typeof l<"u")throw new TypeError(`'autoPlay' must be a boolean or undefined but got '${typeof l}' instead`);if(typeof a!="boolean"&&typeof a<"u")throw new TypeError(`'loop' must be a boolean or undefined but got '${typeof a}' instead`);if(typeof f!="boolean"&&typeof f<"u")throw new TypeError(`'doubleClickToFullscreen' must be a boolean or undefined but got '${typeof f}' instead`);if(typeof c!="boolean"&&typeof c<"u")throw new TypeError(`'showVolumeControls' must be a boolean or undefined but got '${typeof c}' instead`);if(typeof d!="boolean"&&typeof d<"u")throw new TypeError(`'allowFullscreen' must be a boolean or undefined but got '${typeof d}' instead`);if(typeof h!="boolean"&&typeof h<"u")throw new TypeError(`'clickToPlay' must be a boolean or undefined but got '${typeof h}' instead`);if(typeof p!="boolean"&&typeof p<"u")throw new TypeError(`'spaceKeyToPlayOrPause' must be a boolean or undefined but got '${typeof p}' instead`);if(typeof b!="number"||b%1!==0||!Number.isFinite(b)||Number.isNaN(b)||b<0)throw new TypeError(`'numberOfSharedAudioTags' must be an integer but got '${b}' instead`);mf(ze),u.useEffect(()=>{Le(C)},[C]),u.useImperativeHandle(se,()=>Xe.current,[]);const yt=u.useMemo(()=>({frame:Ct,playing:xe,rootId:Je,playbackRate:ze,imperativePlaying:vt,setPlaybackRate:Be=>{Le(Be)},audioAndVideoTags:Fe}),[Ct,ze,xe,Je]),wt=u.useMemo(()=>({setFrame:ut,setPlaying:W}),[ut]);typeof window<"u"&&u.useLayoutEffect(()=>{K.CSSUtils.injectCSS(K.CSSUtils.makeDefaultPreviewCSS(`.${Yi}`,"#fff"))},[]);const ct=u.useMemo(()=>i??{},[i]),dt=u.useMemo(()=>be??{mode:"prevent-media-session"},[be]);return m.jsx(K.IsPlayerContextProvider,{children:m.jsx(Pa,{timelineContext:yt,component:Dt,compositionHeight:t,compositionWidth:r,durationInFrames:e,fps:n,numberOfSharedAudioTags:b,initiallyMuted:Z,children:m.jsx(K.Timeline.SetTimelineContext.Provider,{value:wt,children:m.jsx(wh,{currentPlaybackRate:ze,children:m.jsx(uf,{ref:Xe,posterFillMode:X,renderLoading:w,autoPlay:!!l,loop:!!a,controls:!!o,errorFallback:x,style:s,inputProps:ct,allowFullscreen:!!d,moveToBeginningWhenEnded:!!y,clickToPlay:typeof h=="boolean"?h:!!o,showVolumeControls:!!c,doubleClickToFullscreen:!!f,spaceKeyToPlayOrPause:!!p,playbackRate:ze,className:M??void 0,showPosterWhenUnplayed:!!R,showPosterWhenEnded:!!P,showPosterWhenPaused:!!v,showPosterWhenBuffering:!!I,renderPoster:F,inFrame:$??null,outFrame:N??null,initiallyShowControls:L??!0,renderFullscreen:j??null,renderPlayPauseButton:H??null,renderMuteButton:Ae??null,renderVolumeSlider:ne??null,alwaysShowControls:V,showPlaybackRateControl:ge,bufferStateDelayInMilliseconds:ie??300,hideControlsWhenPointerDoesntMove:ee,overflowVisible:fe,browserMediaControlsBehavior:dt})})})})})},bf=u.forwardRef,xf=bf(wf),_f=()=>{const e=u.useContext(Ea);if(!e)throw new TypeError("Expected Player event emitter context");return u.useMemo(()=>({emitter:e}),[e])},wi=J.version.split(".")[0];if(wi==="0")throw new Error(`Version ${wi} of "react" is not supported by Remotion`);var Cf=parseInt(wi,10)>=18,Ef=({style:e,inputProps:t,errorFallback:r,renderLoading:n,className:i,overflowVisible:s},o)=>{const a=K.useUnsafeVideoConfig(),l=K.useVideo(),c=u.useRef(null),d=qi(c,{triggerOnWindowResize:!1,shouldApplyCssTransforms:!1}),h=u.useMemo(()=>!a||!d?null:wa({canvasSize:d,compositionHeight:a.height,compositionWidth:a.width,previewSize:"auto"}),[d,a]),f=h?.scale??1,p=_f();Sa(p.emitter),u.useImperativeHandle(o,()=>{const v={getContainerNode:()=>c.current,getScale:()=>f};return Object.assign(p.emitter,v)},[f,p.emitter]);const y=l?l.component:null,b=u.useMemo(()=>ba({config:a,style:e,canvasSize:d,overflowVisible:s,layout:h}),[d,a,h,s,e]),x=u.useMemo(()=>_a({config:a,layout:h,scale:f,overflowVisible:s}),[a,h,s,f]),C=u.useMemo(()=>xa({canvasSize:d,config:a,layout:h,scale:f,overflowVisible:s}),[d,a,h,s,f]),w=u.useCallback(v=>{p.emitter.dispatchError(v)},[p.emitter]),M=u.useMemo(()=>n?n({height:b.height,width:b.width,isBuffering:!1}):null,[b.height,b.width,n]),R=u.useMemo(()=>({type:"scale",scale:f}),[f]);if(!a)return null;const P=m.jsx("div",{style:x,children:m.jsx("div",{style:C,className:Yi,children:y?m.jsx(Ma,{onError:w,errorFallback:r,children:m.jsx(K.CurrentScaleContext.Provider,{value:R,children:m.jsx(y,{...l?.props??{},...t??{}})})}):null})});return Ra&&!Cf?m.jsx("div",{ref:c,style:b,className:i,children:P}):m.jsx("div",{ref:c,style:b,className:i,children:m.jsx(u.Suspense,{fallback:M,children:P})})},Sf=u.forwardRef(Ef),Mf=({frameToDisplay:e,style:t,inputProps:r,compositionHeight:n,compositionWidth:i,durationInFrames:s,fps:o,className:a,errorFallback:l=()=>"⚠️",renderLoading:c,overflowVisible:d=!1,...h},f)=>{typeof window<"u"&&u.useLayoutEffect(()=>{window.remotion_isPlayer=!0},[]);const[p]=u.useState(()=>String(vr(null))),y=u.useRef(null),b=u.useMemo(()=>({playing:!1,frame:{[Gi]:e},rootId:p,imperativePlaying:{current:!1},playbackRate:1,setPlaybackRate:()=>{throw new Error("thumbnail")},audioAndVideoTags:{current:[]}}),[e,p]);u.useImperativeHandle(f,()=>y.current,[]);const x=K.useLazyComponent(h),[C]=u.useState(()=>new yh),w=u.useMemo(()=>r??{},[r]);return m.jsx(K.IsPlayerContextProvider,{children:m.jsx(Pa,{timelineContext:b,component:x,compositionHeight:n,compositionWidth:i,durationInFrames:s,fps:o,numberOfSharedAudioTags:0,initiallyMuted:!0,children:m.jsx(Ea.Provider,{value:C,children:m.jsx(Sf,{ref:y,className:a,errorFallback:l,inputProps:w,renderLoading:c,style:t,overflowVisible:d})})})})},Rf=u.forwardRef;Rf(Mf);const Tf=()=>{const e=J.useRef(null),t=J.useRef(null),r=J.useMemo(()=>Si(),[]),n=J.useRef(null),i=J.useRef(0),[s,o]=J.useState({width:window.innerWidth,height:window.innerHeight});return J.useEffect(()=>{const a=()=>{const c=e.current;c&&(c.width=window.innerWidth*window.devicePixelRatio,c.height=window.innerHeight*window.devicePixelRatio,c.style.width=`${window.innerWidth}px`,c.style.height=`${window.innerHeight}px`,o({width:window.innerWidth,height:window.innerHeight}))},l=Da(a,100);return window.addEventListener("resize",l),a(),()=>window.removeEventListener("resize",l)},[]),J.useEffect(()=>{const a=e.current;if(!a)return;const l=a.getContext("2d",{alpha:!0,desynchronized:!0,willReadFrequently:!1});if(!l)return;a.width=s.width*window.devicePixelRatio,a.height=s.height*window.devicePixelRatio,l.scale(window.devicePixelRatio,window.devicePixelRatio),n.current||(n.current=Array.from({length:200},()=>({x:Math.random()*s.width,y:Math.random()*s.height,size:Math.random()*4+1,speedX:(Math.random()-.5)*.5,speedY:(Math.random()-.5)*.5,opacity:Math.random()*.7+.3,hue:Math.random()*20+180})));let c=!1;const d=h=>{if(c)return;if(h-i.current<16.67){t.current=requestAnimationFrame(d);return}i.current=h,l.clearRect(0,0,s.width,s.height);const f=l.createRadialGradient(s.width/2,s.height/2,0,s.width/2,s.height/2,s.width*.8);f.addColorStop(0,"rgba(158, 207, 208, 0.05)"),f.addColorStop(.5,"rgba(122, 158, 159, 0.03)"),f.addColorStop(1,"rgba(80, 108, 127, 0.02)"),l.fillStyle=f,l.fillRect(0,0,s.width,s.height),l.globalCompositeOperation="screen";const p=n.current,y=h*2e-4;for(let C=0;C<p.length;C++){const w=p[C],M=r(w.x*.002,w.y*.002,y,0)*3,R=r(w.x*.002,w.y*.002,0,y)*3;w.x+=w.speedX+M,w.y+=w.speedY+R,w.x<-100&&(w.x=s.width+100),w.x>s.width+100&&(w.x=-100),w.y<-100&&(w.y=s.height+100),w.y>s.height+100&&(w.y=-100);const P=l.createRadialGradient(w.x,w.y,0,w.x,w.y,w.size*3),v=`hsla(${w.hue}, 70%, 70%,`;P.addColorStop(0,`${v} ${w.opacity})`),P.addColorStop(.5,`${v} ${w.opacity*.5})`),P.addColorStop(1,`${v} 0)`),l.beginPath(),l.arc(w.x,w.y,w.size*3,0,Math.PI*2),l.fillStyle=P,l.fill()}l.globalCompositeOperation="screen",l.beginPath(),l.strokeStyle="rgba(158, 207, 208, 0.1)",l.lineWidth=1;const b=Math.floor(s.width/40),x=s.width/b;for(let C=0;C<b;C++){const w=C*x,M=s.height/2;l.moveTo(w,M);for(let R=w;R<w+x;R+=4){const P=r(R*.003,M*.003,y,0),v=M+Math.sin(R*.02+h*.001)*40+P*60;l.lineTo(R,v)}}l.stroke(),t.current=requestAnimationFrame(d)};return d(0),()=>{c=!0,t.current&&cancelAnimationFrame(t.current)}},[s,r]),m.jsx(Pi,{style:{background:"transparent",zIndex:3},children:m.jsx("canvas",{ref:e,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",opacity:.9,mixBlendMode:"screen",pointerEvents:"none",willChange:"transform"}})})},Da=(e,t)=>{let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e.apply(void 0,n),t)}},Pf=()=>{const[e,t]=J.useState({width:window.innerWidth,height:window.innerHeight});return J.useEffect(()=>{const r=Da(()=>{t({width:window.innerWidth,height:window.innerHeight})},100);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),m.jsx(xf,{component:Tf,durationInFrames:300,compositionWidth:e.width,compositionHeight:e.height,fps:30,style:{width:"100%",height:"100%",position:"fixed",top:0,left:0,zIndex:3,opacity:.9,mixBlendMode:"screen"},loop:!0})};class Df{constructor(){this.noise4D=Si(),this.spheres=[],this.materials=[],this.baseGeometry=new Ua(1,3),this.currentSection="hero",this.createMaterials(),this.init()}createMaterials(){[{color:5270655,emissive:2109504},{color:8035999,emissive:3163472},{color:10407888,emissive:4217952}].forEach(({color:r,emissive:n})=>{this.materials.push(new Oa({color:r,emissive:n,emissiveIntensity:.2,transparent:!0,opacity:.3,shininess:100,specular:8035999,side:Ha,wireframe:Math.random()>.7,flatShading:!0}))})}init(){for(let t=0;t<25;t++){const r=new uo(this.baseGeometry,this.materials[Math.floor(Math.random()*this.materials.length)]),n=25+Math.random()*35,i=Math.random()*Math.PI*2,s=Math.acos(Math.random()*2-1);r.position.set(n*Math.sin(s)*Math.cos(i),n*Math.sin(s)*Math.sin(i),n*Math.cos(s)),r.scale.setScalar(Math.random()*2.5+.5),r.userData={originalPosition:r.position.clone(),originalScale:r.scale.x,rotationSpeed:(Math.random()-.5)*.003,pulseSpeed:Math.random()*.003+.001,pulseOffset:Math.random()*Math.PI*2,orbitRadius:n,orbitSpeed:(Math.random()-.5)*.001,orbitPhase:Math.random()*Math.PI*2,distortionFreq:Math.random()*2+1,distortionAmp:Math.random()*.3+.1},this.spheres.push(r)}}updateSection(t){this.currentSection=t,this.spheres.forEach((r,n)=>{const i=r.material;switch(t){case"hero":i.opacity=.4,i.emissiveIntensity=.3,r.userData.distortionAmp=.15,r.userData.orbitMultiplier=1.2;break;case"vision-solutions":i.opacity=.5,i.emissiveIntensity=.4,r.userData.distortionAmp=.25,r.userData.orbitMultiplier=1.5;break;case"manifesto":i.opacity=.35,i.emissiveIntensity=.25,r.userData.distortionAmp=.2,r.userData.orbitMultiplier=1;break}})}update(t){this.spheres.forEach((r,n)=>{const{originalPosition:i,originalScale:s,rotationSpeed:o,pulseSpeed:a,pulseOffset:l,orbitRadius:c,orbitSpeed:d,orbitPhase:h,distortionFreq:f,distortionAmp:p,orbitMultiplier:y=1}=r.userData,b=this.noise4D(r.position.x*.02,r.position.y*.02,r.position.z*.02,t)*1.5,x=t*d*y+h,C=Math.cos(x)*c*1.2,w=Math.sin(x)*c*1.2;r.position.x=i.x+C*.3+Math.cos(t+n)*3*b,r.position.y=i.y+Math.sin(t+n)*3*b,r.position.z=i.z+w*.3+Math.cos(t*.5+n)*3*b,r.rotation.x+=o*(1+b*.7),r.rotation.y+=o*1.3*(1+b*.7),r.rotation.z+=o*.9*(1+b*.7);const M=Math.sin(t*a*1.2+l),R=this.noise4D(t*.15,n,0,0)*.7,P=(M+R)*.2+1;r.scale.setScalar(s*P),r.geometry.userData.originalPositions||(r.geometry.userData.originalPositions=Array.from(r.geometry.attributes.position.array));const v=r.geometry.attributes.position.array,I=r.geometry.userData.originalPositions;for(let D=0;D<v.length;D+=3){const F=new Pt(I[D],I[D+1],I[D+2]),$=this.noise4D(F.x*f+t*1.2,F.y*f+t*1.2,F.z*f+t*1.2,n);F.multiplyScalar(1+$*p*1.5),v[D]=F.x,v[D+1]=F.y,v[D+2]=F.z}if(r.geometry.attributes.position.needsUpdate=!0,r.material.transparent){const D=this.noise4D(t*.7,n,0,0)*.15;r.material.opacity=Math.max(.2,Math.min(.6,r.material.opacity+D)),r.material.emissiveIntensity=Math.max(.2,Math.min(.5,r.material.emissiveIntensity+D*.5))}})}dispose(){this.baseGeometry.dispose(),this.materials.forEach(t=>t.dispose()),this.spheres.forEach(t=>{t.geometry!==this.baseGeometry&&t.geometry.dispose()})}}const ka={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class wr{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const kf=new Wa(-1,1,1,-1,0,1);class Af extends ao{constructor(){super(),this.setAttribute("position",new Qi([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Qi([0,2,0,0,2,0],2))}}const $f=new Af;class Xi{constructor(t){this._mesh=new uo($f,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,kf)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class Ff extends wr{constructor(t,r){super(),this.textureID=r!==void 0?r:"tDiffuse",t instanceof Wt?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=hn.clone(t.uniforms),this.material=new Wt({name:t.name!==void 0?t.name:"unspecified",defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new Xi(this.material)}render(t,r,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(r),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class oo extends wr{constructor(t,r){super(),this.scene=t,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,r,n){const i=t.getContext(),s=t.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),s.buffers.stencil.setFunc(i.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(r),this.clear&&t.clear(),t.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(i.EQUAL,1,4294967295),s.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),s.buffers.stencil.setLocked(!0)}}class Lf extends wr{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class If{constructor(t,r){if(this.renderer=t,this._pixelRatio=t.getPixelRatio(),r===void 0){const n=t.getSize(new it);this._width=n.width,this._height=n.height,r=new Fr(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Lr}),r.texture.name="EffectComposer.rt1"}else this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Ff(ka),this.copyPass.material.blending=co,this.clock=new qa}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,r){this.passes.splice(r,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const r=this.passes.indexOf(t);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(t){for(let r=t+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(t){t===void 0&&(t=this.clock.getDelta());const r=this.renderer.getRenderTarget();let n=!1;for(let i=0,s=this.passes.length;i<s;i++){const o=this.passes[i];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),o.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),o.needsSwap){if(n){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}oo!==void 0&&(o instanceof oo?n=!0:o instanceof Lf&&(n=!1))}}this.renderer.setRenderTarget(r)}reset(t){if(t===void 0){const r=this.renderer.getSize(new it);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,r){this._width=t,this._height=r;const n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,i)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class jf extends wr{constructor(t,r,n=null,i=null,s=null){super(),this.scene=t,this.camera=r,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Xt}render(t,r,n){const i=t.autoClear;t.autoClear=!1;let s,o;this.overrideMaterial!==null&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(t.getClearColor(this._oldClearColor),t.setClearColor(this.clearColor)),this.clearAlpha!==null&&(s=t.getClearAlpha(),t.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear===!0&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor!==null&&t.setClearColor(this._oldClearColor),this.clearAlpha!==null&&t.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=o),t.autoClear=i}}const Nf={name:"LuminosityHighPassShader",shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Xt(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			vec3 luma = vec3( 0.299, 0.587, 0.114 );

			float v = dot( texel.xyz, luma );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class cr extends wr{constructor(t,r,n,i){super(),this.strength=r!==void 0?r:1,this.radius=n,this.threshold=i,this.resolution=t!==void 0?new it(t.x,t.y):new it(256,256),this.clearColor=new Xt(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let s=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);this.renderTargetBright=new Fr(s,o,{type:Lr}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let h=0;h<this.nMips;h++){const f=new Fr(s,o,{type:Lr});f.texture.name="UnrealBloomPass.h"+h,f.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(f);const p=new Fr(s,o,{type:Lr});p.texture.name="UnrealBloomPass.v"+h,p.texture.generateMipmaps=!1,this.renderTargetsVertical.push(p),s=Math.round(s/2),o=Math.round(o/2)}const a=Nf;this.highPassUniforms=hn.clone(a.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Wt({uniforms:this.highPassUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}),this.separableBlurMaterials=[];const l=[3,5,7,9,11];s=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);for(let h=0;h<this.nMips;h++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(l[h])),this.separableBlurMaterials[h].uniforms.invSize.value=new it(1/s,1/o),s=Math.round(s/2),o=Math.round(o/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=r,this.compositeMaterial.uniforms.bloomRadius.value=.1;const c=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=c,this.bloomTintColors=[new Pt(1,1,1),new Pt(1,1,1),new Pt(1,1,1),new Pt(1,1,1),new Pt(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const d=ka;this.copyUniforms=hn.clone(d.uniforms),this.blendMaterial=new Wt({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:lo,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Xt,this.oldClearAlpha=1,this.basic=new Ya,this.fsQuad=new Xi(null)}dispose(){for(let t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(let t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose();for(let t=0;t<this.separableBlurMaterials.length;t++)this.separableBlurMaterials[t].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(t,r){let n=Math.round(t/2),i=Math.round(r/2);this.renderTargetBright.setSize(n,i);for(let s=0;s<this.nMips;s++)this.renderTargetsHorizontal[s].setSize(n,i),this.renderTargetsVertical[s].setSize(n,i),this.separableBlurMaterials[s].uniforms.invSize.value=new it(1/n,1/i),n=Math.round(n/2),i=Math.round(i/2)}render(t,r,n,i,s){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();const o=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),s&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,t.setRenderTarget(null),t.clear(),this.fsQuad.render(t)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this.fsQuad.render(t);let a=this.renderTargetBright;for(let l=0;l<this.nMips;l++)this.fsQuad.material=this.separableBlurMaterials[l],this.separableBlurMaterials[l].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[l].uniforms.direction.value=cr.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[l]),t.clear(),this.fsQuad.render(t),this.separableBlurMaterials[l].uniforms.colorTexture.value=this.renderTargetsHorizontal[l].texture,this.separableBlurMaterials[l].uniforms.direction.value=cr.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[l]),t.clear(),this.fsQuad.render(t),a=this.renderTargetsVertical[l];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(n),this.fsQuad.render(t)),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=o}getSeperableBlurMaterial(t){const r=[];for(let n=0;n<t;n++)r.push(.39894*Math.exp(-.5*n*n/(t*t))/t);return new Wt({defines:{KERNEL_RADIUS:t},uniforms:{colorTexture:{value:null},invSize:{value:new it(.5,.5)},direction:{value:new it(.5,.5)},gaussianCoefficients:{value:r}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(t){return new Wt({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}cr.BlurDirectionX=new it(1,0);cr.BlurDirectionY=new it(0,1);const zf={name:"BokehShader",defines:{DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tColor:{value:null},tDepth:{value:null},focus:{value:1},aspect:{value:1},aperture:{value:.025},maxblur:{value:.01},nearClip:{value:1},farClip:{value:1e3}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#include <common>

		varying vec2 vUv;

		uniform sampler2D tColor;
		uniform sampler2D tDepth;

		uniform float maxblur; // max blur amount
		uniform float aperture; // aperture - bigger values for shallower depth of field

		uniform float nearClip;
		uniform float farClip;

		uniform float focus;
		uniform float aspect;

		#include <packing>

		float getDepth( const in vec2 screenPosition ) {
			#if DEPTH_PACKING == 1
			return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );
			#else
			return texture2D( tDepth, screenPosition ).x;
			#endif
		}

		float getViewZ( const in float depth ) {
			#if PERSPECTIVE_CAMERA == 1
			return perspectiveDepthToViewZ( depth, nearClip, farClip );
			#else
			return orthographicDepthToViewZ( depth, nearClip, farClip );
			#endif
		}


		void main() {

			vec2 aspectcorrect = vec2( 1.0, aspect );

			float viewZ = getViewZ( getDepth( vUv ) );

			float factor = ( focus + viewZ ); // viewZ is <= 0, so this is a difference equation

			vec2 dofblur = vec2 ( clamp( factor * aperture, -maxblur, maxblur ) );

			vec2 dofblur9 = dofblur * 0.9;
			vec2 dofblur7 = dofblur * 0.7;
			vec2 dofblur4 = dofblur * 0.4;

			vec4 col = vec4( 0.0 );

			col += texture2D( tColor, vUv.xy );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur );

			col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur9 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur9 );

			col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur7 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur7 );

			col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.4,   0.0  ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur4 );
			col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur4 );

			gl_FragColor = col / 41.0;
			gl_FragColor.a = 1.0;

		}`};class Bf extends wr{constructor(t,r,n){super(),this.scene=t,this.camera=r;const i=n.focus!==void 0?n.focus:1,s=n.aperture!==void 0?n.aperture:.025,o=n.maxblur!==void 0?n.maxblur:1;this.renderTargetDepth=new Fr(1,1,{minFilter:es,magFilter:es,type:Lr}),this.renderTargetDepth.texture.name="BokehPass.depth",this.materialDepth=new Ga,this.materialDepth.depthPacking=Xa,this.materialDepth.blending=co;const a=zf,l=hn.clone(a.uniforms);l.tDepth.value=this.renderTargetDepth.texture,l.focus.value=i,l.aspect.value=r.aspect,l.aperture.value=s,l.maxblur.value=o,l.nearClip.value=r.near,l.farClip.value=r.far,this.materialBokeh=new Wt({defines:Object.assign({},a.defines),uniforms:l,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}),this.uniforms=l,this.fsQuad=new Xi(this.materialBokeh),this._oldClearColor=new Xt}render(t,r,n){this.scene.overrideMaterial=this.materialDepth,t.getClearColor(this._oldClearColor);const i=t.getClearAlpha(),s=t.autoClear;t.autoClear=!1,t.setClearColor(16777215),t.setClearAlpha(1),t.setRenderTarget(this.renderTargetDepth),t.clear(),t.render(this.scene,this.camera),this.uniforms.tColor.value=n.texture,this.uniforms.nearClip.value=this.camera.near,this.uniforms.farClip.value=this.camera.far,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(r),t.clear(),this.fsQuad.render(t)),this.scene.overrideMaterial=null,t.setClearColor(this._oldClearColor),t.setClearAlpha(i),t.autoClear=s}setSize(t,r){this.materialBokeh.uniforms.aspect.value=t/r,this.renderTargetDepth.setSize(t,r)}dispose(){this.renderTargetDepth.dispose(),this.materialDepth.dispose(),this.materialBokeh.dispose(),this.fsQuad.dispose()}}class Vf{constructor(t){if(!t)throw new Error("Canvas is required for Scene initialization");this.initialized=!1,this.isDestroyed=!1,this.animationFrameId=null,this.canvas=t,this.mouse=new it,this.targetRotation=new it,this.time=0,this.currentSection="hero",this.targetCameraPosition=new Pt(0,0,100),this.targetLookAt=new Pt(0,0,0);try{this.initScene(),this.initRenderer(),this.initCamera(),this.setupPostProcessing(),this.setupLights(),this.initSceneObjects(),this.setupEventListeners(),this.initialized=!0,this.startAnimation()}catch(r){throw console.error("Failed to initialize scene:",r),this.dispose(),r}}initScene(){this.scene=new Za,this.scene.fog=new Ka(0,5e-4)}initRenderer(){this.renderer=new Ja({canvas:this.canvas,antialias:!0,alpha:!0,powerPreference:"high-performance"}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.toneMapping=Qa,this.renderer.toneMappingExposure=1.2}initCamera(){const r=window.innerWidth/window.innerHeight,n=.1,i=1e4;this.camera=new el(60,r,n,i),this.camera.position.set(0,0,100),this.camera.lookAt(0,0,0)}setupPostProcessing(){this.composer=new If(this.renderer),this.composer.addPass(new jf(this.scene,this.camera)),this.bloomPass=new cr(new it(window.innerWidth,window.innerHeight),2.5,.5,.7),this.composer.addPass(this.bloomPass),this.bokehPass=new Bf(this.scene,this.camera,{focus:1,aperture:.025,maxblur:.015}),this.composer.addPass(this.bokehPass)}setupLights(){const t=new tl(4210752,2);this.scene.add(t),this.primaryLight=new ts(8035999,4),this.primaryLight.position.set(50,50,50),this.scene.add(this.primaryLight),this.secondaryLight=new ts(5270655,3),this.secondaryLight.position.set(-50,-50,-50),this.scene.add(this.secondaryLight);const r=new rl(8035999,0,2);this.scene.add(r)}initSceneObjects(){this.flowField=new Ro(this.scene),this.spheres=new Df(this.scene)}setupEventListeners(){window.addEventListener("resize",this.handleResize.bind(this)),document.addEventListener("mousemove",this.handleMouseMove.bind(this))}handleResize(){const t=window.innerWidth,r=window.innerHeight;this.camera.aspect=t/r,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,r),this.composer.setSize(t,r)}handleMouseMove(t){this.mouse.x=t.clientX/window.innerWidth*2-1,this.mouse.y=-(t.clientY/window.innerHeight)*2+1,this.targetRotation.x=this.mouse.y*.3,this.targetRotation.y=this.mouse.x*.3}startAnimation(){const t=()=>{this.isDestroyed||(this.animate(performance.now()),this.animationFrameId=requestAnimationFrame(t))};this.animationFrameId=requestAnimationFrame(t)}animate(t){if(!this.initialized||this.isDestroyed)return;this.time=t*.001,this.camera.position.lerp(this.targetCameraPosition,.05);const r=new Pt;this.camera.getWorldDirection(r);const n=this.targetLookAt.clone().sub(this.camera.position).normalize(),i=r.lerp(n,.05);this.camera.lookAt(this.camera.position.clone().add(i)),this.camera.rotation.x+=(this.targetRotation.x-this.camera.rotation.x)*.05,this.camera.rotation.y+=(this.targetRotation.y-this.camera.rotation.y)*.05,this.primaryLight&&(this.primaryLight.position.x=Math.sin(this.time)*50,this.primaryLight.position.y=Math.cos(this.time*.5)*30,this.primaryLight.position.z=Math.cos(this.time)*50,this.primaryLight.intensity=3+Math.sin(this.time*2)*1),this.secondaryLight&&(this.secondaryLight.position.x=Math.sin(this.time+Math.PI)*50,this.secondaryLight.position.y=Math.cos(this.time*.5+Math.PI)*30,this.secondaryLight.position.z=Math.cos(this.time+Math.PI)*50,this.secondaryLight.intensity=2+Math.sin(this.time*2+Math.PI)*1),this.flowField&&this.flowField.update(this.time),this.spheres&&this.spheres.update(this.time),this.composer.render()}updateSection(t){switch(this.currentSection=t,t){case"hero":this.targetCameraPosition.set(0,0,100),this.targetLookAt.set(0,0,0),this.bloomPass&&(this.bloomPass.strength=2.5,this.bloomPass.radius=.5);break;case"vision-solutions":this.targetCameraPosition.set(50,20,80),this.targetLookAt.set(0,0,-20),this.bloomPass&&(this.bloomPass.strength=3,this.bloomPass.radius=.6);break;case"manifesto":this.targetCameraPosition.set(-50,30,60),this.targetLookAt.set(0,0,-40),this.bloomPass&&(this.bloomPass.strength=2,this.bloomPass.radius=.7);break}this.flowField&&this.flowField.updateSection(t),this.spheres&&this.spheres.updateSection(t)}dispose(){this.isDestroyed=!0,this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),window.removeEventListener("resize",this.handleResize),document.removeEventListener("mousemove",this.handleMouseMove),this.renderer&&this.renderer.dispose(),this.composer&&this.composer.dispose(),this.flowField&&this.flowField.dispose(),this.spheres&&this.spheres.dispose(),this.scene&&this.scene.clear(),this.initialized=!1}}function Uf(e,t={}){const{intensity:r=.02,threshold:n=.5,debounceMs:i=16}=t,[s,o]=u.useState({x:.5,y:.5}),[a,l]=u.useState(!1),c=u.useRef(0),d=u.useRef({x:.5,y:.5}),h=u.useCallback(p=>{if(!e.current)return;const y=document.querySelector(".site-header");if(y){const P=y.getBoundingClientRect();if(p.clientY<=P.bottom)return}const b=Date.now();if(b-c.current<i)return;c.current=b;const x=e.current.getBoundingClientRect(),C=(p.clientX-x.left)/x.width,w=(p.clientY-x.top)/x.height,M=Math.abs(C-d.current.x),R=Math.abs(w-d.current.y);if(M>n||R>n){const P=d.current.x+(C-d.current.x)*r,v=d.current.y+(w-d.current.y)*r;o({x:P,y:v}),d.current={x:P,y:v},l(!0)}else l(!1)},[r,n,i]),f=u.useCallback(()=>{o({x:.5,y:.5}),d.current={x:.5,y:.5},l(!1)},[]);return u.useEffect(()=>{const p=e.current;if(p)return p.addEventListener("mousemove",h,{passive:!0}),p.addEventListener("mouseleave",f),()=>{p.removeEventListener("mousemove",h),p.removeEventListener("mouseleave",f)}},[e,h,f]),{position:s,isMoving:a}}const Of=({currentSection:e})=>{const t=u.useRef(null),r=u.useRef(null),n=u.useRef(null),i=u.useRef(null),{position:s,isMoving:o}=Uf(r,{intensity:.03,threshold:.1,debounceMs:16});return u.useEffect(()=>{if(r.current){t.current=new Ro;const a=document.querySelector(".scene-canvas");a&&(n.current=new Vf(a));const l=c=>{t.current&&t.current.update(c*.001),n.current?.initialized&&n.current.animate(c),i.current=requestAnimationFrame(l)};return i.current=requestAnimationFrame(l),()=>{i.current&&cancelAnimationFrame(i.current),t.current&&t.current.dispose(),n.current&&n.current.dispose()}}},[]),u.useEffect(()=>{t.current&&t.current.updateSection(e),n.current?.initialized&&n.current.updateSection(e)},[e]),m.jsxs("div",{className:"layered-background",ref:r,children:[m.jsx(Pe.div,{className:"background-layer",initial:{opacity:0},animate:{opacity:1,backgroundColor:e==="hero"?"rgba(0, 0, 0, 0.75)":"rgba(5, 5, 5, 0.7)"},transition:{duration:1,ease:"easeInOut"}}),m.jsx(Pe.canvas,{className:"scene-canvas",initial:{opacity:0},animate:{opacity:.8},transition:{duration:1}}),m.jsx(Ou,{currentSection:e}),m.jsx(Pe.div,{initial:{opacity:0},animate:{opacity:.8},transition:{duration:.5},style:{position:"absolute",inset:0,zIndex:2,mixBlendMode:"screen",willChange:"transform"},children:m.jsx(Pf,{})}),m.jsx(Pe.div,{className:"glow-gradient",initial:{opacity:0},animate:{opacity:o?.4:.2,background:`radial-gradient(
            circle at ${s.x*100}% ${s.y*100}%,
            var(--glow-primary) 0%,
            transparent 70%
          )`},transition:{duration:.3}}),m.jsx(Pe.div,{className:"flow-field-layer",initial:{opacity:0},animate:{opacity:e==="manifesto"?.7:.5,background:`radial-gradient(
            circle at ${s.x*100}% ${s.y*100}%,
            rgba(158, 207, 208, 0.1),
            transparent 70%
          )`},transition:{duration:.8}}),m.jsx(Pe.div,{className:"pattern-overlay",initial:{opacity:0},animate:{opacity:e==="vision-solutions"?.2:.1,transform:o?"scale(1.05)":"scale(1)"},transition:{duration:.8}}),m.jsx(Pe.div,{className:"gradient-overlay",initial:{opacity:0},animate:{opacity:1,background:`radial-gradient(
            circle at ${s.x*100}% ${s.y*100}%,
            rgba(158, 207, 208, 0.1),
            transparent 70%
          )`},transition:{duration:1,delay:.4}})]})},Hf=()=>{const e=u.useRef(null),t=u.useRef(null);return u.useEffect(()=>{const r=o=>{e.current&&(e.current.style.left=`${o.clientX}px`,e.current.style.top=`${o.clientY}px`,e.current.style.opacity="0.3"),document.querySelectorAll(".card, .ecosystem-drawer").forEach(l=>{const c=l.getBoundingClientRect(),d=o.clientX-c.left,h=o.clientY-c.top;l.style.setProperty("--mouse-x",`${d}px`),l.style.setProperty("--mouse-y",`${h}px`)})},n=()=>{if(t.current){const o=document.querySelector(".main-content");if(o){const a=o.scrollTop,l=o.scrollHeight-o.clientHeight,c=a/l*100;t.current.style.transform=`scaleX(${c/100})`}}},i=()=>{e.current&&(e.current.style.opacity="0")};document.addEventListener("mousemove",r),document.addEventListener("mouseleave",i);const s=document.querySelector(".main-content");return s&&s.addEventListener("scroll",n),()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseleave",i),s&&s.removeEventListener("scroll",n)}},[]),m.jsxs(m.Fragment,{children:[m.jsx(Pe.div,{ref:e,className:"mouse-trail",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:.3},transition:{type:"spring",stiffness:300,damping:30}}),m.jsx(Pe.div,{ref:t,className:"scroll-progress",initial:{scaleX:0},animate:{scaleX:1},transition:{duration:.3,ease:"easeOut"}})]})};class Wf{constructor(){this.observers=[],this.init()}init(){const t=document.querySelectorAll(".section"),r={root:null,rootMargin:"0px",threshold:qf()},n=new IntersectionObserver(i=>{i.forEach(s=>{const o=s.target;if(s.isIntersecting){o.style.opacity=Math.min(1,s.intersectionRatio*1.5),o.classList.add("visible");const a=o.children;Array.from(a).forEach((l,c)=>{l.classList.contains("visible")||(l.style.transitionDelay=`${c*.1}s`,l.classList.add("visible"))})}else o.classList.contains("visible")&&(o.style.opacity=1)})},r);t.forEach(i=>{i&&(i.style.opacity="0",i.style.transition="opacity 0.5s ease",n.observe(i))}),n&&this.observers.push(n)}dispose(){this.observers&&this.observers.length&&(this.observers.forEach(t=>{t&&t.disconnect&&t.disconnect()}),this.observers=[])}}function qf(){const e=[];for(let r=0;r<=20;r++)e.push(r/20);return e}const Yf=u.lazy(()=>sl(()=>import("./Home-DcwaOwB_.js"),__vite__mapDeps([0,1,2]))),Gf=[{id:"hero",label:"Home"},{id:"services",label:"Services"},{id:"manifesto",label:"Manifesto"},{id:"ecosystem",label:"Ecosystem"}],Xf={platforms:{title:"Platforms",links:[{label:"Terminals",href:"/platforms/terminals"},{label:"Radical",href:"/platforms/radical"},{label:"PathFinder",href:"/platforms/pathfinder"},{label:"Wuji",href:"/platforms/wuji"}]},hardware:{title:"Hardware",links:[{label:"Neural Interfaces",href:"/hardware/neural"},{label:"Haptics",href:"/hardware/haptics"},{label:"Sensors",href:"/hardware/sensors"}]},experiences:{title:"Experiences",links:[{label:"Virtual Labs",href:"/experiences/labs"},{label:"Training",href:"/experiences/training"},{label:"Research",href:"/experiences/research"}]},stash:{title:"Stash",links:[{label:"Documentation",href:"/stash/docs"},{label:"Resources",href:"/stash/resources"},{label:"Tools",href:"/stash/tools"}]}};function Zf(){const[e,t]=u.useState("hero"),[r,n]=u.useState(null),i=J.useRef(null);u.useEffect(()=>(i.current=new Wf,()=>{i.current&&i.current.dispose()}),[]),u.useEffect(()=>{const a=()=>{document.querySelectorAll(".section").forEach(d=>{const h=d.getBoundingClientRect();h.top>=-100&&h.top<=window.innerHeight/3?(t(d.id),d.classList.add("active")):d.classList.remove("active")})},l=document.querySelector(".main-content");if(l)return l.addEventListener("scroll",a,{passive:!0}),()=>l.removeEventListener("scroll",a)},[]);const s=a=>{const l=document.getElementById(a);l&&l.scrollIntoView({behavior:"smooth"})},o=a=>{n(r===a?null:a)};return m.jsxs("div",{className:"app-container",children:[m.jsx(Of,{}),m.jsx(Hf,{}),m.jsx($u,{sections:Gf,currentSection:e,onNavigate:s}),m.jsxs("main",{className:"main-content",children:[m.jsx("section",{id:"hero",className:"section",children:m.jsx(Yf,{})}),m.jsx("section",{id:"services",className:"section",children:m.jsxs("div",{className:"section-content",children:[m.jsxs(Pe.h2,{className:"section-title",initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},children:["Services",m.jsx("div",{className:"title-underline"})]}),m.jsxs("div",{className:"services-grid",children:[m.jsx(kr,{children:m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"Enterprise AI Strategy"}),m.jsxs("ul",{children:[m.jsx("li",{children:"Comprehensive AI Readiness Assessment"}),m.jsx("li",{children:"Platform Selection & Integration Planning"}),m.jsx("li",{children:"Risk Analysis & Compliance Framework"}),m.jsx("li",{children:"ROI Modeling & Performance Metrics"}),m.jsx("li",{children:"Change Management & Training Programs"}),m.jsx("li",{children:"Scalability & Growth Planning"})]})]})}),m.jsx(kr,{children:m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"LLM Systems"}),m.jsxs("ul",{children:[m.jsx("li",{children:"Custom Model Architecture & Development"}),m.jsx("li",{children:"Advanced Prompt Engineering & Optimization"}),m.jsx("li",{children:"Multi-Modal System Integration"}),m.jsx("li",{children:"Performance Tuning & Scaling"}),m.jsx("li",{children:"Security & Privacy Implementation"}),m.jsx("li",{children:"Continuous Learning & Adaptation"})]})]})})]})]})}),m.jsx("section",{id:"manifesto",className:"section",children:m.jsxs("div",{className:"section-content",children:[m.jsxs(Pe.h2,{className:"section-title",initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},children:["Manifesto",m.jsx("div",{className:"title-underline"})]}),m.jsxs(Pe.div,{className:"vision-statement",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[m.jsx("h3",{children:"Vision"}),m.jsx("p",{children:"We believe in creating AI systems that are ethical, transparent, and focused on enhancing human capabilities. Our approach combines cutting-edge technology with deep industry knowledge to deliver solutions that drive meaningful transformation."})]}),m.jsxs("div",{className:"manifesto-grid",children:[m.jsx(kr,{children:m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"Purpose"}),m.jsx("p",{children:"Building AI that serves humanity's highest potential"})]})}),m.jsx(kr,{children:m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"Innovation"}),m.jsx("p",{children:"Pushing boundaries while maintaining ethical standards"})]})}),m.jsx(kr,{children:m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"Collaboration"}),m.jsx("p",{children:"Working together to create meaningful solutions"})]})})]})]})}),m.jsx("section",{id:"ecosystem",className:"section ecosystem-section",children:m.jsxs("div",{className:"section-content",children:[m.jsxs(Pe.h2,{className:"section-title",initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},children:["Ecosystem",m.jsx("div",{className:"title-underline"})]}),m.jsx("div",{className:"ecosystem-grid",children:Object.entries(Xf).map(([a,l])=>m.jsxs(Pe.div,{className:`ecosystem-drawer ${r===a?"open":""}`,onClick:()=>o(a),initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[m.jsxs("div",{className:"drawer-header",children:[m.jsx("h3",{children:l.title}),m.jsx(Pe.span,{animate:{rotate:r===a?180:0},transition:{duration:.3},children:"↓"})]}),m.jsx("div",{className:"drawer-content",children:m.jsx("ul",{className:"drawer-links",children:l.links.map((c,d)=>m.jsx("li",{children:m.jsxs("a",{href:c.href,children:[m.jsx("span",{children:"→"}),c.label]})},d))})})]},a))})]})})]})]})}const Kf=bu([{path:"/",element:m.jsx(u.Suspense,{fallback:m.jsx(Au,{}),children:m.jsx(Zf,{})}),errorElement:m.jsx(So,{})}]);function Jf(){return m.jsx(So,{children:m.jsx(Pu,{router:Kf})})}const Zn={reducedMotion:"user",transition:{duration:.5,ease:[.32,.72,0,1]},features:Ia};Jn.createRoot(document.getElementById("root")).render(m.jsx(J.StrictMode,{children:m.jsx(Fa,{strict:!0,features:Zn.features,children:m.jsx(La,{reducedMotion:Zn.reducedMotion,transition:Zn.transition,children:m.jsx(Jf,{})})})}));
